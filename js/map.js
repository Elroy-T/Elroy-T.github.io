var MDM=function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/dist/",e(e.s=478)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(72);n.d(e,"accessor",function(){return r.c}),n.d(e,"accessorName",function(){return r.b}),n.d(e,"accessorFields",function(){return r.a});var i=n(272);n.d(e,"id",function(){return i.b}),n.d(e,"identity",function(){return i.c}),n.d(e,"zero",function(){return i.f}),n.d(e,"one",function(){return i.d}),n.d(e,"truthy",function(){return i.e}),n.d(e,"falsy",function(){return i.a});var a=n(543);n.d(e,"logger",function(){return a.f}),n.d(e,"None",function(){return a.d}),n.d(e,"Error",function(){return a.b}),n.d(e,"Warn",function(){return a.e}),n.d(e,"Info",function(){return a.c}),n.d(e,"Debug",function(){return a.a});var o=n(544);n.d(e,"panLinear",function(){return o.a}),n.d(e,"panLog",function(){return o.b}),n.d(e,"panPow",function(){return o.c}),n.d(e,"zoomLinear",function(){return o.d}),n.d(e,"zoomLog",function(){return o.e}),n.d(e,"zoomPow",function(){return o.f});var s=n(175);n.d(e,"array",function(){return s.a});var u=n(545);n.d(e,"compare",function(){return u.a});var c=n(546);n.d(e,"constant",function(){return c.a});var l=n(547);n.d(e,"debounce",function(){return l.a});var f=n(274);n.d(e,"error",function(){return f.a});var h=n(548);n.d(e,"extend",function(){return h.a});var d=n(549);n.d(e,"extentIndex",function(){return d.a});var p=n(550);n.d(e,"fastmap",function(){return p.a});var v=n(273);n.d(e,"field",function(){return v.a});var g=n(551);n.d(e,"inherits",function(){return g.a});var b=n(174);n.d(e,"isArray",function(){return b.a});var m=n(552);n.d(e,"isBoolean",function(){return m.a});var y=n(279);n.d(e,"isDate",function(){return y.a});var _=n(176);n.d(e,"isFunction",function(){return _.a});var O=n(280);n.d(e,"isNumber",function(){return O.a});var w=n(275);n.d(e,"isObject",function(){return w.a});var x=n(553);n.d(e,"isRegExp",function(){return x.a});var j=n(276);n.d(e,"isString",function(){return j.a});var M=n(554);n.d(e,"key",function(){return M.a});var k=n(555);n.d(e,"merge",function(){return k.a});var S=n(556);n.d(e,"pad",function(){return S.a});var E=n(277);n.d(e,"peek",function(){return E.a});var A=n(281);n.d(e,"repeat",function(){return A.a});var P=n(107);n.d(e,"splitAccessPath",function(){return P.a});var T=n(108);n.d(e,"stringValue",function(){return T.a});var N=n(557);n.d(e,"toBoolean",function(){return N.a});var C=n(558);n.d(e,"toDate",function(){return C.a});var R=n(278);n.d(e,"toNumber",function(){return R.a});var D=n(559);n.d(e,"toString",function(){return D.a});var L=n(560);n.d(e,"toSet",function(){return L.a});var I=n(561);n.d(e,"truncate",function(){return I.a});var z=n(562);n.d(e,"visitArray",function(){return z.a})},function(t,e,n){"use strict";var r=(n(73),n(177));n.d(e,"h",function(){return r.a}),n.d(e,"l",function(){return r.b});var i=n(563);n.d(e,"a",function(){return i.a});var a=n(283);n.d(e,"b",function(){return a.a});var o=n(282);n.d(e,"e",function(){return o.a});var s=n(112);n.d(e,"f",function(){return s.b});var u=n(297);n.d(e,"c",function(){return u.a});var c=n(109);n.d(e,"d",function(){return c.a});var l=n(616);n.d(e,"g",function(){return l.a});var f=n(178);n.d(e,"j",function(){return f.a}),n.d(e,"n",function(){return f.d}),n.d(e,"k",function(){return f.b}),n.d(e,"m",function(){return f.c}),n.d(e,"o",function(){return f.e}),n.d(e,"r",function(){return f.f});var h=n(617);n.d(e,"i",function(){return h.a}),n.d(e,"p",function(){return h.b}),n.d(e,"q",function(){return h.c})},function(t,e,n){"use strict";function r(t,e){for(var n={},r=0,i=e;r<i.length;r++){var a=i[r];t.hasOwnProperty(a)&&(n[a]=t[a])}return n}function i(t,e){for(var n=O(t),r=0,i=e;r<i.length;r++)delete n[i[r]];return n}function a(t){if(A.isNumber(t))return t;var e=A.isString(t)?t:E(t);if(e.length<100)return e;for(var n=0,r=0;r<e.length;r++)n=(n<<5)-n+e.charCodeAt(r),n&=n;return n}function o(t,e){return t.indexOf(e)>-1}function s(t,e){return t.filter(function(t){return!o(e,t)})}function u(t,e){return t.concat(s(e,t))}function c(t,e){for(var n=0,r=0;r<t.length;r++)if(e(t[r],r,n++))return!0;return!1}function l(t,e){for(var n=0,r=0;r<t.length;r++)if(!e(t[r],r,n++))return!1;return!0}function f(t){return[].concat.apply([],t)}function h(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++)t=d(t,i[r]);return t}function d(t,e){if("object"!=typeof e||null===e)return t;for(var n in e)e.hasOwnProperty(n)&&void 0!==e[n]&&("object"!=typeof e[n]||A.isArray(e[n])||null===e[n]?t[n]=e[n]:"object"!=typeof t[n]||null===t[n]?t[n]=h(A.isArray(e[n].constructor)?[]:{},e[n]):h(t[n],e[n]));return t}function p(t,e){for(var n,r=[],i={},a=0,o=t;a<o.length;a++){var s=o[a];(n=e(s))in i||(i[n]=1,r.push(s))}return r}function v(t,e){for(var n in t)if(t.hasOwnProperty(n)&&e[n]&&t[n]&&e[n]!==t[n])return!0;return!1}function g(t,e){for(var n in t)if(n in e)return!0;return!1}function b(t){return!isNaN(t)}function m(t,e){if(t.length!==e.length)return!0;t.sort(),e.sort();for(var n=0;n<t.length;n++)if(e[n]!==t[n])return!0;return!1}function y(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(t[n]);return e}function _(t){return e.keys(t)}function O(t){return JSON.parse(JSON.stringify(t))}function w(t){return!0===t||!1===t}function x(t){var e=t.replace(/\W/g,"_");return(t.match(/^\d+/)?"_":"")+e}function j(t,e){return P.isLogicalNot(t)?"!("+j(t.not,e)+")":P.isLogicalAnd(t)?"("+t.and.map(function(t){return j(t,e)}).join(") && (")+")":P.isLogicalOr(t)?"("+t.or.map(function(t){return j(t,e)}).join(") || (")+")":e(t)}function M(t,n){for(var r=!0;n.length>0&&r;){for(var i=t,a=0;a<n.length-1;a++)i=i[n[a]];delete i[n.pop()],0!==e.keys(i).length&&(r=!1)}}function k(t){return t.charAt(0).toUpperCase()+t.substr(1)}function S(t){return"["+A.splitAccessPath(t).map(A.stringValue).join("][")+"]"}Object.defineProperty(e,"__esModule",{value:!0});var E=n(995),A=n(0),P=n(223);e.pick=r,e.omit=i,e.stringify=E,e.hash=a,e.contains=o,e.without=s,e.union=u,e.some=c,e.every=l,e.flatten=f,e.mergeDeep=h,e.unique=p,e.differ=v,e.hasIntersection=g,e.isNumeric=b,e.differArray=m,e.keys=Object.keys,e.vals=y,e.flagKeys=_,e.duplicate=O,e.isBoolean=w,e.varName=x,e.logicalExpr=j,e.deleteNestedProperty=M,e.titlecase=k,e.accessPath=S},function(t,e,n){"use strict";function r(t){return function(){h=new d,t(h),a()}}function i(t){return h=t}function a(){return h=f}function o(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];h.warn.apply(h,arguments)}function s(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];h.info.apply(h,arguments)}function u(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];h.debug.apply(h,arguments)}Object.defineProperty(e,"__esModule",{value:!0});var c=n(0),l=n(2),f=c.logger(c.Warn),h=f,d=function(){function t(){this.warns=[],this.infos=[],this.debugs=[]}return t.prototype.level=function(){return this},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(n=this.warns).push.apply(n,t),this;var n},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(n=this.infos).push.apply(n,t),this;var n},t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(n=this.debugs).push.apply(n,t),this;var n},t}();e.LocalLogger=d,e.wrap=r,e.set=i,e.reset=a,e.warn=o,e.info=s,e.debug=u,function(t){function e(t){return'Cannot project a selection on encoding channel "'+t+'", which has no field.'}function n(t){return'The "nearest" transform is not supported for '+t+" marks."}function r(t){return'Cannot find a selection named "'+t+'"'}function i(t){return'Unknown repeated value "'+t+'".'}function a(t){return'Cannot set title "anchor" for a '+t+" spec"}function o(t){return'Unrecognized parse "'+t+'".'}function s(t,e,n){return'An ancestor parsed field "'+t+'" as '+n+" but a child wants to parse the field as "+e+"."}function u(t){return"Ignoring an invalid transform: "+l.stringify(t)+"."}function c(t){return"Layer's shared "+t.join(",")+" channel "+(1===t.length?"is":"are")+" overriden"}function f(t){var e=t.parentProjection,n=t.projection;return"Layer's shared projection "+l.stringify(e)+" is overridden by a child projection "+l.stringify(n)+"."}function h(t,e,n){return"Channel "+t+" is a "+e+". Converted to {value: "+l.stringify(n)+"}."}function d(t){return'Invalid field type "'+t+'"'}function p(t,e){return'Invalid field type "'+t+'" for aggregate: "'+e+'", using "quantitative" instead.'}function v(t){return'Invalid aggregation operator "'+t+'"'}function g(t,e,n){return'Invalid field type "'+t+'" for channel "'+e+'", using "'+n+'" instead.'}function b(t,e){return"Dropping "+l.stringify(t)+' from channel "'+e+'" since it does not contain data field or value.'}function m(t,e,n){return t+"-encoding with type "+e+" is deprecated. Replacing with "+n+"-encoding."}function y(t,e,n){return t+' dropped as it is incompatible with "'+e+'"'+(n?" when "+n:"")+"."}function _(t){return t+"-encoding is dropped as "+t+" is not a valid encoding channel."}function O(t){return t+" encoding should be discrete (ordinal / nominal / binned)."}function w(t,e){return'Using discrete channel "'+t+'" to encode "'+e+'" field can be misleading as it does not encode '+("ordinal"===e?"order":"magnitude")+"."}function x(t){return'Cannot clearly determine orientation for "'+t+'" since both x and y channel encode continuous fields. In this case, we use vertical by default'}function j(t){return'Cannot clearly determine orientation for "'+t+'" since both x and y channel encode discrete or empty fields.'}function M(t,e){return'Specified orient "'+t+'" overridden with "'+e+'"'}function k(t){return'Cannot use the scale property "'+t+'" with non-color channel.'}function S(t){return"Using unaggregated domain with raw field has no effect ("+l.stringify(t)+")."}function E(t){return'Unaggregated domain not applicable for "'+t+'" since it produces values outside the origin domain of the source data.'}function A(t){return"Unaggregated domain is currently unsupported for log scale ("+l.stringify(t)+")."}function P(t){return"Using size field when "+t+"-channel has a band scale is not supported."}function T(t){return'Cannot apply size to non-oriented mark "'+t+'".'}function N(t){return'rangeStep for "'+t+'" is dropped as top-level '+("x"===t?"width":"height")+" is provided."}function C(t,e,n){return'Channel "'+t+'" does not work with "'+e+'" scale. We are using "'+n+'" scale instead.'}function R(t,e){return'FieldDef does not work with "'+t+'" scale. We are using "'+e+'" scale instead.'}function D(t,e,n){return n+"-scale's \""+e+'" is dropped as it does not work with '+t+" scale."}function L(t,e){return'Scale type "'+e+'" does not work with mark "'+t+'".'}function I(t,e,n,r){return"Conflicting "+e+' property "'+t+'" ('+l.stringify(n)+" and "+l.stringify(r)+").  Using "+l.stringify(n)+"."}function z(t){return'Setting the scale to be independent for "'+t+'" means we also have to set the guide (axis or legend) to be independent.'}function F(t){return"Cannot set "+t+'-scale\'s "domain" as it is binned. Please use "bin"\'s "extent" instead.'}function U(t){return"Dropping sort property "+l.stringify(t)+" as unioned domains only support boolean or op 'count'."}function B(t){return'Cannot stack "'+t+'" if there is already "'+t+'2"'}function q(t){return"Cannot stack non-linear scale ("+t+")"}function G(t){return'Stacking is applied even though the aggregate function is non-summative ("'+t+'")'}function H(t,e){return"Invalid "+t+": "+l.stringify(e)}function W(t){return'Time unit "'+t+'" is not supported. We are replacing it with '+t.replace("day","date")+"."}function Y(t){return"Dropping day from datetime "+l.stringify(t)+" as day cannot be combined with other units."}t.INVALID_SPEC="Invalid spec",t.FIT_NON_SINGLE='Autosize "fit" only works for single views and layered views.',t.CANNOT_FIX_RANGE_STEP_WITH_FIT='Cannot use a fixed value of "rangeStep" when "autosize" is "fit".',t.cannotProjectOnChannelWithoutField=e,t.nearestNotSupportForContinuous=n,t.selectionNotFound=r,t.SCALE_BINDINGS_CONTINUOUS="Scale bindings are currently only supported for scales with unbinned, continuous domains.",t.noSuchRepeatedValue=i,t.CONCAT_CANNOT_SHARE_AXIS="Axes cannot be shared in concatenated views.",t.REPEAT_CANNOT_SHARE_AXIS="Axes cannot be shared in repeated views.",t.cannotSetTitleAnchor=a,t.unrecognizedParse=o,t.differentParse=s,t.invalidTransformIgnored=u,t.NO_FIELDS_NEEDS_AS='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the the data from the secondary source.',t.encodingOverridden=c,t.projectionOverridden=f,t.primitiveChannelDef=h,t.invalidFieldType=d,t.invalidFieldTypeForCountAggregate=p,t.invalidAggregate=v,t.emptyOrInvalidFieldType=g,t.emptyFieldDef=b,t.latLongDeprecated=m,t.incompatibleChannel=y,t.invalidEncodingChannel=_,t.facetChannelShouldBeDiscrete=O,t.discreteChannelCannotEncode=w,t.BAR_WITH_POINT_SCALE_AND_RANGESTEP_NULL="Bar mark should not be used with point scale when rangeStep is null. Please use band scale instead.",t.unclearOrientContinuous=x,t.unclearOrientDiscreteOrEmpty=j,t.orientOverridden=M,t.CANNOT_UNION_CUSTOM_DOMAIN_WITH_FIELD_DOMAIN="custom domain scale cannot be unioned with default field-based domain",t.cannotUseScalePropertyWithNonColor=k,t.unaggregateDomainHasNoEffectForRawField=S,t.unaggregateDomainWithNonSharedDomainOp=E,t.unaggregatedDomainWithLogScale=A,t.cannotUseSizeFieldWithBandSize=P,t.cannotApplySizeToNonOrientedMark=T,t.rangeStepDropped=N,t.scaleTypeNotWorkWithChannel=C,t.scaleTypeNotWorkWithFieldDef=R,t.scalePropertyNotWorkWithScaleType=D,t.scaleTypeNotWorkWithMark=L,t.mergeConflictingProperty=I,t.independentScaleMeansIndependentGuide=z,t.conflictedDomain=F,t.domainSortDropped=U,t.UNABLE_TO_MERGE_DOMAINS="Unable to merge domains",t.MORE_THAN_ONE_SORT="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",t.INVALID_CHANNEL_FOR_AXIS="Invalid channel for axis.",t.cannotStackRangedMark=B,t.cannotStackNonLinearScale=q,t.stackNonSummativeAggregate=G,t.invalidTimeUnit=H,t.dayReplacedWithDate=W,t.droppedDay=Y}(e.message||(e.message={}))},function(t,e,n){"use strict";e.a=function(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(6*r,6*++r);return n}},function(t,e,n){"use strict";function r(t){return t>1?0:t<-1?u:Math.acos(t)}function i(t){return t>1?c:t<-1?-c:Math.asin(t)}function a(t){return(t=w(t/2))*t}n.d(e,"i",function(){return o}),n.d(e,"j",function(){return s}),n.d(e,"o",function(){return u}),n.d(e,"l",function(){return c}),n.d(e,"q",function(){return l}),n.d(e,"w",function(){return f}),n.d(e,"h",function(){return h}),n.d(e,"r",function(){return d}),n.d(e,"a",function(){return p}),n.d(e,"d",function(){return v}),n.d(e,"e",function(){return g}),n.d(e,"g",function(){return b}),n.d(e,"f",function(){return m}),n.d(e,"k",function(){return y}),n.d(e,"n",function(){return _}),n.d(e,"p",function(){return O}),n.d(e,"t",function(){return w}),n.d(e,"s",function(){return x}),n.d(e,"u",function(){return j}),n.d(e,"v",function(){return M}),e.b=r,e.c=i,e.m=a;var o=1e-6,s=1e-12,u=Math.PI,c=u/2,l=u/4,f=2*u,h=180/u,d=u/180,p=Math.abs,v=Math.atan,g=Math.atan2,b=Math.cos,m=Math.ceil,y=Math.exp,_=(Math.floor,Math.log),O=Math.pow,w=Math.sin,x=Math.sign||function(t){return t>0?1:t<0?-1:0},j=Math.sqrt,M=Math.tan},function(t,e,n){"use strict";function r(t){return"color"===t||"fill"===t||"stroke"===t}function i(t){return!!v[t]}function a(t){return!!_[t]}function o(t,e){return e in s(t)}function s(t){switch(t){case e.COLOR:case e.FILL:case e.STROKE:case e.DETAIL:case e.KEY:case e.TOOLTIP:case e.HREF:case e.ORDER:case e.OPACITY:case e.ROW:case e.COLUMN:return{point:!0,tick:!0,rule:!0,circle:!0,square:!0,bar:!0,rect:!0,line:!0,area:!0,text:!0,geoshape:!0};case e.X:case e.Y:case e.LATITUDE:case e.LONGITUDE:return{point:!0,tick:!0,rule:!0,circle:!0,square:!0,bar:!0,rect:!0,line:!0,area:!0,text:!0};case e.X2:case e.Y2:case e.LATITUDE2:case e.LONGITUDE2:return{rule:!0,bar:!0,rect:!0,area:!0};case e.SIZE:return{point:!0,tick:!0,rule:!0,circle:!0,square:!0,bar:!0,text:!0,line:!0};case e.SHAPE:return{point:!0,geoshape:!0};case e.TEXT:return{text:!0}}}function u(t){switch(t){case e.X:case e.Y:case e.SIZE:case e.OPACITY:case e.X2:case e.Y2:return"continuous";case e.ROW:case e.COLUMN:case e.SHAPE:case e.TEXT:case e.TOOLTIP:case e.HREF:return"discrete";case e.COLOR:case e.FILL:case e.STROKE:return"flexible";case e.LATITUDE:case e.LONGITUDE:case e.LATITUDE2:case e.LONGITUDE2:case e.DETAIL:case e.KEY:case e.ORDER:return}throw new Error("rangeType not implemented for "+t)}var c=this&&this.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},l=this&&this.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&(n[r[i]]=t[r[i]]);return n};Object.defineProperty(e,"__esModule",{value:!0});var f,h=n(2);!function(t){t.ROW="row",t.COLUMN="column",t.X="x",t.Y="y",t.X2="x2",t.Y2="y2",t.LATITUDE="latitude",t.LONGITUDE="longitude",t.LATITUDE2="latitude2",t.LONGITUDE2="longitude2",t.COLOR="color",t.FILL="fill",t.STROKE="stroke",t.SHAPE="shape",t.SIZE="size",t.OPACITY="opacity",t.TEXT="text",t.ORDER="order",t.DETAIL="detail",t.KEY="key",t.TOOLTIP="tooltip",t.HREF="href"}(f=e.Channel||(e.Channel={})),e.X=f.X,e.Y=f.Y,e.X2=f.X2,e.Y2=f.Y2,e.LATITUDE=f.LATITUDE,e.LATITUDE2=f.LATITUDE2,e.LONGITUDE=f.LONGITUDE,e.LONGITUDE2=f.LONGITUDE2,e.ROW=f.ROW,e.COLUMN=f.COLUMN,e.SHAPE=f.SHAPE,e.SIZE=f.SIZE,e.COLOR=f.COLOR,e.FILL=f.FILL,e.STROKE=f.STROKE,e.TEXT=f.TEXT,e.DETAIL=f.DETAIL,e.KEY=f.KEY,e.ORDER=f.ORDER,e.OPACITY=f.OPACITY,e.TOOLTIP=f.TOOLTIP,e.HREF=f.HREF,e.GEOPOSITION_CHANNEL_INDEX={longitude:1,longitude2:1,latitude:1,latitude2:1},e.GEOPOSITION_CHANNELS=h.flagKeys(e.GEOPOSITION_CHANNEL_INDEX);var d=c({x:1,y:1,x2:1,y2:1},e.GEOPOSITION_CHANNEL_INDEX,{color:1,fill:1,stroke:1,opacity:1,size:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1});e.isColorChannel=r;var p={row:1,column:1},v=c({},d,p);e.CHANNELS=h.flagKeys(v);var g=(v.order,v.detail,l(v,["order","detail"]));e.SINGLE_DEF_CHANNELS=h.flagKeys(g),e.isChannel=i,e.UNIT_CHANNELS=h.flagKeys(d);var b=(d.x,d.y,d.x2,d.y2,d.latitude,d.longitude,d.latitude2,d.longitude2,l(d,["x","y","x2","y2","latitude","longitude","latitude2","longitude2"]));e.NONPOSITION_CHANNELS=h.flagKeys(b);var m={x:1,y:1};e.POSITION_SCALE_CHANNELS=h.flagKeys(m);var y=(b.text,b.tooltip,b.href,b.detail,b.key,b.order,l(b,["text","tooltip","href","detail","key","order"]));e.NONPOSITION_SCALE_CHANNELS=h.flagKeys(y);var _=c({},m,y);e.SCALE_CHANNELS=h.flagKeys(_),e.isScaleChannel=a,e.supportMark=o,e.getSupportedMark=s,e.rangeType=u},function(t,e,n){"use strict";function r(t){return t.selection}function i(t){return t&&!N.isString(t)&&"repeat"in t}function a(t){var e=t.field,n=t.timeUnit,r=t.bin,i=t.aggregate;return P({},n?{timeUnit:n}:{},r?{bin:r}:{},i?{aggregate:i}:{},{field:e})}function o(t){return!!t&&!!t.condition}function s(t){return!!t&&!!t.condition&&!N.isArray(t.condition)&&c(t.condition)}function u(t){return!!t&&!!t.condition&&(N.isArray(t.condition)||f(t.condition))}function c(t){return!(!t||!t.field&&"count"!==t.aggregate)}function l(t){return c(t)&&N.isString(t.field)}function f(t){return t&&"value"in t&&void 0!==t.value}function h(t){return!(!t||!t.scale&&!t.sort)}function d(t,e){void 0===e&&(e={});var n=t.field,r=e.prefix,i=e.suffix;if(g(t))n="count_*";else{var a=void 0;e.nofn||(t.bin?(a=R.binToString(t.bin),i=e.binSuffix||""):t.aggregate?a=String(e.aggregate||t.aggregate):t.timeUnit&&(a=String(t.timeUnit))),a&&(n=a+"_"+n)}return i&&(n=n+"_"+i),r&&(n=r+"_"+n),e.expr&&(n=""+e.expr+F.accessPath(n)),n}function p(t){switch(t.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return!!t.bin;case"latitude":case"longitude":case"temporal":return!1}throw new Error(L.message.invalidFieldType(t.type))}function v(t){return!p(t)}function g(t){return"count"===t.aggregate}function b(t,e){var n=t.field,r=t.bin,i=t.timeUnit,a=t.aggregate;return"count"===a?e.countTitle:r?n+" (binned)":i?n+" ("+I.getTimeUnitParts(i).join("-")+")":a?F.titlecase(a)+" of "+n:n}function m(t,e){var n=t.aggregate||t.timeUnit||t.bin&&"bin";return n?n.toUpperCase()+"("+t.field+")":t.field}function y(t){U=t}function _(){y(e.defaultTitleFormatter)}function O(t,e){return U(t,e)}function w(t,e){if(t.timeUnit)return"temporal";if(t.bin)return"quantitative";switch(D.rangeType(e)){case"continuous":return"quantitative";case"discrete":case"flexible":return"nominal";default:return"quantitative"}}function x(t){return c(t)?t:s(t)?t.condition:void 0}function j(t,e){if(N.isString(t)||N.isNumber(t)||N.isBoolean(t)){var n=N.isString(t)?"string":N.isNumber(t)?"number":"boolean";return L.warn(L.message.primitiveChannelDef(e,n,t)),{value:t}}return c(t)?M(t,e):s(t)?P({},t,{condition:M(t.condition,e)}):t}function M(t,e){if(t.aggregate&&!C.isAggregateOp(t.aggregate)){var n=(t.aggregate,T(t,["aggregate"]));L.warn(L.message.invalidAggregate(t.aggregate)),t=n}if(t.timeUnit&&(t=P({},t,{timeUnit:I.normalizeTimeUnit(t.timeUnit)})),t.bin&&(t=P({},t,{bin:k(t.bin,e)})),t.type){var r=z.getFullName(t.type);t.type!==r&&(t=P({},t,{type:r})),"quantitative"!==t.type&&C.isCountingAggregateOp(t.aggregate)&&(L.warn(L.message.invalidFieldTypeForCountAggregate(t.type,t.aggregate)),t=P({},t,{type:"quantitative"}))}else{var i=w(t,e);L.warn(L.message.emptyOrInvalidFieldType(t.type,e,i)),t=P({},t,{type:i})}var a=S(t,e),o=a.compatible,s=a.warning;return o||L.warn(s),t}function k(t,e){return N.isBoolean(t)?{maxbins:R.autoMaxBins(e)}:t.maxbins||t.step?t:P({},t,{maxbins:R.autoMaxBins(e)})}function S(t,e){switch(e){case"row":case"column":return v(t)&&!t.timeUnit?{compatible:!1,warning:L.message.facetChannelShouldBeDiscrete(e)}:B;case"x":case"y":case"color":case"fill":case"stroke":case"text":case"detail":case"key":case"tooltip":case"href":return B;case"longitude":case"longitude2":case"latitude":case"latitude2":return t.type!==z.QUANTITATIVE?{compatible:!1,warning:"Channel "+e+" should not be used with "+t.type+" field."}:B;case"opacity":case"size":case"x2":case"y2":return p(t)&&!t.bin?{compatible:!1,warning:"Channel "+e+" should not be used with discrete field."}:B;case"shape":return"nominal"!==t.type&&"geojson"!==t.type?{compatible:!1,warning:"Shape channel should be used with nominal data or geojson only"}:B;case"order":return"nominal"===t.type?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:B}throw new Error("channelCompatability not implemented for channel "+e)}function E(t){return"quantitative"===t.type||!!t.bin}function A(t){return"temporal"===t.type||!!t.timeUnit}var P=this&&this.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},T=this&&this.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&(n[r[i]]=t[r[i]]);return n};Object.defineProperty(e,"__esModule",{value:!0});var N=n(0),C=n(93),R=n(94),D=n(6),L=n(3),I=n(95),z=n(24),F=n(2);e.isConditionalSelection=r,e.isRepeatRef=i,e.toFieldDefBase=a,e.isConditionalDef=o,e.hasConditionalFieldDef=s,e.hasConditionalValueDef=u,e.isFieldDef=c,e.isStringFieldDef=l,e.isValueDef=f,e.isScaleFieldDef=h,e.vgField=d,e.isDiscrete=p,e.isContinuous=v,e.isCount=g,e.verbalTitleFormatter=b,e.functionalTitleFormatter=m,e.defaultTitleFormatter=function(t,e){switch(e.fieldTitle){case"plain":return t.field;case"functional":return m(t,e);default:return b(t,e)}};var U=e.defaultTitleFormatter;e.setTitleFormatter=y,e.resetTitleFormatter=_,e.title=O,e.defaultType=w,e.getFieldDef=x,e.normalize=j,e.normalizeFieldDef=M,e.normalizeBin=k;var B={compatible:!0};e.channelCompatibility=S,e.isNumberFieldDef=E,e.isTimeFieldDef=A},function(t,e,n){"use strict";n.d(e,"e",function(){return r}),n.d(e,"f",function(){return i}),n.d(e,"h",function(){return a}),n.d(e,"g",function(){return o}),n.d(e,"l",function(){return s}),n.d(e,"d",function(){return u}),n.d(e,"m",function(){return c}),n.d(e,"j",function(){return l}),n.d(e,"k",function(){return f}),n.d(e,"b",function(){return h}),n.d(e,"a",function(){return d}),n.d(e,"i",function(){return p}),n.d(e,"c",function(){return v}),n.d(e,"o",function(){return g}),n.d(e,"n",function(){return b});var r=1,i=2,a=4,o=5,s=484813681109536e-20,u=Math.PI/2,c=.16666666666666666,l=.04722222222222222,f=.022156084656084655,h=1e-10,d=.017453292519943295,p=57.29577951308232,v=Math.PI/4,g=2*Math.PI,b=3.14159265359},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(251);n.d(e,"bisect",function(){return r.c}),n.d(e,"bisectRight",function(){return r.b}),n.d(e,"bisectLeft",function(){return r.a});var i=n(62);n.d(e,"ascending",function(){return i.a});var a=n(252);n.d(e,"bisector",function(){return a.a});var o=n(484);n.d(e,"cross",function(){return o.a});var s=n(485);n.d(e,"descending",function(){return s.a});var u=n(254);n.d(e,"deviation",function(){return u.a});var c=n(256);n.d(e,"extent",function(){return c.a});var l=n(486);n.d(e,"histogram",function(){return l.a});var f=n(489);n.d(e,"thresholdFreedmanDiaconis",function(){return f.a});var h=n(490);n.d(e,"thresholdScott",function(){return h.a});var d=n(260);n.d(e,"thresholdSturges",function(){return d.a});var p=n(491);n.d(e,"max",function(){return p.a});var v=n(492);n.d(e,"mean",function(){return v.a});var g=n(493);n.d(e,"median",function(){return g.a});var b=n(494);n.d(e,"merge",function(){return b.a});var m=n(261);n.d(e,"min",function(){return m.a});var y=n(253);n.d(e,"pairs",function(){return y.a});var _=n(495);n.d(e,"permute",function(){return _.a});var O=n(167);n.d(e,"quantile",function(){return O.a});var w=n(258);n.d(e,"range",function(){return w.a});var x=n(496);n.d(e,"scan",function(){return x.a});var j=n(497);n.d(e,"shuffle",function(){return j.a});var M=n(498);n.d(e,"sum",function(){return M.a});var k=n(259);n.d(e,"ticks",function(){return k.a}),n.d(e,"tickIncrement",function(){return k.b}),n.d(e,"tickStep",function(){return k.c});var S=n(262);n.d(e,"transpose",function(){return S.a});var E=n(255);n.d(e,"variance",function(){return E.a});var A=n(499);n.d(e,"zip",function(){return A.a})},function(t,e,n){"use strict";var r=n(39);e.a=function(t){return Object(r.interpolateRgbBasis)(t[t.length-1])}},function(t,e,n){"use strict";function r(t,e){var n=y[t],r=y[e];return n===r||"ordinal-position"===n&&"time"===r||"ordinal-position"===r&&"time"===n}function i(t){return _[t]}function a(t){return t in x}function o(t){return t in j}function s(t){return t in w}function u(t){return t in O}function c(t){return t&&!!t.name}function l(t){return t&&t.selection}function f(t,e){switch(e){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":return m.contains(["sequential","ordinal","bin-ordinal","quantile","quantize"],t);case"interpolate":return m.contains(["linear","bin-linear","pow","log","sqrt","utc","time"],t);case"round":return u(t)||"band"===t||"point"===t;case"padding":return u(t)||m.contains(["point","band"],t);case"paddingOuter":case"rangeStep":return m.contains(["point","band"],t);case"paddingInner":return"band"===t;case"clamp":return u(t)||"sequential"===t;case"nice":return u(t)||"sequential"===t||"quantize"===t;case"exponent":return"pow"===t;case"base":return"log"===t;case"zero":return s(t)&&!m.contains(["log","time","utc","bin-linear","threshold","quantile"],t)}throw new Error("Invalid scale property "+e+".")}function h(t,e){switch(e){case"interpolate":case"scheme":if(!g.isColorChannel(t))return b.message.cannotUseScalePropertyWithNonColor(t);return;case"type":case"domain":case"range":case"base":case"exponent":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeStep":case"reverse":case"round":case"clamp":case"zero":return}throw new Error('Invalid scale property "'+e+'".')}function d(t,e){switch(t){case g.Channel.X:case g.Channel.Y:case g.Channel.SIZE:case g.Channel.OPACITY:return u(e)||m.contains(["band","point"],e);case g.Channel.COLOR:case g.Channel.FILL:case g.Channel.STROKE:return"band"!==e;case g.Channel.SHAPE:return"ordinal"===e}return!1}var p=this&&this.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&(n[r[i]]=t[r[i]]);return n};Object.defineProperty(e,"__esModule",{value:!0});var v=n(0),g=n(6),b=n(3),m=n(2);!function(t){t.LINEAR="linear",t.BIN_LINEAR="bin-linear",t.LOG="log",t.POW="pow",t.SQRT="sqrt",t.TIME="time",t.UTC="utc",t.SEQUENTIAL="sequential",t.QUANTILE="quantile",t.QUANTIZE="quantize",t.THRESHOLD="threshold",t.ORDINAL="ordinal",t.BIN_ORDINAL="bin-ordinal",t.POINT="point",t.BAND="band"}(e.ScaleType||(e.ScaleType={}));var y={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric","bin-linear":"bin-linear",time:"time",utc:"time",sequential:"sequential",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position"};e.SCALE_TYPES=m.keys(y),e.scaleCompatible=r;var _={linear:0,log:1,pow:1,sqrt:1,time:0,utc:0,point:10,band:11,"bin-linear":0,sequential:0,ordinal:0,"bin-ordinal":0};e.scaleTypePrecedence=i,e.CONTINUOUS_TO_CONTINUOUS_SCALES=["linear","bin-linear","log","pow","sqrt","time","utc"];var O=v.toSet(e.CONTINUOUS_TO_CONTINUOUS_SCALES);e.CONTINUOUS_DOMAIN_SCALES=e.CONTINUOUS_TO_CONTINUOUS_SCALES.concat(["sequential"]);var w=v.toSet(e.CONTINUOUS_DOMAIN_SCALES);e.DISCRETE_DOMAIN_SCALES=["ordinal","bin-ordinal","point","band"];var x=v.toSet(e.DISCRETE_DOMAIN_SCALES),j=v.toSet(["bin-linear","bin-ordinal"]);e.TIME_SCALE_TYPES=["time","utc"],e.hasDiscreteDomain=a,e.isBinScale=o,e.hasContinuousDomain=s,e.isContinuousToContinuous=u,e.defaultScaleConfig={textXRangeStep:90,rangeStep:21,pointPadding:.5,bandPaddingInner:.1,facetSpacing:16,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4},e.isExtendedScheme=c,e.isSelectionDomain=l;var M={type:1,domain:1,range:1,rangeStep:1,scheme:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1};e.SCALE_PROPERTIES=m.flagKeys(M);var k=p(M,["type","domain","range","rangeStep","scheme"]);e.NON_TYPE_DOMAIN_RANGE_VEGA_SCALE_PROPERTIES=m.flagKeys(k),e.scaleTypeSupportProperty=f,e.channelScalePropertyIncompatability=h,e.channelSupportScaleType=d},function(t,e,n){"use strict";(function(t){function r(){return a.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function i(t,e){if(r()<e)throw new RangeError("Invalid typed array length");return a.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e),t.__proto__=a.prototype):(null===t&&(t=new a(e)),t.length=e),t}function a(t,e,n){if(!(a.TYPED_ARRAY_SUPPORT||this instanceof a))return new a(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return c(this,t)}return o(this,t,e,n)}function o(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?h(t,e,n,r):"string"==typeof e?l(t,e,n):d(t,e)}function s(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function u(t,e,n,r){return s(e),e<=0?i(t,e):void 0!==n?"string"==typeof r?i(t,e).fill(n,r):i(t,e).fill(n):i(t,e)}function c(t,e){if(s(e),t=i(t,e<0?0:0|p(e)),!a.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function l(t,e,n){if("string"==typeof n&&""!==n||(n="utf8"),!a.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|g(e,n);t=i(t,r);var o=t.write(e,n);return o!==r&&(t=t.slice(0,o)),t}function f(t,e){var n=e.length<0?0:0|p(e.length);t=i(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function h(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r),a.TYPED_ARRAY_SUPPORT?(t=e,t.__proto__=a.prototype):t=f(t,e),t}function d(t,e){if(a.isBuffer(e)){var n=0|p(e.length);return t=i(t,n),0===t.length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||Z(e.length)?i(t,0):f(t,e);if("Buffer"===e.type&&J(e.data))return f(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function p(t){if(t>=r())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r().toString(16)+" bytes");return 0|t}function v(t){return+t!=t&&(t=0),a.alloc(+t)}function g(t,e){if(a.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return H(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return V(t).length;default:if(r)return H(t).length;e=(""+e).toLowerCase(),r=!0}}function b(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,e>>>=0,n<=e)return"";for(t||(t="utf8");;)switch(t){case"hex":return N(this,e,n);case"utf8":case"utf-8":return E(this,e,n);case"ascii":return P(this,e,n);case"latin1":case"binary":return T(this,e,n);case"base64":return S(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function m(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function y(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=a.from(e,r)),a.isBuffer(e))return 0===e.length?-1:_(t,e,n,r,i);if("number"==typeof e)return e&=255,a.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):_(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function _(t,e,n,r,i){function a(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}var o=1,s=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;o=2,s/=2,u/=2,n/=2}var c;if(i){var l=-1;for(c=n;c<s;c++)if(a(t,c)===a(e,-1===l?0:c-l)){if(-1===l&&(l=c),c-l+1===u)return l*o}else-1!==l&&(c-=c-l),l=-1}else for(n+u>s&&(n=s-u),c=n;c>=0;c--){for(var f=!0,h=0;h<u;h++)if(a(t,c+h)!==a(e,h)){f=!1;break}if(f)return c}return-1}function O(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var a=e.length;if(a%2!=0)throw new TypeError("Invalid hex string");r>a/2&&(r=a/2);for(var o=0;o<r;++o){var s=parseInt(e.substr(2*o,2),16);if(isNaN(s))return o;t[n+o]=s}return o}function w(t,e,n,r){return X(H(e,t.length-n),t,n,r)}function x(t,e,n,r){return X(W(e),t,n,r)}function j(t,e,n,r){return x(t,e,n,r)}function M(t,e,n,r){return X(V(e),t,n,r)}function k(t,e,n,r){return X(Y(e,t.length-n),t,n,r)}function S(t,e,n){return 0===e&&n===t.length?$.fromByteArray(t):$.fromByteArray(t.slice(e,n))}function E(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var a=t[i],o=null,s=a>239?4:a>223?3:a>191?2:1;if(i+s<=n){var u,c,l,f;switch(s){case 1:a<128&&(o=a);break;case 2:128==(192&(u=t[i+1]))&&(f=(31&a)<<6|63&u)>127&&(o=f);break;case 3:u=t[i+1],c=t[i+2],128==(192&u)&&128==(192&c)&&(f=(15&a)<<12|(63&u)<<6|63&c)>2047&&(f<55296||f>57343)&&(o=f);break;case 4:u=t[i+1],c=t[i+2],l=t[i+3],128==(192&u)&&128==(192&c)&&128==(192&l)&&(f=(15&a)<<18|(63&u)<<12|(63&c)<<6|63&l)>65535&&f<1114112&&(o=f)}}null===o?(o=65533,s=1):o>65535&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|1023&o),r.push(o),i+=s}return A(r)}function A(t){var e=t.length;if(e<=Q)return String.fromCharCode.apply(String,t);for(var n="",r=0;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=Q));return n}function P(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function T(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function N(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",a=e;a<n;++a)i+=G(t[a]);return i}function C(t,e,n){for(var r=t.slice(e,n),i="",a=0;a<r.length;a+=2)i+=String.fromCharCode(r[a]+256*r[a+1]);return i}function R(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function D(t,e,n,r,i,o){if(!a.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function L(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,a=Math.min(t.length-n,2);i<a;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function I(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,a=Math.min(t.length-n,4);i<a;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function z(t,e,n,r,i,a){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function F(t,e,n,r,i){return i||z(t,e,n,4,3.4028234663852886e38,-3.4028234663852886e38),K.write(t,e,n,r,23,4),n+4}function U(t,e,n,r,i){return i||z(t,e,n,8,1.7976931348623157e308,-1.7976931348623157e308),K.write(t,e,n,r,52,8),n+8}function B(t){if(t=q(t).replace(tt,""),t.length<2)return"";for(;t.length%4!=0;)t+="=";return t}function q(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function G(t){return t<16?"0"+t.toString(16):t.toString(16)}function H(t,e){e=e||1/0;for(var n,r=t.length,i=null,a=[],o=0;o<r;++o){if((n=t.charCodeAt(o))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&a.push(239,191,189);continue}if(o+1===r){(e-=3)>-1&&a.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&a.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&a.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;a.push(n)}else if(n<2048){if((e-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function W(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}function Y(t,e){for(var n,r,i,a=[],o=0;o<t.length&&!((e-=2)<0);++o)n=t.charCodeAt(o),r=n>>8,i=n%256,a.push(i),a.push(r);return a}function V(t){return $.toByteArray(B(t))}function X(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}function Z(t){return t!==t}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
	var $=n(587),K=n(588),J=n(289);e.Buffer=a,e.SlowBuffer=v,e.INSPECT_MAX_BYTES=50,a.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=r(),a.poolSize=8192,a._augment=function(t){return t.__proto__=a.prototype,t},a.from=function(t,e,n){return o(null,t,e,n)},a.TYPED_ARRAY_SUPPORT&&(a.prototype.__proto__=Uint8Array.prototype,a.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&a[Symbol.species]===a&&Object.defineProperty(a,Symbol.species,{value:null,configurable:!0})),a.alloc=function(t,e,n){return u(null,t,e,n)},a.allocUnsafe=function(t){return c(null,t)},a.allocUnsafeSlow=function(t){return c(null,t)},a.isBuffer=function(t){return!(null==t||!t._isBuffer)},a.compare=function(t,e){if(!a.isBuffer(t)||!a.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},a.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(t,e){if(!J(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return a.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=a.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var o=t[n];if(!a.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},a.byteLength=g,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)m(this,e,e+1);return this},a.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)m(this,e,e+3),m(this,e+1,e+2);return this},a.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)m(this,e,e+7),m(this,e+1,e+6),m(this,e+2,e+5),m(this,e+3,e+4);return this},a.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?E(this,0,t):b.apply(this,arguments)},a.prototype.equals=function(t){if(!a.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===a.compare(this,t)},a.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},a.prototype.compare=function(t,e,n,r,i){if(!a.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,r>>>=0,i>>>=0,this===t)return 0;for(var o=i-r,s=n-e,u=Math.min(o,s),c=this.slice(r,i),l=t.slice(e,n),f=0;f<u;++f)if(c[f]!==l[f]){o=c[f],s=l[f];break}return o<s?-1:s<o?1:0},a.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},a.prototype.indexOf=function(t,e,n){return y(this,t,e,n,!0)},a.prototype.lastIndexOf=function(t,e,n){return y(this,t,e,n,!1)},a.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return O(this,t,e,n);case"utf8":case"utf-8":return w(this,t,e,n);case"ascii":return x(this,t,e,n);case"latin1":case"binary":return j(this,t,e,n);case"base64":return M(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,t,e,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Q=4096;a.prototype.slice=function(t,e){var n=this.length;t=~~t,e=void 0===e?n:~~e,t<0?(t+=n)<0&&(t=0):t>n&&(t=n),e<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t);var r;if(a.TYPED_ARRAY_SUPPORT)r=this.subarray(t,e),r.__proto__=a.prototype;else{var i=e-t;r=new a(i,void 0);for(var o=0;o<i;++o)r[o]=this[o+t]}return r},a.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||R(t,e,this.length);for(var r=this[t],i=1,a=0;++a<e&&(i*=256);)r+=this[t+a]*i;return r},a.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||R(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},a.prototype.readUInt8=function(t,e){return e||R(t,1,this.length),this[t]},a.prototype.readUInt16LE=function(t,e){return e||R(t,2,this.length),this[t]|this[t+1]<<8},a.prototype.readUInt16BE=function(t,e){return e||R(t,2,this.length),this[t]<<8|this[t+1]},a.prototype.readUInt32LE=function(t,e){return e||R(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},a.prototype.readUInt32BE=function(t,e){return e||R(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},a.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||R(t,e,this.length);for(var r=this[t],i=1,a=0;++a<e&&(i*=256);)r+=this[t+a]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*e)),r},a.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||R(t,e,this.length);for(var r=e,i=1,a=this[t+--r];r>0&&(i*=256);)a+=this[t+--r]*i;return i*=128,a>=i&&(a-=Math.pow(2,8*e)),a},a.prototype.readInt8=function(t,e){return e||R(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},a.prototype.readInt16LE=function(t,e){e||R(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt16BE=function(t,e){e||R(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt32LE=function(t,e){return e||R(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},a.prototype.readInt32BE=function(t,e){return e||R(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},a.prototype.readFloatLE=function(t,e){return e||R(t,4,this.length),K.read(this,t,!0,23,4)},a.prototype.readFloatBE=function(t,e){return e||R(t,4,this.length),K.read(this,t,!1,23,4)},a.prototype.readDoubleLE=function(t,e){return e||R(t,8,this.length),K.read(this,t,!0,52,8)},a.prototype.readDoubleBE=function(t,e){return e||R(t,8,this.length),K.read(this,t,!1,52,8)},a.prototype.writeUIntLE=function(t,e,n,r){t=+t,e|=0,n|=0,r||D(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,a=0;for(this[e]=255&t;++a<n&&(i*=256);)this[e+a]=t/i&255;return e+n},a.prototype.writeUIntBE=function(t,e,n,r){t=+t,e|=0,n|=0,r||D(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,a=1;for(this[e+i]=255&t;--i>=0&&(a*=256);)this[e+i]=t/a&255;return e+n},a.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,1,255,0),a.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},a.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):L(this,t,e,!0),e+2},a.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):L(this,t,e,!1),e+2},a.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):I(this,t,e,!0),e+4},a.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):I(this,t,e,!1),e+4},a.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);D(this,t,e,n,i-1,-i)}var a=0,o=1,s=0;for(this[e]=255&t;++a<n&&(o*=256);)t<0&&0===s&&0!==this[e+a-1]&&(s=1),this[e+a]=(t/o>>0)-s&255;return e+n},a.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);D(this,t,e,n,i-1,-i)}var a=n-1,o=1,s=0;for(this[e+a]=255&t;--a>=0&&(o*=256);)t<0&&0===s&&0!==this[e+a+1]&&(s=1),this[e+a]=(t/o>>0)-s&255;return e+n},a.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,1,127,-128),a.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},a.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):L(this,t,e,!0),e+2},a.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):L(this,t,e,!1),e+2},a.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,4,2147483647,-2147483648),a.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):I(this,t,e,!0),e+4},a.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),a.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):I(this,t,e,!1),e+4},a.prototype.writeFloatLE=function(t,e,n){return F(this,t,e,!0,n)},a.prototype.writeFloatBE=function(t,e,n){return F(this,t,e,!1,n)},a.prototype.writeDoubleLE=function(t,e,n){return U(this,t,e,!0,n)},a.prototype.writeDoubleBE=function(t,e,n){return U(this,t,e,!1,n)},a.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;i>=0;--i)t[i+e]=this[i+n];else if(o<1e3||!a.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},a.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!a.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0);var o;if("number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var s=a.isBuffer(t)?t:H(new a(t,r).toString()),u=s.length;for(o=0;o<n-e;++o)this[o+e]=s[o%u]}return this};var tt=/[^+\/0-9A-Za-z-_]/g}).call(e,n(41))},function(t,e,n){"use strict";var r=n(8),i=n(102);e.a=function(t){return Math.abs(t)<=r.n?t:t-Object(i.a)(t)*r.o}},function(t,e,n){"use strict";n.d(e,"n",function(){return r}),n.d(e,"g",function(){return i}),n.d(e,"o",function(){return a}),n.d(e,"d",function(){return o}),n.d(e,"a",function(){return s}),n.d(e,"b",function(){return u}),n.d(e,"c",function(){return c}),n.d(e,"e",function(){return l}),n.d(e,"f",function(){return f}),n.d(e,"k",function(){return h}),n.d(e,"h",function(){return d}),n.d(e,"i",function(){return p}),n.d(e,"j",function(){return v}),n.d(e,"l",function(){return g}),n.d(e,"m",function(){return b}),n.d(e,"p",function(){return m});var r="mark",i="frame",a="scope",o="axis",s="axis-domain",u="axis-grid",c="axis-label",l="axis-tick",f="axis-title",h="legend",d="legend-entry",p="legend-gradient",v="legend-label",g="legend-symbol",b="legend-title",m="title"},function(t,e,n){"use strict";function r(t){return t&&"unit"===t.type}function i(t){return t&&"facet"===t.type}function a(t){return t&&"repeat"===t.type}function o(t){return t&&"concat"===t.type}function s(t){return t&&"layer"===t.type}var u=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),c=this&&this.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t};Object.defineProperty(e,"__esModule",{value:!0});var l=n(0),f=n(6),h=n(28),d=n(7),p=n(3),v=n(11),g=n(67),b=n(416),m=n(145),y=n(2),_=n(29),O=n(418),w=n(419),x=n(147),j=n(420),M=n(421),k=n(1011),S=n(1012),E=n(1015),A=n(97),P=n(1017),T=n(31),N=function(){function t(){this.nameMap={}}return t.prototype.rename=function(t,e){this.nameMap[t]=e},t.prototype.has=function(t){return void 0!==this.nameMap[t]},t.prototype.get=function(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t},t}();e.NameMap=N,e.isUnitModel=r,e.isFacetModel=i,e.isRepeatModel=a,e.isConcatModel=o,e.isLayerModel=s;var C=function(){function t(t,e,n,r,i){var a=this;this.children=[],this.correctDataNames=function(t){return t.from&&t.from.data&&(t.from.data=a.lookupDataSource(t.from.data)),t.from&&t.from.facet&&t.from.facet.data&&(t.from.facet.data=a.lookupDataSource(t.from.facet.data)),t},this.parent=e,this.config=r,this.name=t.name||n,this.title=l.isString(t.title)?{text:t.title}:t.title,this.scaleNameMap=e?e.scaleNameMap:new N,this.projectionNameMap=e?e.projectionNameMap:new N,this.layoutSizeNameMap=e?e.layoutSizeNameMap:new N,this.data=t.data,this.description=t.description,this.transforms=m.normalizeTransform(t.transform||[]),this.component={data:{sources:e?e.component.data.sources:{},outputNodes:e?e.component.data.outputNodes:{},outputNodeRefCounts:e?e.component.data.outputNodeRefCounts:{},ancestorParse:e?c({},e.component.data.ancestorParse):{},isFaceted:g.isFacetSpec(t)||e&&e.component.data.isFaceted&&!t.data},layoutSize:new T.Split,layoutHeaders:{row:{},column:{}},mark:null,resolve:c({scale:{},axis:{},legend:{}},i||{}),selection:null,scales:null,projection:null,axes:{},legends:{}}}return Object.defineProperty(t.prototype,"width",{get:function(){return this.getSizeSignalRef("width")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.getSizeSignalRef("height")},enumerable:!0,configurable:!0}),t.prototype.initSize=function(t){var e=t.width,n=t.height;e&&this.component.layoutSize.set("width",e,!0),n&&this.component.layoutSize.set("height",n,!0)},t.prototype.parse=function(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSize(),this.parseSelection(),this.parseProjection(),this.parseData(),this.parseAxisAndHeader(),this.parseLegend(),this.parseMarkGroup()},t.prototype.parseScale=function(){P.parseScale(this)},t.prototype.parseProjection=function(){S.parseProjection(this)},t.prototype.renameTopLevelLayoutSize=function(){"width"!==this.getName("width")&&this.renameLayoutSize(this.getName("width"),"width"),"height"!==this.getName("height")&&this.renameLayoutSize(this.getName("height"),"height")},t.prototype.parseLegend=function(){M.parseLegend(this)},t.prototype.assembleGroupStyle=function(){if("unit"===this.type||"layer"===this.type)return"cell"},t.prototype.assembleLayoutSize=function(){if("unit"===this.type||"layer"===this.type)return{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height")}},t.prototype.assembleHeaderMarks=function(){for(var t=this.component.layoutHeaders,e=[],n=0,r=w.HEADER_CHANNELS;n<r.length;n++){var i=r[n];t[i].title&&e.push(w.getTitleGroup(this,i))}for(var a=0,o=w.HEADER_CHANNELS;a<o.length;a++){var i=o[a];e=e.concat(w.getHeaderGroups(this,i))}return e},t.prototype.assembleAxes=function(){return O.assembleAxes(this.component.axes,this.config)},t.prototype.assembleLegends=function(){return j.assembleLegends(this)},t.prototype.assembleProjections=function(){return k.assembleProjections(this)},t.prototype.assembleTitle=function(){var t=c({},b.extractTitleConfig(this.config.title).nonMark,this.title);if(t.text)return y.contains(["unit","layer"],this.type)||(t.anchor&&"start"!==t.anchor&&p.warn(p.message.cannotSetTitleAnchor(this.type)),t.anchor="start"),y.keys(t).length>0?t:void 0},t.prototype.assembleGroup=function(t){void 0===t&&(t=[]);var e={};t=t.concat(this.assembleSelectionSignals()),t.length>0&&(e.signals=t);var n=this.assembleLayout();n&&(e.layout=n),e.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());var r=!this.parent||i(this.parent)?E.assembleScales(this):[];r.length>0&&(e.scales=r);var a=this.assembleAxes();a.length>0&&(e.axes=a);var o=this.assembleLegends();return o.length>0&&(e.legends=o),e},t.prototype.hasDescendantWithFieldOnChannel=function(t){for(var e=0,n=this.children;e<n.length;e++){var i=n[e];if(r(i)){if(i.channelHasField(t))return!0}else if(i.hasDescendantWithFieldOnChannel(t))return!0}return!1},t.prototype.getName=function(t){return y.varName((this.name?this.name+"_":"")+t)},t.prototype.requestDataName=function(t){var e=this.getName(t),n=this.component.data.outputNodeRefCounts;return n[e]=(n[e]||0)+1,e},t.prototype.getSizeSignalRef=function(t){if(i(this.parent)){var e="width"===t?"x":"y",n=this.component.scales[e];if(n&&!n.merged){var r=n.get("type"),a=n.get("range");if(v.hasDiscreteDomain(r)&&_.isVgRangeStep(a)){var o=n.get("name"),s=A.assembleDomain(this,e),u=A.getFieldFromDomain(s);if(u){var c=d.vgField({aggregate:"distinct",field:u},{expr:"datum"});return{signal:x.sizeExpr(o,n,c)}}return p.warn("Unknown field for ${channel}.  Cannot calculate view size."),null}}}return{signal:this.layoutSizeNameMap.get(this.getName(t))}},t.prototype.lookupDataSource=function(t){var e=this.component.data.outputNodes[t];return e?e.getSource():t},t.prototype.getSizeName=function(t){return this.layoutSizeNameMap.get(t)},t.prototype.renameLayoutSize=function(t,e){this.layoutSizeNameMap.rename(t,e)},t.prototype.renameScale=function(t,e){this.scaleNameMap.rename(t,e)},t.prototype.renameProjection=function(t,e){this.projectionNameMap.rename(t,e)},t.prototype.scaleName=function(t,e){return e?this.getName(t):f.isChannel(t)&&f.isScaleChannel(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t))?this.scaleNameMap.get(this.getName(t)):void 0},t.prototype.projectionName=function(t){return t?this.getName("projection"):this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection"))?this.projectionNameMap.get(this.getName("projection")):void 0},t.prototype.getScaleComponent=function(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale().  Make sure you have called parseScale or use parseUnitModelWithScale().");var e=this.component.scales[t];return e&&!e.merged?e:this.parent?this.parent.getScaleComponent(t):void 0},t.prototype.getSelectionComponent=function(t,e){var n=this.component.selection[t];if(!n&&this.parent&&(n=this.parent.getSelectionComponent(t,e)),!n)throw new Error(p.message.selectionNotFound(e));return n},t}();e.Model=C;var R=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return u(e,t),e.prototype.vgField=function(t,e){void 0===e&&(e={});var n=this.fieldDef(t);if(n)return d.vgField(n,e)},e.prototype.reduceFieldDef=function(t,e,n){return h.reduce(this.getMapping(),function(e,n,r){var i=d.getFieldDef(n);return i?t(e,i,r):e},e,n)},e.prototype.forEachFieldDef=function(t,e){h.forEach(this.getMapping(),function(e,n){var r=d.getFieldDef(e);r&&t(r,n)},e)},e}(C);e.ModelWithField=R},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){this.debugName=e,this._children=[],this._parent=null,t&&(this.parent=t)}return t.prototype.clone=function(){throw new Error("Cannot clone node")},t.prototype.producedFields=function(){return{}},t.prototype.dependentFields=function(){return{}},Object.defineProperty(t.prototype,"parent",{get:function(){return this._parent},set:function(t){this._parent=t,t.addChild(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"children",{get:function(){return this._children},enumerable:!0,configurable:!0}),t.prototype.numChildren=function(){return this._children.length},t.prototype.addChild=function(t){this._children.push(t)},t.prototype.removeChild=function(t){this._children.splice(this._children.indexOf(t),1)},t.prototype.remove=function(){for(var t=0,e=this._children;t<e.length;t++)e[t].parent=this._parent;this._parent.removeChild(this)},t.prototype.insertAsParentOf=function(t){var e=t.parent;e.removeChild(this),this.parent=e,t.parent=this},t.prototype.swapWithParent=function(){for(var t=this._parent,e=t.parent,n=0,r=this._children;n<r.length;n++)r[n].parent=t;this._children=[],t.removeChild(this),t.parent.removeChild(t),this.parent=e,t.parent=this},t}();e.DataFlowNode=i;var a=function(t){function e(e,n,r,i){var a=t.call(this,e,n)||this;return a.type=r,a.refCounts=i,a._source=a._name=n,!a.refCounts||a._name in a.refCounts||(a.refCounts[a._name]=0),a}return r(e,t),e.prototype.clone=function(){var t=new this.constructor;return t.debugName="clone_"+this.debugName,t._source=this._source,t._name="clone_"+this._name,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t},e.prototype.getSource=function(){return this.refCounts[this._name]++,this._source},e.prototype.isRequired=function(){return!!this.refCounts[this._name]},e.prototype.setSource=function(t){this._source=t},e}(i);e.OutputNode=a},function(t,e,n){"use strict";function r(t){return Object(f.isObject)(t)?t:{value:t}}function i(t,e,n){return null!=n?(t[e]=Object(f.isObject)(n)&&!Object(f.isArray)(n)?n:{value:n},1):0}function a(t,e,n){for(var r in e)n&&n.hasOwnProperty(r)||(t[r]=Object(f.extend)(t[r]||{},e[r]));return t}function o(t,e,n,r,i,a){var o,u;a=a||{},a.encoders={$encode:o={}},t=s(t,e,n,r,i.config);for(u in t)o[u]=Object(c.a)(t[u],e,a,i);return a}function s(t,e,n,r,i){var a,o,s={};"legend"!=n&&0!==String(n).indexOf("axis")||(n=null),o=n===l.g?i.group:n===l.n?Object(f.extend)({},i.mark,i[e]):null;for(a in o)u(a,t)||("fill"===a||"stroke"===a)&&(u("fill",t)||u("stroke",t))||(s[a]={value:o[a]});return Object(f.array)(r).forEach(function(e){var n=i.style&&i.style[e];for(var r in n)u(r,t)||(s[r]={value:n[r]})}),t=Object(f.extend)({},t),t.enter=Object(f.extend)(s,t.enter),t}function u(t,e){return e&&(e.enter&&e.enter[t]||e.update&&e.update[t])}e.b=r,e.a=i,e.d=a,e.c=o,e.e=u;var c=n(962),l=n(14),f=n(0)},function(t,e,n){"use strict";function r(t,e){var n={},r=t.config.selection;for(var i in e)!function(i){if(!e.hasOwnProperty(i))return"continue";var a=e[i],o=r[a.type];for(var s in o)"encodings"===s&&a.fields||"fields"===s&&a.encodings||("mark"===s&&(a[s]=y({},o[s],a[s])),void 0!==a[s]&&!0!==a[s]||(a[s]=o[s]||a[s]));i=M.varName(i);var u=n[i]=y({},a,{name:i,events:O.isString(a.on)?_.selector(a.on,"scope"):a.on});P.forEachTransform(u,function(e){e.parse&&e.parse(t,a,u)})}(i);return n}function i(t,n){h(t,function(r,i){var a=r.name,o=i.modifyExpr(t,r);n.push.apply(n,i.signals(t,r)),P.forEachTransform(r,function(e){e.signals&&(n=e.signals(t,r,n)),e.modifyExpr&&(o=e.modifyExpr(t,r,o))}),n.push({name:a+e.MODIFY,on:[{events:{signal:a+e.TUPLE},update:"modify("+O.stringValue(r.name+e.STORE)+", "+o+")"}]})});var r=p(t);if(n.length&&r){var i=O.stringValue(r.getName("cell"));n.unshift({name:"facet",value:{},on:[{events:_.selector("mousemove","scope"),update:"isTuple(facet) ? facet : group("+i+").datum"}]})}return n}function a(t,e){var n=!1;return h(t,function(r,i){i.topLevelSignals&&(e=i.topLevelSignals(t,r,e)),P.forEachTransform(r,function(n){n.topLevelSignals&&(e=n.topLevelSignals(t,r,e))}),n=!0}),n&&(e.filter(function(t){return"unit"===t.name}).length||e.unshift({name:"unit",value:{},on:[{events:"mousemove",update:"isTuple(group()) ? group() : unit"}]})),e}function o(t,n){return h(t,function(t){n.filter(function(n){return n.name===t.name+e.STORE}).length||n.push({name:t.name+e.STORE})}),n}function s(t,e){return h(t,function(n,r){e=r.marks?r.marks(t,n,e):e,P.forEachTransform(n,function(r){r.marks&&(e=r.marks(t,n,e))})}),e}function u(t,e){return t.children.forEach(function(t){k.isUnitModel(t)&&(e=s(t,e))}),e}function c(t,n,r){function i(n){var i=M.varName(n),o=t.getSelectionComponent(i,n),s=O.stringValue(i+e.STORE);if(o.timeUnit){var u=r||t.component.data.raw,c=o.timeUnit.clone();u.parent?c.insertAsParentOf(u):u.parent=c}return"none"!==o.empty&&a.push(s),d(o.type).predicate+"("+s+", datum"+("global"===o.resolve?")":", "+O.stringValue(o.resolve)+")")}var a=[],o=M.logicalExpr(n,i);return(a.length?"!("+a.map(function(t){return"length(data("+t+"))"}).join(" || ")+") || ":"")+"("+o+")"}function l(t){return t.signal.indexOf(e.SELECTION_DOMAIN)>=0}function f(t,n){var r=JSON.parse(n.signal.replace(e.SELECTION_DOMAIN,"")),i=M.varName(r.selection),a=t.component.selection&&t.component.selection[i];return a?(x.warn('Use "bind": "scales" to setup a binding for scales and selections within the same view.'),{signal:"null"}):(a=t.getSelectionComponent(i,r.selection),r.encoding||r.field||(r.field=a.project[0].field,a.project.length>1&&x.warn('A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": '+O.stringValue(r.field)+".")),{signal:d(a.type).scaleDomain+"("+O.stringValue(i+e.STORE)+", "+O.stringValue(r.encoding||null)+", "+O.stringValue(r.field||null)+("global"===a.resolve?")":", "+O.stringValue(a.resolve)+")")})}function h(t,e){var n=t.component.selection;for(var r in n)if(n.hasOwnProperty(r)){var i=n[r];e(i,d(i.type))}}function d(t){switch(t){case"single":return A.default;case"multi":return E.default;case"interval":return S.default}return null}function p(t){for(var e=t.parent;e&&!k.isFacetModel(e);)e=e.parent;return e}function v(t){var e=O.stringValue(t.name),n=p(t);return n&&(e+=(n.facet.row?" + '_' + facet"+M.accessPath(n.vgField("row")):"")+(n.facet.column?" + '_' + facet"+M.accessPath(n.vgField("column")):"")),e}function g(t){var e=!1;return h(t,function(t){e=e||t.project.some(function(t){return t.field===j.SELECTION_ID})}),e}function b(t,e,n){return M.varName(t.name+"_"+("visual"===n?e:t.fields[e]))}function m(t){var e=null,n=null,r=null,i=null;return t.project.forEach(function(t,a){t.channel===w.X?(e=t,n=a):t.channel===w.Y&&(r=t,i=a)}),{x:e,xi:n,y:r,yi:i}}var y=this&&this.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t};Object.defineProperty(e,"__esModule",{value:!0});var _=n(138),O=n(0),w=n(6),x=n(3),j=n(226),M=n(2),k=n(15),S=n(232),E=n(425),A=n(1020),P=n(1021);e.STORE="_store",e.TUPLE="_tuple",e.MODIFY="_modify",e.SELECTION_DOMAIN="_selection_domain_",e.parseUnitSelection=r,e.assembleUnitSelectionSignals=i,e.assembleTopLevelSignals=a,e.assembleUnitSelectionData=o,e.assembleUnitSelectionMarks=s,e.assembleLayerSelectionMarks=u,e.selectionPredicate=c,e.isRawSelectionDomain=l,e.selectionScaleDomain=f,e.unitName=v,e.requiresSelectionId=g,e.channelSignalName=b,e.positionalProjections=m},function(t,e,n){"use strict";function r(t,e,n,o){function s(e){return t(e=new Date(+e)),e}return s.floor=s,s.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},s.round=function(t){var e=s(t),n=s.ceil(t);return t-e<n-t?e:n},s.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},s.range=function(n,r,i){var a,o=[];if(n=s.ceil(n),i=null==i?1:Math.floor(i),!(n<r&&i>0))return o;do{o.push(a=new Date(+n)),e(n,i),t(n)}while(a<n&&n<r);return o},s.filter=function(n){return r(function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)},function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;--r>=0;)for(;e(t,1),!n(t););})},n&&(s.count=function(e,r){return i.setTime(+e),a.setTime(+r),t(i),t(a),Math.floor(n(i,a))},s.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?s.filter(o?function(e){return o(e)%t==0}:function(e){return s.count(0,e)%t==0}):s:null}),s}e.a=r;var i=new Date,a=new Date},function(t,e,n){"use strict";var r=n(42);n.d(e,"a",function(){return r.a});var i=n(660);n.d(e,"d",function(){return i.a});var a=n(308);n.d(e,"e",function(){return a.a});var o=n(310);n.d(e,"k",function(){return o.a});var s=n(309);n.d(e,"g",function(){return s.a});var u=n(663);n.d(e,"o",function(){return u.a});var c=n(196);n.d(e,"f",function(){return c.a});var l=n(124);n.d(e,"j",function(){return l.a});var f=n(336);n.d(e,"b",function(){return f.a});var h=n(338);n.d(e,"c",function(){return h.a});var d=n(339);n.d(e,"l",function(){return d.a});var p=n(340);n.d(e,"m",function(){return p.a});var v=n(343);n.d(e,"n",function(){return v.a});var g=n(705);n.d(e,"i",function(){return g.a}),n.d(e,"J",function(){return g.b});var b=n(49);n.d(e,"h",function(){return b.a});var m=n(706);n.d(e,"p",function(){return m.a});var y=n(81);n.d(e,"q",function(){return y.a});var _=n(52);n.d(e,"t",function(){return _.a});var O=n(315);n.d(e,"r",function(){return O.a});var w=n(314);n.d(e,"s",function(){return w.a});var x=n(316);n.d(e,"B",function(){return x.a});var j=n(332);n.d(e,"G",function(){return j.a});var M=n(333);n.d(e,"E",function(){return M.a});var k=n(334);n.d(e,"H",function(){return k.a});var S=n(118);n.d(e,"D",function(){return S.a});var E=n(191);n.d(e,"F",function(){return E.a});var A=n(337);n.d(e,"I",function(){return A.a});var P=n(54);n.d(e,"x",function(){return P.d}),n.d(e,"y",function(){return P.e}),n.d(e,"v",function(){return P.b}),n.d(e,"w",function(){return P.c});var T=n(197);n.d(e,"A",function(){return T.b}),n.d(e,"u",function(){return T.a});var N=n(123);n.d(e,"z",function(){return N.a}),n.d(e,"R",function(){return N.c});var C=n(122);n.d(e,"K",function(){return C.b});var R=n(707);n.d(e,"L",function(){return R.b}),n.d(e,"C",function(){return R.a});var D=n(313);n.d(e,"O",function(){return D.b}),n.d(e,"M",function(){return D.a});var L=n(38);n.d(e,"Q",function(){return L.c}),n.d(e,"P",function(){return L.b}),n.d(e,"N",function(){return L.a})},function(t,e,n){"use strict";function r(t,e,n,r){this.id=-1,this.type=t,this.value=e,this.params=n,r&&(this.parent=r)}function i(t,e,n,i){return new r(t,e,n,i)}function a(t,e){return i("operator",t,e)}function o(t){var e={$ref:t.id};return t.id<0&&(t.refs=t.refs||[]).push(e),e}function s(t,e){return e?{$field:t,$name:e}:{$field:t}}function u(t,e){return{$compare:t,$order:e}}function c(t,e){var n={$key:t};return e&&(n.$flat=!0),n}function l(t){return Object(p.isObject)(t)?(t.order===m?"-":"+")+f(t.op,t.field):""}function f(t,e){return(t&&t.signal?"$"+t.signal:t||"")+(t&&e?"_":"")+(e&&e.signal?"$"+e.signal:e||"")}function h(t){return t&&t.signal}function d(t,e){return null!=t?t:e}e.b=r,e.e=i,e.j=a,e.k=o,n.d(e,"m",function(){return v}),e.f=s,n.d(e,"h",function(){return g}),e.d=u,e.i=c,n.d(e,"a",function(){return b}),e.l=l,e.c=f,e.g=h,e.n=d;var p=n(0),v={$tupleid:1,toString:function(){return":_tupleid_:"}},g=s("key"),b="ascending",m="descending"},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return i}),n.d(e,"c",function(){return a}),n.d(e,"d",function(){return o}),n.d(e,"e",function(){return s});var r="group",i="rect",a="rule",o="symbol",s="text"},function(t,e,n){"use strict";function r(t){return!!c[t]}function i(t){return t.type}function a(t){return(i(t)?t.type:t)in l}Object.defineProperty(e,"__esModule",{value:!0});var o,s=n(0),u=n(2);!function(t){t.AREA="area",t.BAR="bar",t.LINE="line",t.POINT="point",t.RECT="rect",t.RULE="rule",t.TEXT="text",t.TICK="tick",t.CIRCLE="circle",t.SQUARE="square",t.GEOSHAPE="geoshape"}(o=e.Mark||(e.Mark={})),e.AREA=o.AREA,e.BAR=o.BAR,e.LINE=o.LINE,e.POINT=o.POINT,e.TEXT=o.TEXT,e.TICK=o.TICK,e.RECT=o.RECT,e.RULE=o.RULE,e.GEOSHAPE=o.GEOSHAPE,e.CIRCLE=o.CIRCLE,e.SQUARE=o.SQUARE;var c={area:1,bar:1,line:1,point:1,text:1,tick:1,rect:1,geoshape:1,rule:1,circle:1,square:1};e.isMark=r,e.PRIMITIVE_MARKS=u.flagKeys(c),e.isMarkDef=i;var l=s.toSet(e.PRIMITIVE_MARKS);e.isPrimitiveMark=a,e.STROKE_CONFIG=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity"],e.FILL_CONFIG=["fill","fillOpacity"],e.FILL_STROKE_CONFIG=[].concat(e.STROKE_CONFIG,e.FILL_CONFIG),e.VL_ONLY_MARK_CONFIG_PROPERTIES=["filled","color"],e.VL_ONLY_MARK_SPECIFIC_CONFIG_PROPERTY_INDEX={bar:["binSpacing","continuousBandSize","discreteBandSize"],text:["shortTimeLabels"],tick:["bandSize","thickness"]},e.defaultMarkConfig={color:"#4c78a8"},e.defaultBarConfig={binSpacing:1,continuousBandSize:5},e.defaultTickConfig={thickness:1}},function(t,e,n){"use strict";function r(t){return!!o[t]}function i(t){if(t)switch(t=t.toLowerCase()){case"q":case e.QUANTITATIVE:return"quantitative";case"t":case e.TEMPORAL:return"temporal";case"o":case e.ORDINAL:return"ordinal";case"n":case e.NOMINAL:return"nominal";case a.LATITUDE:return"latitude";case a.LONGITUDE:return"longitude";case e.GEOJSON:return"geojson"}}Object.defineProperty(e,"__esModule",{value:!0});var a;!function(t){t.QUANTITATIVE="quantitative",t.ORDINAL="ordinal",t.TEMPORAL="temporal",t.NOMINAL="nominal",t.LATITUDE="latitude",t.LONGITUDE="longitude",t.GEOJSON="geojson"}(a=e.Type||(e.Type={}));var o={quantitative:1,ordinal:1,temporal:1,nominal:1,latitude:1,longitude:1,geojson:1};e.isType=r,e.QUANTITATIVE=a.QUANTITATIVE,e.ORDINAL=a.ORDINAL,e.TEMPORAL=a.TEMPORAL,e.NOMINAL=a.NOMINAL,e.GEOJSON=a.GEOJSON,e.getFullName=i},function(t,e,n){"use strict";function r(t,e,n){for(var r=0,i=n;r<i.length;r++){var a=i[r],o=e[a];void 0!==o&&(t[a]={value:o})}return t}function i(t,e,n){for(var r=0,i=n;r<i.length;r++){var a=i[r],s=o(a,e.markDef,e.config);void 0!==s&&(t[a]={value:s})}return t}function a(t){return[].concat(t.type,t.style||[])}function o(t,e,n){var r=n.mark[t],i=n[e.type];void 0!==i[t]&&(r=i[t]);for(var o=a(e),s=0,u=o;s<u.length;s++){var c=u[s],l=n.style[c],f=t;l&&void 0!==l[f]&&(r=l[f])}return r}function s(t,e,n,r){var i=c(t,e,r);if(t.bin)return{signal:h(_.vgField(t,{expr:n}),_.vgField(t,{expr:n,binSuffix:"end"}),i,r)};if("quantitative"===t.type)return{signal:""+l(_.vgField(t,{expr:n}),i)};if(_.isTimeFieldDef(t)){var a=_.isScaleFieldDef(t)&&t.scale&&t.scale.type===O.ScaleType.UTC;return{signal:d(_.vgField(t,{expr:n}),t.timeUnit,e,r.text.shortTimeLabels,r.timeFormat,a)}}return{signal:"''+"+_.vgField(t,{expr:n})}}function u(t,e){return void 0!==t?t:e}function c(t,e,n){if(t.type===x.QUANTITATIVE)return e||n.numberFormat}function l(t,e){return"format("+t+', "'+(e||"")+'")'}function f(t,e,n){return l(t,e||n.numberFormat)}function h(t,e,n,r){return t+" === null || isNaN("+t+') ? "null" : '+f(t,n,r)+' + " - " + '+f(e,n,r)}function d(t,e,n,r,i,a){if(!e||n){var o=n||i;return a?"utcFormat("+t+", '"+o+"')":"timeFormat("+t+", '"+o+"')"}return w.formatExpression(e,t,r,a)}function p(t,e){return(m.isArray(t)?t:[t]).reduce(function(t,n){return t.field.push(_.vgField(n,e)),t.order.push(n.sort||"ascending"),t},{field:[],order:[]})}function v(t,e){var n=t.slice();return e.forEach(function(t){for(var e=0,r=n;e<r.length;e++){var i=r[e];if(j.stringify(i)===j.stringify(t))return}n.push(t)}),n}function g(t,e){if(m.isArray(t.value)&&m.isArray(e.value))return{explicit:t.explicit,value:v(t.value,e.value)};if(!m.isArray(t.value)&&!m.isArray(e.value))return{explicit:t.explicit,value:t.value===e.value?t.value:t.value+", "+e.value};throw new Error("It should never reach here")}function b(t,e){return t.bin?y.isScaleChannel(e)&&j.contains(["ordinal","nominal"],t.type):(console.warn("Only use this method with binned field defs"),!1)}Object.defineProperty(e,"__esModule",{value:!0});var m=n(0),y=n(6),_=n(7),O=n(11),w=n(95),x=n(24),j=n(2);e.applyConfig=r,e.applyMarkConfig=i,e.getStyles=a,e.getMarkConfig=o,e.formatSignalRef=s,e.getSpecifiedOrDefaultValue=u,e.numberFormat=c,e.numberFormatExpr=f,e.binFormatExpression=h,e.timeFormatExpression=d,e.sortParams=p,e.mergeTitleFieldDefs=v,e.titleMerger=g,e.binRequiresRange=b},function(t,e,n){"use strict";n.d(e,"n",function(){return r}),n.d(e,"g",function(){return i}),n.d(e,"k",function(){return a}),n.d(e,"a",function(){return o}),n.d(e,"e",function(){return s}),n.d(e,"f",function(){return u}),n.d(e,"i",function(){return c}),n.d(e,"j",function(){return l}),n.d(e,"l",function(){return f}),n.d(e,"o",function(){return h}),n.d(e,"p",function(){return d}),n.d(e,"c",function(){return p}),n.d(e,"d",function(){return v}),n.d(e,"b",function(){return g}),n.d(e,"h",function(){return b}),n.d(e,"m",function(){return m});var r="top",i="left",a="right",o="bottom",s="index",u="label",c="offset",l="perc",f="size",h="total",d="value",p="guide-label",v="guide-title",g="group-title",b=["shape","size","fill","stroke","strokeDash","opacity"],m={name:1,interactive:1}},function(t,e,n){"use strict";function r(t){return function(e,n,r){return Object(i.e)(t,n,e||void 0,r)}}n.d(e,"a",function(){return a}),n.d(e,"b",function(){return o}),n.d(e,"c",function(){return s}),n.d(e,"d",function(){return u}),n.d(e,"e",function(){return c}),n.d(e,"f",function(){return l}),n.d(e,"g",function(){return f}),n.d(e,"h",function(){return h}),n.d(e,"i",function(){return d}),n.d(e,"j",function(){return p}),n.d(e,"k",function(){return v}),n.d(e,"l",function(){return g}),n.d(e,"m",function(){return b}),n.d(e,"n",function(){return m}),n.d(e,"o",function(){return y}),n.d(e,"p",function(){return _}),n.d(e,"q",function(){return O}),n.d(e,"r",function(){return w}),n.d(e,"s",function(){return x}),n.d(e,"t",function(){return j}),n.d(e,"u",function(){return M}),n.d(e,"v",function(){return k}),n.d(e,"w",function(){return S}),n.d(e,"x",function(){return E}),n.d(e,"z",function(){return A}),n.d(e,"y",function(){return P});var i=n(21),a=r("aggregate"),o=r("axisticks"),s=r("bound"),u=r("collect"),c=r("compare"),l=r("datajoin"),f=r("encode"),h=(r("extent"),r("facet")),d=r("field"),p=r("key"),v=r("legendentries"),g=r("mark"),b=r("multiextent"),m=r("multivalues"),y=r("overlap"),_=r("params"),O=r("prefacet"),w=r("projection"),x=r("proxy"),j=r("relay"),M=r("render"),k=r("scale"),S=r("sieve"),E=r("sortitems"),A=r("viewlayout"),P=r("values")},function(t,e,n){"use strict";function r(t,e){var n=t&&t[e];return!!n&&(h.isArray(n)?b.some(n,function(t){return!!t.field}):p.isFieldDef(n)||p.hasConditionalFieldDef(n))}function i(t){return b.some(d.CHANNELS,function(e){if(r(t,e)){var n=t[e];if(h.isArray(n))return b.some(n,function(t){return!!t.aggregate});var i=p.getFieldDef(n);return i&&!!i.aggregate}return!1})}function a(t,e){return b.keys(t).reduce(function(n,r){if(!d.isChannel(r))return v.warn(v.message.invalidEncodingChannel(r)),n;if(!d.supportMark(r,e))return v.warn(v.message.incompatibleChannel(r,e)),n;if("size"===r&&"line"===e){var i=p.getFieldDef(t[r]);if(i&&i.aggregate)return v.warn(v.message.incompatibleChannel(r,e,"when the field is aggregated.")),n}if("detail"===r||"order"===r){var a=t[r];a&&(n[r]=(h.isArray(a)?a:[a]).reduce(function(t,e){return p.isFieldDef(e)?t.push(p.normalizeFieldDef(e,r)):v.warn(v.message.emptyFieldDef(e,r)),t},[]))}else{var a=t[r],i=p.getFieldDef(t[r]);if(i&&b.contains([g.Type.LATITUDE,g.Type.LONGITUDE],i.type)){var o=r,s=(n[o],f(n,["symbol"==typeof o?o:o+""])),u="x"===r?"longitude":"y"===r?"latitude":"x2"===r?"longitude2":"y2"===r?"latitude2":void 0;return v.warn(v.message.latLongDeprecated(r,i.type,u)),l({},s,(c={},c[u]=l({},p.normalize(i,r),{type:"quantitative"}),c))}if(!p.isFieldDef(a)&&!p.isValueDef(a)&&!p.isConditionalDef(a))return v.warn(v.message.emptyFieldDef(a,r)),n;n[r]=p.normalize(a,r)}return n;var c},{})}function o(t){return t&&(!!t.x&&!!t.x2||!!t.y&&!!t.y2)}function s(t){var e=[];return d.CHANNELS.forEach(function(n){if(r(t,n)){var i=t[n];(h.isArray(i)?i:[i]).forEach(function(t){p.isFieldDef(t)?e.push(t):p.hasConditionalFieldDef(t)&&e.push(t.condition)})}}),e}function u(t,e,n){if(t)for(var r=0,i=b.keys(t);r<i.length;r++){var a=i[r];!function(r){h.isArray(t[r])?t[r].forEach(function(t){e.call(n,t,r)}):e.call(n,t[r],r)}(a)}}function c(t,e,n,r){return t?b.keys(t).reduce(function(n,i){var a=t[i];return h.isArray(a)?a.reduce(function(t,n){return e.call(r,t,n,i)},n):e.call(r,n,a,i)},n):n}var l=this&&this.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},f=this&&this.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&(n[r[i]]=t[r[i]]);return n};Object.defineProperty(e,"__esModule",{value:!0});var h=n(0),d=n(6),p=n(7),v=n(3),g=n(24),b=n(2);e.channelHasField=r,e.isAggregate=i,e.normalizeEncoding=a,e.isRanged=o,e.fieldDefs=s,e.forEach=u,e.reduce=c},function(t,e,n){"use strict";function r(t){return!!t.signal}function i(t){return!!t.step}function a(t){return!c.isArray(t)&&"fields"in t&&!("data"in t)}function o(t){return!c.isArray(t)&&"fields"in t&&"data"in t}function s(t){return!c.isArray(t)&&"field"in t&&"data"in t}function u(t){return!c.isArray(t)&&"signal"in t}Object.defineProperty(e,"__esModule",{value:!0});var c=n(0),l=n(2);e.isVgSignalRef=r,e.isVgRangeStep=i,e.isDataRefUnionedDomain=a,e.isFieldRefUnionDomain=o,e.isDataRefDomain=s,e.isSignalRefDomain=u;var f={opacity:1,fill:1,fillOpacity:1,stroke:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,limit:1,dx:1,dy:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,cursor:1,href:1};e.VG_MARK_CONFIGS=l.flagKeys(f)},function(t,e,n){"use strict";function r(t){return t>0}function i(t,e){return"translate("+t+", "+e+")"}function a(t,e,n){for(var r=new Array(e),i=0;i<e;++i)r[i]=new Array(t).fill(n);return r}function o(t,e,n){return t*(1-n)+e*n}function s(t){for(var e,n=t.length,r=-1,i=NaN;++r<n;)if(null!=(e=t[r])&&e>=e)for(i=e;++r<n;)null!=(e=t[r])&&e>=e&&(i+=e);return i}function u(t){for(var e,n=t.length,r=-1,i=NaN;++r<n;)if(null!=(e=t[r])&&e>=e)for(i=e;++r<n;)null!=(e=t[r])&&e>i&&(i=e);return i}function c(t){for(var e,n=t.length,r=-1,i=NaN;++r<n;)if(null!=(e=t[r])&&e>=e)for(i=e;++r<n;)null!=(e=t[r])&&i>e&&(i=e);return i}function l(t,e,n){var r=t;void 0==e?(e=t,t=0):r=e-t,void 0==n?n=1:r/=n,r=Math.floor(r);for(var i=new Array(r),a=0;a<r;a++)i[a]=t,t+=n;return i}function f(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments[2];if(e&&v[t])return Promise.resolve(v[t]);if(!e||!p[t]){p[t]=[];var r=new XMLHttpRequest;r.onload=function(){var n=this;e&&(v[t]=this.response),200===this.status?p[t].forEach(function(t){t[0](n.response)}):p[t].forEach(function(t){t[1](new Error(n.statusText))}),delete p[t]},r.onerror=function(){var e=this;p[t].forEach(function(t){t[1](new Error("XMLHttpRequest Error: "+e.statusText))})},r.open("GET",t),n&&(r.responseType=n),r.send()}return new Promise(function(e,n){p[t].push([e,n])})}function h(t){return t*Math.PI/180}function d(t){return 180*t/Math.PI}Object.defineProperty(e,"__esModule",{value:!0}),e.positive=r,e.translate=i,e.create2D=a,e.linterp=o,e.asum=s,e.amax=u,e.amin=c,e.arange=l;var p={},v={};e.get=f;var g=n(479);e.largeRectInPoly=g.default,e.deg2rad=h,e.rad2deg=d},function(t,e,n){"use strict";function r(t){return{explicit:!0,value:t}}function i(t){return{explicit:!1,value:t}}function a(t){return function(e,n,r,i){var a=t(e.value,n.value);return a>0?e:a<0?n:o(e,n,r,i)}}function o(t,e,n,r){return t.explicit&&e.explicit&&c.warn(c.message.mergeConflictingProperty(n,r,t.value,e.value)),t}function s(t,e,n,r,i){return void 0===i&&(i=o),void 0===t||void 0===t.value?e:t.explicit&&!e.explicit?t:e.explicit&&!t.explicit?e:l.stringify(t.value)===l.stringify(e.value)?t:i(t,e,n,r)}var u=this&&this.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t};Object.defineProperty(e,"__esModule",{value:!0});var c=n(3),l=n(2),f=function(){function t(t,e){void 0===t&&(t={}),void 0===e&&(e={}),this.explicit=t,this.implicit=e}return t.prototype.clone=function(){return new t(l.duplicate(this.explicit),l.duplicate(this.implicit))},t.prototype.combine=function(){return u({},this.explicit,this.implicit)},t.prototype.get=function(t){return void 0!==this.explicit[t]?this.explicit[t]:this.implicit[t]},t.prototype.getWithExplicit=function(t){return void 0!==this.explicit[t]?{explicit:!0,value:this.explicit[t]}:void 0!==this.implicit[t]?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}},t.prototype.setWithExplicit=function(t,e){void 0!==e.value&&this.set(t,e.value,e.explicit)},t.prototype.set=function(t,e,n){return delete this[n?"implicit":"explicit"][t],this[n?"explicit":"implicit"][t]=e,this},t.prototype.copyKeyFromSplit=function(t,e){void 0!==e.explicit[t]?this.set(t,e.explicit[t],!0):void 0!==e.implicit[t]&&this.set(t,e.implicit[t],!1)},t.prototype.copyKeyFromObject=function(t,e){void 0!==e[t]&&this.set(t,e[t],!0)},t}();e.Split=f,e.makeExplicit=r,e.makeImplicit=i,e.tieBreakByComparing=a,e.defaultTieBreaker=o,e.mergeValuesWithExplicit=s},function(t,e,n){"use strict";function r(t,e){this._groups=t,this._parents=e}function i(){return new r([[document.documentElement]],D)}n.d(e,"c",function(){return D}),e.a=r;var a=n(508),o=n(509),s=n(510),u=n(511),c=n(266),l=n(513),f=n(514),h=n(515),d=n(516),p=n(517),v=n(518),g=n(519),b=n(520),m=n(521),y=n(522),_=n(523),O=n(268),w=n(524),x=n(525),j=n(526),M=n(527),k=n(528),S=n(529),E=n(530),A=n(531),P=n(532),T=n(533),N=n(534),C=n(172),R=n(535),D=[null];r.prototype=i.prototype={constructor:r,select:a.a,selectAll:o.a,filter:s.a,data:u.a,enter:c.b,exit:l.a,merge:f.a,order:h.a,sort:d.a,call:p.a,nodes:v.a,node:g.a,size:b.a,empty:m.a,each:y.a,attr:_.a,style:O.a,property:w.a,classed:x.a,text:j.a,html:M.a,raise:k.a,lower:S.a,append:E.a,insert:A.a,remove:P.a,clone:T.a,datum:N.a,on:C.b,dispatch:R.a},e.b=i},function(t,e,n){"use strict";var r=n(26),i=n(17);e.a=function(t,e,n,a,o,s,u){return{type:t,name:u?u.name:void 0,role:e,style:u&&u.style||n,key:a,from:o,interactive:!(!u||!u.interactive),encode:Object(i.d)(s,u,r.m)}}},function(t,e,n){"use strict";function r(t){return Object(v.b)({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})}function i(t,e,n){function r(r,i){return[e+t*r,n-t*i]}return r.invert=function(r,i){return[(r-e)/t,(n-i)/t]},r}function a(t,e,n,r){function i(t,r){return[s*t-u*r+e,n-u*t-s*r]}var a=Object(d.g)(r),o=Object(d.t)(r),s=a*t,u=o*t,c=a/t,l=o/t,f=(o*n-a*e)/t,h=(o*e+a*n)/t;return i.invert=function(t,e){return[c*t-l*e+f,h-l*t-c*e]},i}function o(t){return s(function(){return t})()}function s(t){function e(t){return M(t[0]*d.r,t[1]*d.r)}function n(t){return(t=M.invert(t[0],t[1]))&&[t[0]*d.h,t[1]*d.h]}function o(){var t=a(E,0,0,L).apply(null,v(T,N)),e=(L?a:i)(E,A-t[0],P-t[1],L);return y=Object(p.b)(C,R,D),j=Object(f.a)(v,e),M=Object(f.a)(y,j),x=Object(b.a)(j,B),s()}function s(){return k=S=null,e}var v,y,_,O,w,x,j,M,k,S,E=150,A=480,P=250,T=0,N=0,C=0,R=0,D=0,L=0,I=null,z=u.a,F=null,U=h.a,B=.5;return e.stream=function(t){return k&&S===t?k:k=m(r(y)(z(x(U(S=t)))))},e.preclip=function(t){return arguments.length?(z=t,I=void 0,s()):z},e.postclip=function(t){return arguments.length?(U=t,F=_=O=w=null,s()):U},e.clipAngle=function(t){return arguments.length?(z=+t?Object(c.a)(I=t*d.r):(I=null,u.a),s()):I*d.h},e.clipExtent=function(t){return arguments.length?(U=null==t?(F=_=O=w=null,h.a):Object(l.a)(F=+t[0][0],_=+t[0][1],O=+t[1][0],w=+t[1][1]),s()):null==F?null:[[F,_],[O,w]]},e.scale=function(t){return arguments.length?(E=+t,o()):E},e.translate=function(t){return arguments.length?(A=+t[0],P=+t[1],o()):[A,P]},e.center=function(t){return arguments.length?(T=t[0]%360*d.r,N=t[1]%360*d.r,o()):[T*d.h,N*d.h]},e.rotate=function(t){return arguments.length?(C=t[0]%360*d.r,R=t[1]%360*d.r,D=t.length>2?t[2]%360*d.r:0,o()):[C*d.h,R*d.h,D*d.h]},e.angle=function(t){return arguments.length?(L=t%360*d.r,o()):L*d.h},e.precision=function(t){return arguments.length?(x=Object(b.a)(j,B=t*t),s()):Object(d.u)(B)},e.fitExtent=function(t,n){return Object(g.a)(e,t,n)},e.fitSize=function(t,n){return Object(g.c)(e,t,n)},e.fitWidth=function(t,n){return Object(g.d)(e,t,n)},e.fitHeight=function(t,n){return Object(g.b)(e,t,n)},function(){return v=t.apply(this,arguments),e.invert=v.invert&&n,o()}}e.a=o,e.b=s;var u=n(370),c=n(376),l=n(130),f=n(369),h=n(205),d=n(5),p=n(129),v=n(131),g=n(208),b=n(831),m=Object(v.b)({point:function(t,e){this.stream.point(t*d.r,e*d.r)}})},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(t){if(l===setTimeout)return setTimeout(t,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(t,0);try{return l(t,0)}catch(e){try{return l.call(null,t,0)}catch(e){return l.call(this,t,0)}}}function a(t){if(f===clearTimeout)return clearTimeout(t);if((f===r||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(t);try{return f(t)}catch(e){try{return f.call(null,t)}catch(e){return f.call(this,t)}}}function o(){v&&d&&(v=!1,d.length?p=d.concat(p):g=-1,p.length&&s())}function s(){if(!v){var t=i(o);v=!0;for(var e=p.length;e;){for(d=p,p=[];++g<e;)d&&d[g].run();g=-1,e=p.length}d=null,v=!1,a(t)}}function u(t,e){this.fun=t,this.array=e}function c(){}var l,f,h=t.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(t){l=n}try{f="function"==typeof clearTimeout?clearTimeout:r}catch(t){f=r}}();var d,p=[],v=!1,g=-1;h.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];p.push(new u(t,e)),1!==p.length||v||i(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=c,h.addListener=c,h.once=c,h.off=c,h.removeListener=c,h.removeAllListeners=c,h.emit=c,h.prependListener=c,h.prependOnceListener=c,h.listeners=function(t){return[]},h.binding=function(t){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(t){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(t,e,n){"use strict";function r(t){var e=t.config,n=t.markDef,r=n.filled,i=n.type,a=r?"fill":"stroke";return v({},_.contains(["bar","point","circle","square","geoshape"],i)?{fill:{value:"transparent"}}:{},s("color",t,{vgChannel:a,defaultValue:t.markDef[a]||t.markDef.color||w.getMarkConfig(a,t.markDef,e)||w.getMarkConfig("color",t.markDef,e)}),s("fill",t),s("stroke",t))}function i(t,e){return v({},a(t.markDef,e),r(t),s("opacity",t),c(t,"tooltip"),c(t,"href"))}function a(t,e){return O.VG_MARK_CONFIGS.reduce(function(n,r){return void 0!==t[r]&&"ignore"!==e[r]&&(n[r]={value:t[r]}),n},{})}function o(t,e){if(void 0!==e)return n={},n[t]={value:e},n;return;var n}function s(t,e,n){void 0===n&&(n={});var r=n.defaultValue,i=n.vgChannel,a=n.defaultRef||(void 0!==r?{value:r}:void 0),o=e.encoding[t];return u(e,o,i||t,function(n){return j.midPoint(t,n,e.scaleName(t),e.getScaleComponent(t),null,a)})}function u(t,e,n,r){var i=e&&e.condition,a=r(e);if(i){var o=g.isArray(i)?i:[i],s=o.map(function(e){var n=r(e),i=b.isConditionalSelection(e)?x.selectionPredicate(t,e.selection):y.expression(t,e.test);return v({test:i},n)});return u={},u[n]=s.concat(void 0!==a?[a]:[]),u}return void 0!==a?(c={},c[n]=a,c):{};var u,c}function c(t,e){void 0===e&&(e="text");var n=t.encoding[e];return u(t,n,e,function(e){return j.text(e,t.config)})}function l(t,e,n){var r=n.scaleName(e),i="x"===e?"width":"height";if(n.encoding.size||void 0!==n.markDef.size)if(n.markDef.orient){var a=(o={},o[e+"c"]=j.fieldRef(t,r,{},{band:.5}),o);if(b.getFieldDef(n.encoding.size))m.warn(m.message.cannotUseSizeFieldWithBandSize(e));else{if(b.isValueDef(n.encoding.size))return v({},a,s("size",n,{vgChannel:i}));if(void 0!==n.markDef.size)return v({},a,(u={},u[i]={value:n.markDef.size},u))}}else m.warn(m.message.cannotApplySizeToNonOrientedMark(n.markDef.type));return c={},c[e]=j.fieldRef(t,r,{binSuffix:"range"}),c[i]=j.bandRef(r),c;var o,u,c}function f(t,e,n,r){var i="x"===t?"xc":"yc",a="x"===t?"width":"height";return v({},d(t,e,n,i),s("size",e,{defaultRef:r,vgChannel:a}))}function h(t,e,n,r,i){return"x"===e?{x2:j.bin(t,n,"start",i?0:r),x:j.bin(t,n,"end",i?r:0)}:{y2:j.bin(t,n,"start",i?r:0),y:j.bin(t,n,"end",i?0:r)}}function d(t,e,n,r){var i=e.encoding,a=e.stack,o=i[t],s=o||!i.latitude&&!i.longitude?j.stackable(t,i[t],e.scaleName(t),e.getScaleComponent(t),a,n):{field:e.getName(t)};return u={},u[r||t]=s,u;var u}function p(t,e,n){var r=t.encoding,i=t.markDef,a=t.stack;n=n||("horizontal"===i.orient?"x2":"y2");var o="x2"===n?"x":"y",s=r[o],u=s||!r.latitude&&!r.longitude?j.stackable2(n,s,r[n],t.scaleName(o),t.getScaleComponent(o),a,e):{field:t.getName(n)};return c={},c[n]=u,c;var c}var v=this&&this.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t};Object.defineProperty(e,"__esModule",{value:!0});var g=n(0),b=n(7),m=n(3),y=n(96),_=n(2),O=n(29),w=n(25),x=n(18),j=n(60);e.color=r,e.baseEncodeEntry=i,e.valueIfDefined=o,e.nonPosition=s,e.text=c,e.bandPosition=l,e.centeredBandPosition=f,e.binnedPosition=h,e.pointPosition=d,e.pointPosition2=p},function(t,e,n){"use strict";n.d(e,"d",function(){return r}),n.d(e,"c",function(){return i}),n.d(e,"b",function(){return a}),n.d(e,"a",function(){return o}),n.d(e,"e",function(){return s});var r=1e3,i=6e4,a=36e5,o=864e5,s=6048e5},function(t,e,n){"use strict";function r(t,e){return t.zindex-e.zindex||t.index-e.index}function i(t){if(!t.zdirty)return t.zitems;var e,n,i,a=t.items,o=[];for(n=0,i=a.length;n<i;++n)e=a[n],e.index=n,e.zindex&&o.push(e);return t.zdirty=!1,t.zitems=o.sort(r)}function a(t,e){var n,r,a=t.items;if(a&&a.length){var o=i(t);if(o&&o.length){for(n=0,r=a.length;n<r;++n)a[n].zindex||e(a[n]);a=o}for(n=0,r=a.length;n<r;++n)e(a[n])}}function o(t,e){var n,r,a=t.items;if(!a||!a.length)return null;var o=i(t);for(o&&o.length&&(a=o),r=a.length;--r>=0;)if(n=e(a[r]))return n;if(a===o)for(a=t.items,r=a.length;--r>=0;)if(!a[r].zindex&&(n=e(a[r])))return n;return null}e.c=i,e.b=a,e.a=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(199);n.d(e,"interpolate",function(){return r.a});var i=n(351);n.d(e,"interpolateArray",function(){return i.a});var a=n(202);n.d(e,"interpolateBasis",function(){return a.b});var o=n(349);n.d(e,"interpolateBasisClosed",function(){return o.a});var s=n(352);n.d(e,"interpolateDate",function(){return s.a});var u=n(125);n.d(e,"interpolateNumber",function(){return u.a});var c=n(353);n.d(e,"interpolateObject",function(){return c.a});var l=n(724);n.d(e,"interpolateRound",function(){return l.a});var f=n(354);n.d(e,"interpolateString",function(){return f.a});var h=n(725);n.d(e,"interpolateTransformCss",function(){return h.a}),n.d(e,"interpolateTransformSvg",function(){return h.b});var d=n(728);n.d(e,"interpolateZoom",function(){return d.a});var p=n(348);n.d(e,"interpolateRgb",function(){return p.a}),n.d(e,"interpolateRgbBasis",function(){return p.b}),n.d(e,"interpolateRgbBasisClosed",function(){return p.c});var v=n(729);n.d(e,"interpolateHsl",function(){return v.a}),n.d(e,"interpolateHslLong",function(){return v.b});var g=n(730);n.d(e,"interpolateLab",function(){return g.a});var b=n(731);n.d(e,"interpolateHcl",function(){return b.a}),n.d(e,"interpolateHclLong",function(){return b.b});var m=n(732);n.d(e,"interpolateCubehelix",function(){return m.b}),n.d(e,"interpolateCubehelixLong",function(){return m.a});var y=n(733);n.d(e,"quantize",function(){return y.a})},function(t,e,n){"use strict";var r=n(200);n.d(e,"a",function(){return r.e}),n.d(e,"f",function(){return r.g}),n.d(e,"d",function(){return r.f});var i=n(722);n.d(e,"e",function(){return i.a}),n.d(e,"c",function(){return i.b});var a=n(723);n.d(e,"b",function(){return a.a})},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";function r(t){this.clear(),t&&this.union(t)}e.a=r;var i=r.prototype;i.clone=function(){return new r(this)},i.clear=function(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},i.empty=function(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},i.set=function(t,e,n,r){return n<t?(this.x2=t,this.x1=n):(this.x1=t,this.x2=n),r<e?(this.y2=e,this.y1=r):(this.y1=e,this.y2=r),this},i.add=function(t,e){return t<this.x1&&(this.x1=t),e<this.y1&&(this.y1=e),t>this.x2&&(this.x2=t),e>this.y2&&(this.y2=e),this},i.expand=function(t){return this.x1-=t,this.y1-=t,this.x2+=t,this.y2+=t,this},i.round=function(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},i.translate=function(t,e){return this.x1+=t,this.x2+=t,this.y1+=e,this.y2+=e,this},i.rotate=function(t,e,n){var r=Math.cos(t),i=Math.sin(t),a=e-e*r+n*i,o=n-e*i-n*r,s=this.x1,u=this.x2,c=this.y1,l=this.y2;return this.clear().add(r*s-i*c+a,i*s+r*c+o).add(r*s-i*l+a,i*s+r*l+o).add(r*u-i*c+a,i*u+r*c+o).add(r*u-i*l+a,i*u+r*l+o)},i.union=function(t){return t.x1<this.x1&&(this.x1=t.x1),t.y1<this.y1&&(this.y1=t.y1),t.x2>this.x2&&(this.x2=t.x2),t.y2>this.y2&&(this.y2=t.y2),this},i.intersect=function(t){return t.x1>this.x1&&(this.x1=t.x1),t.y1>this.y1&&(this.y1=t.y1),t.x2<this.x2&&(this.x2=t.x2),t.y2<this.y2&&(this.y2=t.y2),this},i.encloses=function(t){return t&&this.x1<=t.x1&&this.x2>=t.x2&&this.y1<=t.y1&&this.y2>=t.y2},i.alignsWith=function(t){return t&&(this.x1==t.x1||this.x2==t.x2||this.y1==t.y1||this.y2==t.y2)},i.intersects=function(t){return t&&!(this.x2<t.x1||this.x1>t.x2||this.y2<t.y1||this.y1>t.y2)},i.contains=function(t,e){return!(t<this.x1||t>this.x2||e<this.y1||e>this.y2)},i.width=function(){return this.x2-this.x1},i.height=function(){return this.y2-this.y1}},function(t,e,n){"use strict";function r(t){return t.x||0}function i(t){return t.y||0}function a(t){return t.width||0}function o(t){return t.size||1}function s(t){return t.height||0}function u(t){return(t.x||0)+(t.width||0)}function c(t){return(t.y||0)+(t.height||0)}function l(t){return t.startAngle||0}function f(t){return t.endAngle||0}function h(t){return t.padAngle||0}function d(t){return t.innerRadius||0}function p(t){return t.outerRadius||0}function v(t){return t.cornerRadius||0}function g(t){return!(!1===t.defined)}function b(t){return null==t.size?64:t.size}function m(t){return Object(S.a)(t.shape||"circle")}function y(t,e){return T.context(t)(e)}function _(t,e){var n=e[0],r=n.interpolate||"linear";return("horizontal"===n.orient?C:N).curve(Object(k.a)(r,n.orient,n.tension)).context(t)(e)}function O(t,e){var n=e[0],r=n.interpolate||"linear";return R.curve(Object(k.a)(r,n.orient,n.tension)).context(t)(e)}function w(t,e,n,r){return D.context(t)(e,n,r)}function x(t,e){return(e.mark.shape||e.shape).context(t)(e)}function j(t,e){return L.context(t)(e)}function M(t,e){return I.context(t)(e)}e.a=y,e.b=_,e.c=O,e.d=w,e.e=x,e.f=j,e.g=M;var k=n(316),S=n(332),E=n(333),A=n(334),P=n(317),T=Object(P.a)().startAngle(l).endAngle(f).padAngle(h).innerRadius(d).outerRadius(p).cornerRadius(v),N=Object(P.b)().x(r).y1(i).y0(c).defined(g),C=Object(P.b)().y(i).x1(r).x0(u).defined(g),R=Object(P.u)().x(r).y(i).defined(g),D=Object(E.a)().x(r).y(i).width(a).height(s).cornerRadius(v),L=Object(P.v)().type(m).size(b),I=Object(A.a)().x(r).y(i).defined(g).size(o)},function(t,e,n){"use strict";function r(){}e.a=r},function(t,e,n){"use strict";function r(t){return!!t.url}function i(t){return!!t.values}function a(t){return!!t.name}Object.defineProperty(e,"__esModule",{value:!0}),e.isUrlData=r,e.isInlineData=i,e.isNamedData=a,e.MAIN="main",e.RAW="raw"},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;r(this,t),this.r=e,this.g=n,this.b=i,this.a=a}return i(t,[{key:"set",value:function(t,e,n,r){this.r=t,this.g=e,this.b=n,this.a=r}},{key:"clamp",value:function(){return new t(Math.min(Math.max(this.r,0),1),Math.min(Math.max(this.g,0),1),Math.min(Math.max(this.b,0),1),Math.min(Math.max(this.a,0),1))}},{key:"isValid",value:function(){return!(isNaN(this.r)||isNaN(this.g)||isNaN(this.b)||isNaN(this.a)||this.r<0||this.r>1||this.g<0||this.g>1||this.b<0||this.b>1||this.a<0||this.a>1)}},{key:"clone",value:function(){return new t(this.r,this.g,this.b,this.a)}},{key:"rdissolve",value:function(t){this.r*=t,this.g*=t,this.b*=t,this.a*=t}},{key:"toString",value:function(){return"Color("+this.r+","+this.g+","+this.b+","+this.a+")"}},{key:"cssDepremultiply",value:function(){var t=this.a;if(0==t)return"rgba(0,0,0,0)";var e=this.r/t,n=this.g/t,r=this.b/t;return"rgba("+Math.floor(255*e)+","+Math.floor(255*n)+","+Math.floor(255*r)+","+Math.round(100*t)/100+")"}},{key:"css",value:function(){var t=this.a,e=this.r,n=this.g,r=this.b;return"rgba("+Math.floor(255*e)+","+Math.floor(255*n)+","+Math.floor(255*r)+","+Math.round(100*t)/100+")"}},{key:"add",value:function(e){return new t(this.r+e.r,this.g+e.g,this.b+e.b,this.a+e.a)}},{key:"radd",value:function(t){this.r+=t.r,this.g+=t.g,this.b+=t.b,this.a+=t.a}},{key:"darker",value:function(){return new t(this.r/2,this.g/2,this.b/2,this.a)}},{key:"totTransparent",value:function(){return new t(this.r,this.g,this.b,0)}},{key:"brighter",value:function(){return new t(1-(1-this.r)/2,1-(1-this.g)/2,1-(1-this.b)/2,this.a)}}],[{key:"compose",value:function(e,n,r,i){return new t(e.r*n+r.r*i,e.g*n+r.g*i,e.b*n+r.b*i,e.a*n+r.a*i)}},{key:"interpolate",value:function(e,n,r){return t.compose(e,1-r,n,r)}},{key:"rgba",value:function(e){if(e.startsWith("rgba")){var n=e.split(/[(,)]/);if(n.length>=5)return new t(parseFloat(n[1])/255,parseFloat(n[2])/255,parseFloat(n[3])/255,parseFloat(n[4]))}else if(e.startsWith("rgb")){var r=e.split(/[(,)]/);if(r.length>=4){var i=parseFloat(r[1]),a=parseFloat(r[2]),o=parseFloat(r[3]);return new t(i/255,a/255,o/255,1)}}else if(e.startsWith("#")){var s=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,u=e.replace(s,function(t,e,n,r){return e+e+n+n+r+r}),c=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(u);if(c&&c.length>=4)return new t(parseInt(c[1],16)/255,parseInt(c[2],16)/255,parseInt(c[3],16)/255,1)}return t.None}},{key:"parse",value:function(e){return e=e.toLowerCase(),e in t.ColorByName?t.ColorByName[e]:this.rgba(e)}}]),t}();a.None=new a(0,0,0,0),a.White=new a(1,1,1,1),a.Black=new a(0,0,0,1),a.Blue=new a(31/255,120/255,180/255,1),a.Orange=new a(1,127/255,0,1),a.Green=new a(.2,160/255,44/255,1),a.Red=new a(211/255,39/255,40/255,1),a.Purple=new a(148/255,103/255,189/255,1),a.Brown=new a(140/255,86/255,75/255,1),a.Pink=new a(227/255,119/255,194/255,1),a.Gray=new a(127/255,127/255,127/255,1),a.Yellow=new a(1,240/255,65/255,1),a.Cyan=new a(0,190/255,1,1),a.Magenta=new a(241/255,31/255,141/255,1),a.Skyblue=new a(23/255,190/255,207/255,1),a.Transparent=new a(0,0,0,0),a.ColorByName={None:a.None,white:a.White,Black:a.Black,blue:a.Blue,orange:a.Orange,green:a.Green,red:a.Red,purple:a.Purple,brown:a.Brown,pink:a.Pink,gray:a.Gray,yellow:a.Yellow,cyan:a.Cyan,magenta:a.Magenta,skyblue:a.Skyblue},a.Category10=[a.Blue,a.Orange,a.Green,a.Red,a.Purple,a.Brown,a.Pink,a.Gray,a.Yellow,a.Skyblue],a.Category10t=a.Category10.map(function(t){return new a(t.r,t.g,t.b,0)}),a.Category10a=[a.Blue,a.Red,a.Green,a.Orange,a.Purple,a.Brown,a.Pink,a.Gray,a.Yellow,a.Skyblue],a.Category10b=[a.Red,a.Yellow,a.Blue,a.Orange,a.Purple,a.Green,a.Pink,a.Gray,a.Yellow,a.Skyblue],e.default=a},function(t,e,n){"use strict";var r=n(619);n.d(e,"a",function(){return r.a});var i=n(620);n.d(e,"b",function(){return i.a});var a=n(301);n.d(e,"c",function(){return a.a});var o=n(48);n.d(e,"d",function(){return o.a}),n.d(e,"j",function(){return o.b});var s=n(621);n.d(e,"e",function(){return s.a});var u=n(622);n.d(e,"f",function(){return u.a});var c=n(623);n.d(e,"g",function(){return c.a});var l=n(302);n.d(e,"h",function(){return l.a});var f=n(624);n.d(e,"i",function(){return f.a})},function(t,e,n){"use strict";function r(t){i=t}n.d(e,"a",function(){return i}),e.b=r;var i=Math.random},function(t,e,n){"use strict";var r=n(664),i=n(692),a=n(693),o=n(694),s=n(695),u=n(696),c=n(697),l=n(698),f=n(699),h=n(700),d=n(701),p=n(702);e.a={arc:r.a,area:i.a,group:a.a,image:o.a,line:s.a,path:u.a,rect:c.a,rule:l.a,shape:f.a,symbol:h.a,text:d.a,trail:p.a}},function(t,e,n){"use strict";var r=n(666);n.d(e,"a",function(){return r.a})},function(t,e,n){"use strict";e.a=function(t){return function(){return t}}},function(t,e,n){"use strict";e.a=function(t,e){return e.stroke&&0!==e.opacity&&0!==e.strokeOpacity&&t.expand(null!=e.strokeWidth?+e.strokeWidth:1),t}},function(t,e,n){"use strict";function r(t){return t||(t=s),function(e,n,r,i,a,s){return e.pixelRatio>1&&(r*=e.pixelRatio,i*=e.pixelRatio),Object(o.a)(n,function(n){var o=n.bounds;if((!o||o.contains(a,s))&&o)return t(e,n,r,i,a,s)?n:void 0})}}function i(t,e){return function(n,r,i,a){var o,s,u=Array.isArray(r)?r[0]:r,c=null==e?u.fill:e,l=u.stroke&&n.isPointInStroke;return l&&(o=u.strokeWidth,s=u.strokeCap,n.lineWidth=null!=o?o:1,n.lineCap=null!=s?s:"butt"),!t(n,r)&&(c&&n.isPointInPath(i,a)||l&&n.isPointInStroke(i,a))}}function a(t){return r(i(t))}e.b=r,e.a=i,e.c=a;var o=n(38),s=function(){return!0}},function(t,e,n){"use strict";function r(t,e,n){return!t&&"undefined"!=typeof document&&document.createElement&&(t=document),t?n?t.createElementNS(n,e):t.createElement(e):null}function i(t,e){e=e.toLowerCase();for(var n=t.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===e)return n[r]}function a(t,e,n,i){var a,o=t.childNodes[e];return o&&o.tagName.toLowerCase()===n.toLowerCase()||(a=o||null,o=r(t.ownerDocument,n,i),t.insertBefore(o,a)),o}function o(t,e){for(var n=t.childNodes,r=n.length;r>e;)t.removeChild(n[--r]);return t}function s(t){return"mark-"+t.marktype+(t.role?" role-"+t.role:"")+(t.name?" "+t.name:"")}e.d=r,e.e=i,e.b=a,e.c=o,e.a=s},function(t,e,n){"use strict";var r=n(716);n.d(e,"d",function(){return r.a});var i=n(753);n.d(e,"f",function(){return i.a});var a=n(345);n.d(e,"a",function(){return a.a});var o=n(795);n.d(e,"b",function(){return o.a}),n.d(e,"c",function(){return o.b}),n.d(e,"e",function(){return o.c});var s=n(796);n.d(e,"g",function(){return s.a}),n.d(e,"h",function(){return s.b})},function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return a});var r=Array.prototype,i=r.map,a=r.slice},function(t,e,n){"use strict";function r(t,e){t&&s.hasOwnProperty(t.type)&&s[t.type](t,e)}function i(t,e,n){var r,i=-1,a=t.length-n;for(e.lineStart();++i<a;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function a(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)i(t[n],e,1);e.polygonEnd()}var o={Feature:function(t,e){r(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,a=n.length;++i<a;)r(n[i].geometry,e)}},s={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){i(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,a=n.length;++r<a;)i(n[r],e,0)},Polygon:function(t,e){a(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)a(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,a=n.length;++i<a;)r(n[i],e)}};e.a=function(t,e){t&&o.hasOwnProperty(t.type)?o[t.type](t,e):r(t,e)}},function(t,e,n){"use strict";var r=n(396),i=n(397),a=n(0);e.a=function(t,e,n){var o,s,u={};try{o=Object(i.d)(t)}catch(e){Object(a.error)("Expression parse error: "+Object(a.stringValue)(t))}return o.visit(function(t){if("CallExpression"===t.type){var n=t.callee.name,i=r.b.visitors[n];i&&i(n,t.arguments,e,u)}}),s=Object(r.a)(o),s.globals.forEach(function(t){var n="$"+t;!u.hasOwnProperty(n)&&e.getSignal(t)&&(u[n]=e.signalRef(t))}),{$expr:n?n+"return("+s.code+");":s.code,$fields:s.fields,$params:u}}},function(t,e,n){"use strict";function r(t){return!(!t||!(t.year||t.quarter||t.month||t.date||t.day||t.hours||t.minutes||t.seconds||t.milliseconds))}function i(t){if(u.isNumber(t))return t>4&&c.warn(c.message.invalidTimeUnit("quarter",t)),t-1+"";throw new Error(c.message.invalidTimeUnit("quarter",t))}function a(t){if(u.isNumber(t))return t-1+"";var n=t.toLowerCase(),r=e.MONTHS.indexOf(n);if(-1!==r)return r+"";var i=n.substr(0,3),a=e.SHORT_MONTHS.indexOf(i);if(-1!==a)return a+"";throw new Error(c.message.invalidTimeUnit("month",t))}function o(t){if(u.isNumber(t))return t%7+"";var n=t.toLowerCase(),r=e.DAYS.indexOf(n);if(-1!==r)return r+"";var i=n.substr(0,3),a=e.SHORT_DAYS.indexOf(i);if(-1!==a)return a+"";throw new Error(c.message.invalidTimeUnit("day",t))}function s(t,e){void 0===e&&(e=!1);var n=[];if(e&&void 0!==t.day&&l.keys(t).length>1&&(c.warn(c.message.droppedDay(t)),t=l.duplicate(t),delete t.day),void 0!==t.year?n.push(t.year):void 0!==t.day?n.push(f):n.push(0),void 0!==t.month){var r=e?a(t.month):t.month;n.push(r)}else if(void 0!==t.quarter){var s=e?i(t.quarter):t.quarter;n.push(s+"*3")}else n.push(0);if(void 0!==t.date)n.push(t.date);else if(void 0!==t.day){var u=e?o(t.day):t.day;n.push(u+"+1")}else n.push(1);for(var h=0,d=["hours","minutes","seconds","milliseconds"];h<d.length;h++){var p=d[h];void 0!==t[p]?n.push(t[p]):n.push(0)}return t.utc?"utc("+n.join(", ")+")":"datetime("+n.join(", ")+")"}Object.defineProperty(e,"__esModule",{value:!0});var u=n(0),c=n(3),l=n(2),f=2006;e.isDateTime=r,e.MONTHS=["january","february","march","april","may","june","july","august","september","october","november","december"],e.SHORT_MONTHS=e.MONTHS.map(function(t){return t.substr(0,3)}),e.DAYS=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],e.SHORT_DAYS=e.DAYS.map(function(t){return t.substr(0,3)}),e.dateTimeExpr=s},function(t,e,n){"use strict";function r(t,e,n,r,i,a){return m.isFieldDef(e)&&i&&t===i.fieldChannel?o(e,n,{suffix:"end"}):c(t,e,n,r,i,a)}function i(t,e,n,r,i,a,s){return m.isFieldDef(e)&&a&&t.charAt(0)===a.fieldChannel.charAt(0)?o(e,r,{suffix:"start"}):c(t,n,r,i,a,s)}function a(t,e,n,r){return o(t,e,{binSuffix:"start"===n?void 0:"end"},r?{offset:r}:{})}function o(t,e,n,r){var i=g({},e?{scale:e}:{},{field:m.vgField(t,n)});return r?g({},i,r):i}function s(t,e){return void 0===e&&(e=!0),{scale:t,band:e}}function u(t,e){return{signal:'(scale("'+e+'", '+m.vgField(t,{expr:"datum"})+') + scale("'+e+'", '+m.vgField(t,{binSuffix:"end",expr:"datum"})+"))/2"}}function c(t,e,n,r,i,a){if(e){if(m.isFieldDef(e)){if(e.bin)return O.contains([b.X,b.Y],t)&&e.type===_.QUANTITATIVE?i&&i.impute?o(e,n,{binSuffix:"mid"}):u(e,n):o(e,n,w.binRequiresRange(e,t)?{binSuffix:"range"}:{});if(r){var s=r.get("type");if(y.hasDiscreteDomain(s))return"band"===s?o(e,n,{binSuffix:"range"},{band:.5}):o(e,n,{binSuffix:"range"})}return o(e,n,{})}if(m.isValueDef(e))return{value:e.value}}if("zeroOrMin"===a){if(t===b.X||t===b.X2)return h(n,r);if(t===b.Y||t===b.Y2)return p(n,r);throw new Error("Unsupported channel "+t+" for base function")}if("zeroOrMax"===a){if(t===b.X||t===b.X2)return d(n,r);if(t===b.Y||t===b.Y2)return v(n,r);throw new Error("Unsupported channel "+t+" for base function")}return a}function l(t,e){if(t){if(m.isFieldDef(t))return w.formatSignalRef(t,t.format,"datum",e);if(m.isValueDef(t))return{value:t.value}}}function f(t){return g({},t,{mult:.5})}function h(t,e){return t&&!O.contains([y.ScaleType.LOG,y.ScaleType.TIME,y.ScaleType.UTC],e.get("type"))&&!1!==e.get("zero")?{scale:t,value:0}:{value:0}}function d(t,e){return t&&!O.contains([y.ScaleType.LOG,y.ScaleType.TIME,y.ScaleType.UTC],e.get("type"))&&!1!==e.get("zero")?{scale:t,value:0}:{field:{group:"width"}}}function p(t,e){return t&&!O.contains([y.ScaleType.LOG,y.ScaleType.TIME,y.ScaleType.UTC],e.get("type"))&&!1!==e.get("zero")?{scale:t,value:0}:{field:{group:"height"}}}function v(t,e){return t&&!O.contains([y.ScaleType.LOG,y.ScaleType.TIME,y.ScaleType.UTC],e.get("type"))&&!1!==e.get("zero")?{scale:t,value:0}:{value:0}}var g=this&&this.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t};Object.defineProperty(e,"__esModule",{value:!0});var b=n(6),m=n(7),y=n(11),_=n(24),O=n(2),w=n(25);e.stackable=r,e.stackable2=i,e.bin=a,e.fieldRef=o,e.bandRef=s,e.midPoint=c,e.text=l,e.mid=f},function(t,e,n){"use strict";function r(t){if(!(this instanceof r))return new r(t);c.call(this,t),l.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",i)}function i(){this.allowHalfOpen||this._writableState.ended||o.nextTick(a,this)}function a(t){t.end()}var o=n(156),s=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};t.exports=r;var u=n(99);u.inherits=n(68);var c=n(445),l=n(238);u.inherits(r,c);for(var f=s(l.prototype),h=0;h<f.length;h++){var d=f[h];r.prototype[d]||(r.prototype[d]=l.prototype[d])}Object.defineProperty(r.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),r.prototype._destroy=function(t,e){this.push(null),this.end(),o.nextTick(e,t)}},function(t,e,n){"use strict";e.a=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(735);n.d(e,"formatDefaultLocale",function(){return r.a}),n.d(e,"format",function(){return r.b}),n.d(e,"formatPrefix",function(){return r.c});var i=n(356);n.d(e,"formatLocale",function(){return i.a});var a=n(357);n.d(e,"formatSpecifier",function(){return a.a});var o=n(741);n.d(e,"precisionFixed",function(){return o.a});var s=n(742);n.d(e,"precisionPrefix",function(){return s.a});var u=n(743);n.d(e,"precisionRound",function(){return u.a})},function(t,e,n){"use strict";function r(){this.reset()}function i(t,e,n){var r=t.s=e+n,i=r-e,a=r-i;t.t=e-a+(n-i)}e.a=function(){return new r},r.prototype={constructor:r,reset:function(){this.s=this.t=0},add:function(t){i(a,t,this.t),i(this,a.s,this.s),this.s?this.t+=a.t:this.s=a.t},valueOf:function(){return this.s}};var a=new r},function(t,e,n){"use strict";e.a=function(t){return function(){return t}}},function(t,e,n){"use strict";var r=n(876);n.d(e,"a",function(){return r.a});var i=n(213);n.d(e,"b",function(){return i.c});var a=n(888);n.d(e,"c",function(){return a.a});var o=(n(384),n(385),n(890));n.d(e,"d",function(){return o.a});var s=n(891);n.d(e,"e",function(){return s.a});var u=n(892);n.d(e,"f",function(){return u.a});var c=n(893);n.d(e,"g",function(){return c.a});var l=n(894);n.d(e,"h",function(){return l.a});var f=n(89);n.d(e,"i",function(){return f.a});var h=n(132);n.d(e,"k",function(){return h.a});var d=n(895);n.d(e,"l",function(){return d.a});var p=n(215);n.d(e,"m",function(){return p.a});var v=n(896);n.d(e,"j",function(){return v.a})},function(t,e,n){"use strict";function r(t){return void 0!==t.facet}function i(t){return!!t.mark}function a(t){return void 0!==t.layer}function o(t){return void 0!==t.repeat}function s(t){return u(t)||c(t)}function u(t){return void 0!==t.vconcat}function c(t){return void 0!==t.hconcat}function l(t,e){if(r(t))return f(t,e);if(a(t))return p(t,e);if(o(t))return v(t,e);if(u(t))return g(t,e);if(c(t))return b(t,e);if(i(t)){var n=T.channelHasField(t.encoding,A.ROW),s=T.channelHasField(t.encoding,A.COLUMN);return n||s?m(t,e):_(t,e)}throw new Error(C.message.INVALID_SPEC)}function f(t,e){var n=t.spec,r=E(t,["spec"]);return S({},r,{spec:l(n,e)})}function h(t){var e=t.parentEncoding,n=t.encoding;if(e&&n){var r=L.keys(e).reduce(function(t,e){return n[e]&&t.push(e),t},[]);r.length>0&&C.warn(C.message.encodingOverridden(r))}var i=S({},e||{},n||{});return L.keys(i).length>0?i:void 0}function d(t){var e=t.parentProjection,n=t.projection;return e&&n&&C.warn(C.message.projectionOverridden({parentProjection:e,projection:n})),n||e}function p(t,e,n,r){var i=t.layer,o=t.encoding,s=t.projection,u=E(t,["layer","encoding","projection"]),c=h({parentEncoding:n,encoding:o}),l=d({parentProjection:r,projection:s});return S({},u,{layer:i.map(function(t){return a(t)?p(t,e,c,l):_(t,e,c,l)})})}function v(t,e){var n=t.spec,r=E(t,["spec"]);return S({},r,{spec:l(n,e)})}function g(t,e){var n=t.vconcat,r=E(t,["vconcat"]);return S({},r,{vconcat:n.map(function(t){return l(t,e)})})}function b(t,e){var n=t.hconcat,r=E(t,["hconcat"]);return S({},r,{hconcat:n.map(function(t){return l(t,e)})})}function m(t,e){var n=t.encoding,r=n.row,i=n.column,a=E(n,["row","column"]),o=t.mark,s=t.width,u=t.projection,c=t.height,l=t.selection,f=(t.encoding,E(t,["mark","width","projection","height","selection","encoding"]));return S({},f,{facet:S({},r?{row:r}:{},i?{column:i}:{}),spec:_(S({},u?{projection:u}:{},{mark:o},s?{width:s}:{},c?{height:c}:{},{encoding:a},l?{selection:l}:{}),e)})}function y(t){return R.isPrimitiveMark(t.mark)}function _(t,e,n,r){var i=t.encoding,a=t.projection;if(n||r){var o=d({parentProjection:r,projection:a}),s=h({parentEncoding:n,encoding:i});return _(S({},t,o?{projection:o}:{},s?{encoding:s}:{}),e)}if(y(t)){if(T.isRanged(i))return O(t);var u=e&&e.overlay,c=u&&t.mark===R.AREA&&L.contains(["linepoint","line"],u.area),l=u&&(u.line&&t.mark===R.LINE||"linepoint"===u.area&&t.mark===R.AREA);return l||c?w(t,l,c,e):t}return P.normalize(t,e)}function O(t){var e=T.channelHasField(t.encoding,A.X),n=T.channelHasField(t.encoding,A.Y),r=T.channelHasField(t.encoding,A.X2),i=T.channelHasField(t.encoding,A.Y2);if(r&&!e||i&&!n){var a=L.duplicate(t);return r&&!e&&(a.encoding.x=a.encoding.x2,delete a.encoding.x2),i&&!n&&(a.encoding.y=a.encoding.y2,delete a.encoding.y2),a}return t}function w(t,e,n,r){var i=t.mark,a=t.selection,o=t.projection,s=t.encoding,u=E(t,["mark","selection","projection","encoding"]),c=[{mark:i,encoding:s}],l=D.stack(i,s,r?r.stack:void 0),f=s;if(l){var h=l.fieldChannel,d=l.offset;f=S({},s,(p={},p[h]=S({},s[h],d?{stack:d}:{}),p))}return n&&c.push(S({},o?{projection:o}:{},{mark:{type:"line",style:"lineOverlay"}},a?{selection:a}:{},{encoding:f})),e&&c.push(S({},o?{projection:o}:{},{mark:{type:"point",filled:!0,style:"pointOverlay"}},a?{selection:a}:{},{encoding:f})),S({},u,{layer:c});var p}function x(t,e){return e.forEach(function(e){var n=["field","type","value","timeUnit","bin","aggregate"].reduce(function(t,n){return void 0!==e[n]&&(t[n]=e[n]),t},{}),r=L.hash(n);t[r]=t[r]||e}),t}function j(t,e){if(void 0===e&&(e={}),a(t))t.layer.forEach(function(t){i(t)?x(e,N.fieldDefs(t.encoding)):j(t,e)});else if(r(t))x(e,N.fieldDefs(t.facet)),j(t.spec,e);else if(o(t))j(t.spec,e);else if(s(t)){var n=u(t)?t.vconcat:t.hconcat;n.forEach(function(t){return j(t,e)})}else x(e,N.fieldDefs(t.encoding));return e}function M(t){return L.vals(j(t))}function k(t,e){return e=e||t.config,!!R.isPrimitiveMark(t.mark)&&null!==D.stack(t.mark,t.encoding,e?e.stack:void 0)}var S=this&&this.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},E=this&&this.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&(n[r[i]]=t[r[i]]);return n};Object.defineProperty(e,"__esModule",{value:!0});var A=n(6),P=n(142),T=n(28),N=n(28),C=n(3),R=n(23),D=n(227),L=n(2);e.isFacetSpec=r,e.isUnitSpec=i,e.isLayerSpec=a,e.isRepeatSpec=o,e.isConcatSpec=s,e.isVConcatSpec=u,e.isHConcatSpec=c,e.normalize=l,e.fieldDefs=M,e.isStacked=k},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e,n){"use strict";e.a=function(t,e,n){var r=t*e;return n/Math.sqrt(1-r*r)}},function(t,e,n){"use strict";e.a=function(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}},function(t,e,n){"use strict";e.a=function(t){return null===t?NaN:+t}},function(t,e,n){"use strict";function r(t){return null==t?null:t.fname}function i(t){return null==t?null:t.fields}e.b=r,e.a=i,e.c=function(t,e,n){return t.fields=e||[],t.fname=n,t}},function(t,e,n){"use strict";function r(t){var e=t||i.identity,n=[],r={};return n.add=function(t){var i=e(t);return r[i]||(r[i]=1,n.push(t)),n},n.remove=function(t){var i,a=e(t);return r[a]&&(r[a]=0,(i=n.indexOf(t))>=0&&n.splice(i,1)),n},n}e.a=r;var i=n(0)},function(t,e,n){"use strict";var r=n(568);n.d(e,"d",function(){return r.a});var i=n(585);n.d(e,"e",function(){return i.a});var a=n(286);n.d(e,"b",function(){return a.a}),n.d(e,"c",function(){return a.b}),n.d(e,"f",function(){return a.c});var o=n(287);n.d(e,"a",function(){return o.a})},function(t,e,n){"use strict";var r=n(570);n.d(e,"b",function(){return r.a});var i=(n(571),n(180));n.d(e,"a",function(){return i.a}),n(572),n(573),n(574)},function(t,e,n){"use strict";var r=n(185);n.d(e,"b",function(){return r.a}),n.d(e,"a",function(){return r.b}),n.d(e,"c",function(){return r.c}),n.d(e,"d",function(){return r.d}),n.d(e,"e",function(){return r.e}),n(295),n(296),n(610)},function(t,e,n){"use strict";function r(t,e,n){return n||t+(e?"_"+e:"")}function i(t,e){return l[t](e)}function a(t){return function(e){var n=Object(c.extend)({init:"",add:"",rem:"",idx:0},t);return n.out=e||t.name,n}}function o(t,e){return t.idx-e.idx}function s(t,e){function n(t,r){function i(e){t[e]||n(t,t[e]=l[e]())}return r.req&&r.req.forEach(i),e&&r.str&&r.str.forEach(i),t}var r,i=t.reduce(n,t.reduce(function(t,e){return t[e.name]=e,t},{})),a=[];for(r in i)a.push(i[r]);return a.sort(o)}function u(t,e){var n=e||c.identity,r=s(t,!0),i="var cell = this.cell; this.valid = 0; this.missing = 0;",a="this.cell = cell; this.init();",u="if(v==null){++this.missing; return;} if(v!==v) return; ++this.valid;",l="if(v==null){--this.missing; return;} if(v!==v) return; --this.valid;",f="var cell = this.cell;";return r.forEach(function(t){i+=t.init,u+=t.add,l+=t.rem}),t.slice().sort(o).forEach(function(t){f+="t['"+t.out+"']="+t.set+";"}),f+="return t;",a=Function("cell",a),a.prototype.init=Function(i),a.prototype.add=Function("v","t",u),a.prototype.rem=Function("v","t",l),a.prototype.set=Function("t",f),a.prototype.get=n,a.fields=t.map(function(t){return t.out}),a}e.d=r,n.d(e,"a",function(){return f}),e.c=i,e.b=u;var c=n(0),l={values:a({name:"values",init:"cell.store = true;",set:"cell.data.values()",idx:-1}),count:a({name:"count",set:"cell.num"}),__count__:a({name:"count",set:"this.missing + this.valid"}),missing:a({name:"missing",set:"this.missing"}),valid:a({name:"valid",set:"this.valid"}),sum:a({name:"sum",init:"this.sum = 0;",add:"this.sum += v;",rem:"this.sum -= v;",set:"this.sum"}),mean:a({name:"mean",init:"this.mean = 0;",add:"var d = v - this.mean; this.mean += d / this.valid;",rem:"var d = v - this.mean; this.mean -= this.valid ? d / this.valid : this.mean;",set:"this.mean"}),average:a({name:"average",set:"this.mean",req:["mean"],idx:1}),variance:a({name:"variance",init:"this.dev = 0;",add:"this.dev += d * (v - this.mean);",rem:"this.dev -= d * (v - this.mean);",set:"this.valid > 1 ? this.dev / (this.valid-1) : 0",req:["mean"],idx:1}),variancep:a({name:"variancep",set:"this.valid > 1 ? this.dev / this.valid : 0",req:["variance"],idx:2}),stdev:a({name:"stdev",set:"this.valid > 1 ? Math.sqrt(this.dev / (this.valid-1)) : 0",req:["variance"],idx:2}),stdevp:a({name:"stdevp",set:"this.valid > 1 ? Math.sqrt(this.dev / this.valid) : 0",req:["variance"],idx:2}),stderr:a({name:"stderr",set:"this.valid > 1 ? Math.sqrt(this.dev / (this.valid * (this.valid-1))) : 0",req:["variance"],idx:2}),distinct:a({name:"distinct",set:"cell.data.distinct(this.get)",req:["values"],idx:3}),ci0:a({name:"ci0",set:"cell.data.ci0(this.get)",req:["values"],idx:3}),ci1:a({name:"ci1",set:"cell.data.ci1(this.get)",req:["values"],idx:3}),median:a({name:"median",set:"cell.data.q2(this.get)",req:["values"],idx:3}),q1:a({name:"q1",set:"cell.data.q1(this.get)",req:["values"],idx:3}),q3:a({name:"q3",set:"cell.data.q3(this.get)",req:["values"],idx:3}),argmin:a({name:"argmin",init:"this.argmin = null;",add:"if (v < this.min) this.argmin = t;",rem:"if (v <= this.min) this.argmin = null;",set:"this.argmin || cell.data.argmin(this.get)",req:["min"],str:["values"],idx:3}),argmax:a({name:"argmax",init:"this.argmax = null;",add:"if (v > this.max) this.argmax = t;",rem:"if (v >= this.max) this.argmax = null;",set:"this.argmax || cell.data.argmax(this.get)",req:["max"],str:["values"],idx:3}),min:a({name:"min",init:"this.min = null;",add:"if (v < this.min || this.min === null) this.min = v;",rem:"if (v <= this.min) this.min = NaN;",set:"this.min = (isNaN(this.min) ? cell.data.min(this.get) : this.min)",str:["values"],idx:4}),max:a({name:"max",init:"this.max = null;",add:"if (v > this.max || this.max === null) this.max = v;",rem:"if (v >= this.max) this.max = NaN;",set:"this.max = (isNaN(this.max) ? cell.data.max(this.get) : this.max)",str:["values"],idx:4})},f=Object.keys(l)},function(t,e,n){"use strict";function r(t){return t>1?0:t<-1?d:Math.acos(t)}function i(t){return t>=1?p:t<=-1?-p:Math.asin(t)}n.d(e,"a",function(){return a}),n.d(e,"d",function(){return o}),n.d(e,"e",function(){return s}),n.d(e,"h",function(){return u}),n.d(e,"i",function(){return c}),n.d(e,"k",function(){return l}),n.d(e,"l",function(){return f}),n.d(e,"f",function(){return h}),n.d(e,"j",function(){return d}),n.d(e,"g",function(){return p}),n.d(e,"m",function(){return v}),e.b=r,e.c=i;var a=Math.abs,o=Math.atan2,s=Math.cos,u=Math.max,c=Math.min,l=Math.sin,f=Math.sqrt,h=1e-12,d=Math.PI,p=d/2,v=2*d},function(t,e,n){"use strict";e.a=function(t,e){if((i=t.length)>1)for(var n,r,i,a=1,o=t[e[0]],s=o.length;a<i;++a)for(r=o,o=t[e[a]],n=0;n<s;++n)o[n][1]+=o[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]}},function(t,e,n){"use strict";e.a=function(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}},function(t,e,n){"use strict";function r(t){return o=t,r}function i(){}function a(t,e){o.add(t,e)}e.a=r;var o,s=2*Math.PI,u=s/4,c=s-1e-8;r.beginPath=i,r.closePath=i,r.moveTo=a,r.lineTo=a,r.rect=function(t,e,n,r){a(t,e),a(t+n,e+r)},r.quadraticCurveTo=function(t,e,n,r){a(t,e),a(n,r)},r.bezierCurveTo=function(t,e,n,r,i,o){a(t,e),a(n,r),a(i,o)},r.arc=function(t,e,n,r,i,o){function l(t){d=n*Math.cos(t),p=n*Math.sin(t),d<v&&(v=d),d>g&&(g=d),p<b&&(b=p),p>m&&(m=p)}if(Math.abs(i-r)>c)return a(t-n,e-n),void a(t+n,e+n);var f,h,d,p,v=1/0,g=-1/0,b=1/0,m=-1/0;if(l(r),l(i),i!==r)if(r%=s,r<0&&(r+=s),i%=s,i<0&&(i+=s),i<r&&(o=!o,f=r,r=i,i=f),o)for(i-=s,f=r-r%u,h=0;h<4&&f>i;++h,f-=u)l(f);else for(f=r-r%u+u,h=0;h<4&&f<i;++h,f+=u)l(f);a(t+v,e+b),a(t+g,e+m)}},function(t,e,n){"use strict";function r(t,e){var n;return Object(d.isObject)(e)&&(n=e.step,e=e.interval),Object(d.isString)(e)&&(e="time"===t.type?Object(h.g)(e):"utc"===t.type?Object(h.h)(e):Object(d.error)("Only time and utc scales accept interval strings."),n&&(e=e.every(n))),e}function i(t,e,n){var r=t.range(),i=r[0],a=Object(d.peek)(r);if(i>a&&(r=a,a=i,i=r),e=e.filter(function(e){return!((e=t(e))<i||e>a)}),n>0&&e.length>1){for(var o=[e[0],Object(d.peek)(e)];e.length>n&&e.length>=3;)e=e.filter(function(t,e){return!(e%2)});e.length<3&&(e=o)}return e}function a(t,e){return t.ticks?t.ticks(e):t.domain()}function o(t,e,n){var r=t.tickFormat?t.tickFormat(e,n):String;return t.type===f.e?s(r,u(n)):r}function s(t,e){return function(n){return t(n)?e(n):""}}function u(t){var e=Object(p.formatSpecifier)(t||",");if(null==e.precision){switch(e.precision=12,e.type){case"%":e.precision-=2;break;case"e":e.precision-=1}return c(Object(p.format)(e),Object(p.format)(".1f")(1)[1])}return Object(p.format)(e)}function c(t,e){return function(n){var r,i,a=t(n),o=a.indexOf(e);if(o<0)return a;for(r=l(a,o),i=r<a.length?a.slice(r):"";--r>o;)if("0"!==a[r]){++r;break}return a.slice(0,r)+i}}function l(t,e){var n,r=t.lastIndexOf("e");if(r>0)return r;for(r=t.length;--r>e;)if((n=t.charCodeAt(r))>=48&&n<=57)return r+1}e.a=r,e.d=i,e.c=a,e.b=o;var f=n(198),h=n(55),d=n(0),p=n(63)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(720);n.d(e,"scaleBand",function(){return r.a}),n.d(e,"scalePoint",function(){return r.b});var i=n(721);n.d(e,"scaleIdentity",function(){return i.a});var a=n(84);n.d(e,"scaleLinear",function(){return a.a});var o=n(744);n.d(e,"scaleLog",function(){return o.a});var s=n(346);n.d(e,"scaleOrdinal",function(){return s.a}),n.d(e,"scaleImplicit",function(){return s.b});var u=n(745);n.d(e,"scalePow",function(){return u.a}),n.d(e,"scaleSqrt",function(){return u.b});var c=n(746);n.d(e,"scaleQuantile",function(){return c.a});var l=n(747);n.d(e,"scaleQuantize",function(){return l.a});var f=n(748);n.d(e,"scaleThreshold",function(){return f.a});var h=n(361);n.d(e,"scaleTime",function(){return h.b});var d=n(749);n.d(e,"scaleUtc",function(){return d.a});var p=n(750);n.d(e,"scaleSequential",function(){return p.a})},function(t,e,n){"use strict";function r(t){var e=t.domain;return t.ticks=function(t){var n=e();return Object(a.ticks)(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){return Object(u.a)(e(),t,n)},t.nice=function(n){null==n&&(n=10);var r,i=e(),o=0,s=i.length-1,u=i[o],c=i[s];return c<u&&(r=u,u=c,c=r,r=o,o=s,s=r),r=Object(a.tickIncrement)(u,c,n),r>0?(u=Math.floor(u/r)*r,c=Math.ceil(c/r)*r,r=Object(a.tickIncrement)(u,c,n)):r<0&&(u=Math.ceil(u*r)/r,c=Math.floor(c*r)/r,r=Object(a.tickIncrement)(u,c,n)),r>0?(i[o]=Math.floor(u/r)*r,i[s]=Math.ceil(c/r)*r,e(i)):r<0&&(i[o]=Math.ceil(u*r)/r,i[s]=Math.floor(c*r)/r,e(i)),t},t}function i(){var t=Object(s.b)(s.c,o.interpolateNumber);return t.copy=function(){return Object(s.a)(t,i())},r(t)}e.b=r,e.a=i;var a=n(9),o=n(39),s=n(126),u=n(734)},function(t,e,n){"use strict";function r(t,e){return function(n){return t+n*e}}function i(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function a(t,e){var n=e-t;return n?r(t,n>180||n<-180?n-360*Math.round(n/360):n):Object(u.a)(isNaN(t)?e:t)}function o(t){return 1==(t=+t)?s:function(e,n){return n-e?i(e,n,t):Object(u.a)(isNaN(e)?n:e)}}function s(t,e){var n=e-t;return n?r(t,n):Object(u.a)(isNaN(t)?e:t)}e.c=a,e.b=o,e.a=s;var u=n(350)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(367);n.d(e,"geoArea",function(){return r.c});var i=n(817);n.d(e,"geoBounds",function(){return i.a});var a=n(818);n.d(e,"geoCentroid",function(){return a.a});var o=n(368);n.d(e,"geoCircle",function(){return o.b});var s=n(370);n.d(e,"geoClipAntimeridian",function(){return s.a});var u=n(376);n.d(e,"geoClipCircle",function(){return u.a});var c=n(820);n.d(e,"geoClipExtent",function(){return c.a});var l=n(130);n.d(e,"geoClipRectangle",function(){return l.a});var f=n(822);n.d(e,"geoContains",function(){return f.a});var h=n(377);n.d(e,"geoDistance",function(){return h.a});var d=n(823);n.d(e,"geoGraticule",function(){return d.a}),n.d(e,"geoGraticule10",function(){return d.b});var p=n(824);n.d(e,"geoInterpolate",function(){return p.a});var v=n(378);n.d(e,"geoLength",function(){return v.a});var g=n(825);n.d(e,"geoPath",function(){return g.a});var b=n(380);n.d(e,"geoAlbers",function(){return b.a});var m=n(833);n.d(e,"geoAlbersUsa",function(){return m.a});var y=n(834);n.d(e,"geoAzimuthalEqualArea",function(){return y.b}),n.d(e,"geoAzimuthalEqualAreaRaw",function(){return y.a});var _=n(835);n.d(e,"geoAzimuthalEquidistant",function(){return _.b}),n.d(e,"geoAzimuthalEquidistantRaw",function(){return _.a});var O=n(836);n.d(e,"geoConicConformal",function(){return O.b}),n.d(e,"geoConicConformalRaw",function(){return O.a});var w=n(206);n.d(e,"geoConicEqualArea",function(){return w.b}),n.d(e,"geoConicEqualAreaRaw",function(){return w.a});var x=n(837);n.d(e,"geoConicEquidistant",function(){return x.b}),n.d(e,"geoConicEquidistantRaw",function(){return x.a});var j=n(381);n.d(e,"geoEquirectangular",function(){return j.a}),n.d(e,"geoEquirectangularRaw",function(){return j.b});var M=n(838);n.d(e,"geoGnomonic",function(){return M.a}),n.d(e,"geoGnomonicRaw",function(){return M.b});var k=n(839);n.d(e,"geoIdentity",function(){return k.a});var S=n(34);n.d(e,"geoProjection",function(){return S.a}),n.d(e,"geoProjectionMutator",function(){return S.b});var E=n(209);n.d(e,"geoMercator",function(){return E.a}),n.d(e,"geoMercatorRaw",function(){return E.c});var A=n(840);n.d(e,"geoNaturalEarth1",function(){return A.a}),n.d(e,"geoNaturalEarth1Raw",function(){return A.b});var P=n(841);n.d(e,"geoOrthographic",function(){return P.a}),n.d(e,"geoOrthographicRaw",function(){return P.b});var T=n(842);n.d(e,"geoStereographic",function(){return T.a}),n.d(e,"geoStereographicRaw",function(){return T.b});var N=n(843);n.d(e,"geoTransverseMercator",function(){return N.a}),n.d(e,"geoTransverseMercatorRaw",function(){return N.b});var C=n(129);n.d(e,"geoRotation",function(){return C.a});var R=n(57);n.d(e,"geoStream",function(){return R.a});var D=n(131);n.d(e,"geoTransform",function(){return D.a})},function(t,e,n){"use strict";function r(t){return[Object(l.e)(t[1],t[0]),Object(l.c)(t[2])]}function i(t){var e=t[0],n=t[1],r=Object(l.g)(n);return[r*Object(l.g)(e),r*Object(l.t)(e),Object(l.t)(n)]}function a(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function o(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function s(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function u(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function c(t){var e=Object(l.u)(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}e.g=r,e.a=i,e.d=a,e.c=o,e.b=s,e.f=u,e.e=c;var l=n(5)},function(t,e,n){"use strict";function r(t){return function(e,n){var r=Object(a.g)(e),i=Object(a.g)(n),o=t(r*i);return[o*i*Object(a.t)(e),o*Object(a.t)(n)]}}function i(t){return function(e,n){var r=Object(a.u)(e*e+n*n),i=t(r),o=Object(a.t)(i),s=Object(a.g)(i);return[Object(a.e)(e*o,r*s),Object(a.c)(r&&n*o/r)]}}e.b=r,e.a=i;var a=n(5)},function(t,e,n){"use strict";e.a=function(t,e,n,r,i){for(var a,o=t.children,s=-1,u=o.length,c=t.value&&(r-e)/t.value;++s<u;)a=o[s],a.y0=n,a.y1=i,a.x0=e,a.x1=e+=a.value*c}},function(t,e,n){"use strict";function r(t,e,n){return(t[0]-n[0])*(e[1]-t[1])-(t[0]-e[0])*(n[1]-t[1])}function i(t,e){return e[1]-t[1]||e[0]-t[0]}function a(t,e){var n,r,a,v=t.sort(i).pop();for(c=[],s=new Array(t.length),o=new p.b,u=new p.b;;)if(a=h.c,v&&(!a||v[1]<a.y||v[1]===a.y&&v[0]<a.x))v[0]===n&&v[1]===r||(Object(l.a)(v),n=v[0],r=v[1]),v=t.pop();else{if(!a)break;Object(l.b)(a.arc)}if(Object(f.d)(),e){var g=+e[0][0],b=+e[0][1],m=+e[1][0],y=+e[1][1];Object(d.a)(g,b,m,y),Object(f.b)(g,b,m,y)}this.edges=c,this.cells=s,o=u=c=s=null}n.d(e,"f",function(){return v}),n.d(e,"g",function(){return g}),n.d(e,"a",function(){return o}),n.d(e,"b",function(){return s}),n.d(e,"c",function(){return u}),n.d(e,"e",function(){return c}),e.d=a;var o,s,u,c,l=n(908),f=n(389),h=n(390),d=n(217),p=n(216),v=1e-6,g=1e-12;a.prototype={constructor:a,polygons:function(){var t=this.edges;return this.cells.map(function(e){var n=e.halfedges.map(function(n){return Object(f.a)(e,t[n])});return n.data=e.site.data,n})},triangles:function(){var t=[],e=this.edges;return this.cells.forEach(function(n,i){if(o=(a=n.halfedges).length)for(var a,o,s,u=n.site,c=-1,l=e[a[o-1]],f=l.left===u?l.right:l.left;++c<o;)s=f,l=e[a[c]],f=l.left===u?l.right:l.left,s&&f&&i<s.index&&i<f.index&&r(u,s,f)<0&&t.push([u.data,s.data,f.data])}),t},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(t,e,n){for(var r,i,a=this,o=a._found||0,s=a.cells.length;!(i=a.cells[o]);)if(++o>=s)return null;var u=t-i.site[0],c=e-i.site[1],l=u*u+c*c;do{i=a.cells[r=o],o=null,i.halfedges.forEach(function(n){var r=a.edges[n],s=r.left;if(s!==i.site&&s||(s=r.right)){var u=t-s[0],c=e-s[1],f=u*u+c*c;f<l&&(l=f,o=s.index)}})}while(null!==o);return a._found=r,null==n||l<=n*n?i.site:null}}},function(t,e,n){"use strict";function r(t,e,n,r,i){this.scope=t,this.input=e,this.output=n,this.values=r,this.aggregate=i,this.index={}}function i(t){return Object(c.isString)(t)?t:null}function a(t,e,n){var r,i=Object(s.c)(n.op,n.field);if(e.ops){for(var a=0,o=e.as.length;a<o;++a)if(e.as[a]===i)return}else e.ops=["count"],e.fields=[null],e.as=["count"];n.op&&(e.ops.push((r=n.op.signal)?t.signalRef(r):n.op),e.fields.push(t.fieldRef(n.field)),e.as.push(i))}function o(t,e,n,r,a,o,u){var c,l,f=e[n]||(e[n]={}),h=Object(s.l)(o),d=i(a);if(null!=d&&(t=e.scope,d+=h?"|"+h:"",c=f[d]),!c){var p=o?{field:s.h,pulse:e.countsRef(t,a,o)}:{field:t.fieldRef(a),pulse:Object(s.k)(e.output)};h&&(p.sort=t.sortRef(o)),l=t.add(Object(s.e)(r,void 0,p)),u&&(e.index[a]=l),c=Object(s.k)(l),null!=d&&(f[d]=c)}return c}e.a=r;var s=n(21),u=n(27),c=n(0);r.fromEntries=function(t,e){var n=e.length,i=1,a=e[0],o=e[n-1],u=e[n-2],c=null;for(t.add(e[0]);i<n;++i)e[i].params.pulse=Object(s.k)(e[i-1]),t.add(e[i]),"aggregate"===e[i].type&&(c=e[i]);return new r(t,a,u,o,c)};var l=r.prototype;l.countsRef=function(t,e,n){var r,o,c,l=this,f=l.counts||(l.counts={}),h=i(e);return null!=h&&(t=l.scope,r=f[h]),r?n&&n.field&&a(t,r.agg.params,n):(c={groupby:t.fieldRef(e,"key"),pulse:Object(s.k)(l.output)},n&&n.field&&a(t,c,n),o=t.add(Object(u.a)(c)),r=t.add(Object(u.d)({pulse:Object(s.k)(o)})),r={agg:o,ref:Object(s.k)(r)},null!=h&&(f[h]=r)),r.ref},l.tuplesRef=function(){return Object(s.k)(this.values)},l.extentRef=function(t,e){return o(t,this,"extent","extent",e,!1)},l.domainRef=function(t,e){return o(t,this,"domain","values",e,!1)},l.valuesRef=function(t,e,n){return o(t,this,"vals","values",e,n||!0)},l.lookupRef=function(t,e){return o(t,this,"lookup","tupleindex",e,!1)},l.indataRef=function(t,e){return o(t,this,"indata","tupleindex",e,!0,!0)}},function(t,e,n){"use strict";function r(t,e,n){";"!==e[e.length-1]&&(e="return("+e+");");var r=Function.apply(null,t.concat(e));return n&&n.functions?r.bind(n.functions):r}function i(t,e){return r(["_"],t,e)}function a(t,e){return r(["datum","_"],t,e)}function o(t,e){return r(["event"],t,e)}function s(t,e){return r(["_","event"],t,e)}function u(t,e){return r(["item","_"],t,e)}e.d=i,e.e=a,e.b=o,e.c=s,e.a=u},function(t,e,n){"use strict";function r(t){return!!s[t]}function i(t){return t&&o.contains(e.COUNTING_OPS,t)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),o=n(2),s={argmax:1,argmin:1,average:1,count:1,distinct:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1};e.AGGREGATE_OPS=o.flagKeys(s),e.isAggregateOp=r,e.COUNTING_OPS=["count","valid","missing","distinct"],e.isCountingAggregateOp=i,e.SUM_OPS=["count","sum","distinct","valid","missing"],e.SHARED_DOMAIN_OPS=["mean","average","median","q1","q3","min","max"],e.SHARED_DOMAIN_OP_INDEX=a.toSet(e.SHARED_DOMAIN_OPS)},function(t,e,n){"use strict";function r(t){return a.isBoolean(t)?"bin":"bin"+s.keys(t).map(function(e){return s.varName("_"+e+"_"+t[e])}).join("")}function i(t){switch(t){case o.ROW:case o.COLUMN:case o.SIZE:case o.COLOR:case o.FILL:case o.STROKE:case o.OPACITY:case o.SHAPE:return 6;default:return 10}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),o=n(6),s=n(2);e.binToString=r,e.autoMaxBins=i},function(t,e,n){"use strict";function r(t){return!!_[t]}function i(t){return!!O[t]}function a(t){return!!j[t]}function o(t){return t.substr(3)}function s(t){return!!M[t]}function u(t,n){for(var r=a(t),i=r?new Date(Date.UTC(0,0,1,0,0,0,0)):new Date(0,0,1,0,0,0,0),o=0,s=e.TIMEUNIT_PARTS;o<s.length;o++){var u=s[o];if(f(t,u))switch(u){case g.DAY:throw new Error("Cannot convert to TimeUnits containing 'day'");case g.QUARTER:var l=c("month",r),h=l.getDateMethod;i[l.setDateMethod](3*Math.floor(n[h]()/3));break;default:var d=c(u,r),p=d.getDateMethod;i[d.setDateMethod](n[p]())}}return i}function c(t,e){var n=k[t];return{setDateMethod:e?"setUTC"+n.substr(3):n,getDateMethod:"get"+(e?"UTC":"")+n.substr(3)}}function l(t){return e.TIMEUNIT_PARTS.reduce(function(e,n){return f(t,n)?e.concat(n):e},[])}function f(t,e){var n=t.indexOf(e);return n>-1&&(e!==g.SECONDS||0===n||"i"!==t.charAt(n-1))}function h(t,n){function r(t){return t===g.QUARTER?"("+o+"quarter("+i+")-1)":""+o+t+"("+i+")"}var i="datum"+y.accessPath(n),o=a(t)?"utc":"",s=e.TIMEUNIT_PARTS.reduce(function(e,n){return f(t,n)&&(e[n]=r(n)),e},{});return b.dateTimeExpr(s)}function d(t,e,n,r){if(t){var i=[],a="",o=f(t,g.YEAR);f(t,g.QUARTER)&&(a="'Q' + quarter("+e+")"),f(t,g.MONTH)&&i.push(!1!==n?"%b":"%B"),f(t,g.DAY)?i.push(n?"%a":"%A"):f(t,g.DATE)&&i.push("%d"+(o?",":"")),o&&i.push(n?"%y":"%Y");var s=[];f(t,g.HOURS)&&s.push("%H"),f(t,g.MINUTES)&&s.push("%M"),f(t,g.SECONDS)&&s.push("%S"),f(t,g.MILLISECONDS)&&s.push("%L");var u=[];return i.length>0&&u.push(i.join(" ")),s.length>0&&u.push(s.join(":")),u.length>0&&(a&&(a+=" + ' ' + "),a+=r?"utcFormat("+e+", '"+u.join(" ")+"')":"timeFormat("+e+", '"+u.join(" ")+"')"),a||void 0}}function p(t){return"day"!==t&&t.indexOf("day")>=0?(m.warn(m.message.dayReplacedWithDate(t)),t.replace("day","date")):t}var v=this&&this.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t};Object.defineProperty(e,"__esModule",{value:!0});var g,b=n(59),m=n(3),y=n(2);!function(t){t.YEAR="year",t.MONTH="month",t.DAY="day",t.DATE="date",t.HOURS="hours",t.MINUTES="minutes",t.SECONDS="seconds",t.MILLISECONDS="milliseconds",t.YEARMONTH="yearmonth",t.YEARMONTHDATE="yearmonthdate",t.YEARMONTHDATEHOURS="yearmonthdatehours",t.YEARMONTHDATEHOURSMINUTES="yearmonthdatehoursminutes",t.YEARMONTHDATEHOURSMINUTESSECONDS="yearmonthdatehoursminutesseconds",t.MONTHDATE="monthdate",t.HOURSMINUTES="hoursminutes",t.HOURSMINUTESSECONDS="hoursminutesseconds",t.MINUTESSECONDS="minutesseconds",t.SECONDSMILLISECONDS="secondsmilliseconds",t.QUARTER="quarter",t.YEARQUARTER="yearquarter",t.QUARTERMONTH="quartermonth",t.YEARQUARTERMONTH="yearquartermonth",t.UTCYEAR="utcyear",t.UTCMONTH="utcmonth",t.UTCDAY="utcday",t.UTCDATE="utcdate",t.UTCHOURS="utchours",t.UTCMINUTES="utcminutes",t.UTCSECONDS="utcseconds",t.UTCMILLISECONDS="utcmilliseconds",t.UTCYEARMONTH="utcyearmonth",t.UTCYEARMONTHDATE="utcyearmonthdate",t.UTCYEARMONTHDATEHOURS="utcyearmonthdatehours",t.UTCYEARMONTHDATEHOURSMINUTES="utcyearmonthdatehoursminutes",t.UTCYEARMONTHDATEHOURSMINUTESSECONDS="utcyearmonthdatehoursminutesseconds",t.UTCMONTHDATE="utcmonthdate",t.UTCHOURSMINUTES="utchoursminutes",t.UTCHOURSMINUTESSECONDS="utchoursminutesseconds",t.UTCMINUTESSECONDS="utcminutesseconds",t.UTCSECONDSMILLISECONDS="utcsecondsmilliseconds",t.UTCQUARTER="utcquarter",t.UTCYEARQUARTER="utcyearquarter",t.UTCQUARTERMONTH="utcquartermonth",t.UTCYEARQUARTERMONTH="utcyearquartermonth"}(g=e.TimeUnit||(e.TimeUnit={}));var _={year:1,quarter:1,month:1,day:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};e.TIMEUNIT_PARTS=y.flagKeys(_),e.isLocalSingleTimeUnit=r;var O={utcyear:1,utcquarter:1,utcmonth:1,utcday:1,utcdate:1,utchours:1,utcminutes:1,utcseconds:1,utcmilliseconds:1};e.isUtcSingleTimeUnit=i;var w={yearquarter:1,yearquartermonth:1,yearmonth:1,yearmonthdate:1,yearmonthdatehours:1,yearmonthdatehoursminutes:1,yearmonthdatehoursminutesseconds:1,quartermonth:1,monthdate:1,hoursminutes:1,hoursminutesseconds:1,minutesseconds:1,secondsmilliseconds:1},x={utcyearquarter:1,utcyearquartermonth:1,utcyearmonth:1,utcyearmonthdate:1,utcyearmonthdatehours:1,utcyearmonthdatehoursminutes:1,utcyearmonthdatehoursminutesseconds:1,utcquartermonth:1,utcmonthdate:1,utchoursminutes:1,utchoursminutesseconds:1,utcminutesseconds:1,utcsecondsmilliseconds:1},j=v({},O,x);e.isUTCTimeUnit=a,e.getLocalTimeUnit=o;var M=v({},_,O,w,x);e.TIMEUNITS=y.flagKeys(M),e.isTimeUnit=s;var k={year:"setFullYear",month:"setMonth",date:"setDate",hours:"setHours",minutes:"setMinutes",seconds:"setSeconds",milliseconds:"setMilliseconds",quarter:null,day:null};e.convert=u,e.getTimeUnitParts=l,e.containsTimeUnit=f,e.fieldExpr=h,e.formatExpression=d,e.normalizeTimeUnit=p},function(t,e,n){"use strict";function r(t){return t&&t.selection}function i(t){return t&&!!t.field&&void 0!==t.equal}function a(t){return!!(t&&t.field&&d.isArray(t.range)&&2===t.range.length)}function o(t){return t&&!!t.field&&(d.isArray(t.oneOf)||d.isArray(t.in))}function s(t){return o(t)||i(t)||a(t)}function u(t,e,n){return m.logicalExpr(e,function(e){return d.isString(e)?e:r(e)?p.selectionPredicate(t,e.selection,n):c(e)})}function c(t,e){void 0===e&&(e=!0);var n=t.timeUnit?"time("+b.fieldExpr(t.timeUnit,t.field)+")":g.vgField(t,{expr:"datum"});if(i(t))return n+"==="+l(t.equal,t.timeUnit);if(o(t))return"indexof(["+(t.oneOf||t.in).map(function(e){return l(e,t.timeUnit)}).join(",")+"], "+n+") !== -1";if(a(t)){var r=t.range[0],s=t.range[1];if(null!==r&&null!==s&&e)return"inrange("+n+", ["+l(r,t.timeUnit)+", "+l(s,t.timeUnit)+"])";var u=[];return null!==r&&u.push(n+" >= "+l(r,t.timeUnit)),null!==s&&u.push(n+" <= "+l(s,t.timeUnit)),u.length>0?u.join(" && "):"true"}throw new Error("Invalid field predicate: "+JSON.stringify(t))}function l(t,e){if(v.isDateTime(t)){var n=v.dateTimeExpr(t,!0);return"time("+n+")"}if(b.isLocalSingleTimeUnit(e)){var r={};r[e]=t;var n=v.dateTimeExpr(r,!0);return"time("+n+")"}return b.isUtcSingleTimeUnit(e)?l(t,b.getLocalTimeUnit(e)):JSON.stringify(t)}function f(t){return s(t)&&t.timeUnit?h({},t,{timeUnit:b.normalizeTimeUnit(t.timeUnit)}):t}var h=this&&this.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t};Object.defineProperty(e,"__esModule",{value:!0});var d=n(0),p=n(18),v=n(59),g=n(7),b=n(95),m=n(2);e.isSelectionPredicate=r,e.isFieldEqualPredicate=i,e.isFieldRangePredicate=a,e.isFieldOneOfPredicate=o,e.isFieldPredicate=s,e.expression=u,e.fieldFilterExpression=c,e.normalizePredicate=f},function(t,e,n){"use strict";function r(t){T.isUnitModel(t)?i(t):a(t)}function i(t){var e=t.specifiedScales,n=t.component.scales;k.keys(n).forEach(function(r){var i=e[r],a=i?i.domain:void 0,o=s(t,r),u=n[r];if(u.domains=o,x.isSelectionDomain(a)&&u.set("domainRaw",{signal:N.SELECTION_DOMAIN+M.hash(a)},!0),t.component.data.isFaceted){for(var c=t;!T.isFacetModel(c)&&c.parent;)c=c.parent;if("shared"===c.component.resolve.scale[r])for(var l=0,f=o;l<f.length;l++){var h=f[l];E.isDataRefDomain(h)&&(h.data=P.FACET_SCALE_PREFIX+h.data.replace(P.FACET_SCALE_PREFIX,""))}}})}function a(t){for(var e=0,n=t.children;e<n.length;e++)r(n[e]);var i=t.component.scales;k.keys(i).forEach(function(e){for(var n,r=0,a=t.children;r<a.length;r++){var o=a[r],s=o.component.scales[e];s&&(n=void 0===n?s.domains:n.concat(s.domains))}i[e].domains=n})}function o(t,e,n,r){if("unaggregated"===t){var i=l(e,n),a=i.valid,o=i.reason;if(!a)return void w.warn(o)}else if(void 0===t&&r.useUnaggregatedDomain){var a=l(e,n).valid;if(a)return"unaggregated"}return t}function s(t,e){var n=t.getScaleComponent(e).get("type"),r=o(t.scaleDomain(e),t.fieldDef(e),n,t.config.scale);return r!==t.scaleDomain(e)&&(t.specifiedScales[e]=p({},t.specifiedScales[e],{domain:r})),"x"===e&&t.channelHasField("x2")?t.channelHasField("x")?u(n,r,t,"x").concat(u(n,r,t,"x2")):u(n,r,t,"x2"):"y"===e&&t.channelHasField("y2")?t.channelHasField("y")?u(n,r,t,"y").concat(u(n,r,t,"y2")):u(n,r,t,"y2"):u(n,r,t,e)}function u(t,e,n,r){var i=n.fieldDef(r);if(e&&"unaggregated"!==e&&!x.isSelectionDomain(e)){if(!i.bin)return O.isDateTime(e[0])?e.map(function(t){return{signal:"{data: "+O.dateTimeExpr(t,!0)+"}"}}):[e];w.warn(w.message.conflictedDomain(r))}var a=n.stack;if(a&&r===a.fieldChannel){if("normalize"===a.offset)return[[0,1]];var o=n.requestDataName(_.MAIN);return[{data:o,field:n.vgField(r,{suffix:"start"})},{data:o,field:n.vgField(r,{suffix:"end"})}]}var s=y.isScaleChannel(r)?c(n,r,t):void 0;if("unaggregated"===e){var o=n.requestDataName(_.MAIN);return[{data:o,field:n.vgField(r,{aggregate:"min"})},{data:o,field:n.vgField(r,{aggregate:"max"})}]}if(i.bin){if(x.isBinScale(t)){var u=n.getName(m.binToString(i.bin)+"_"+i.field+"_bins");return[{signal:"sequence("+u+".start, "+u+".stop + "+u+".step, "+u+".step)"}]}if(x.hasDiscreteDomain(t))return[{data:k.isBoolean(s)?n.requestDataName(_.MAIN):n.requestDataName(_.RAW),field:n.vgField(r,A.binRequiresRange(i,r)?{binSuffix:"range"}:{}),sort:!0!==s&&j.isSortField(s)?s:{field:n.vgField(r,{}),op:"min"}}];if("x"===r||"y"===r){var o=n.requestDataName(_.MAIN);return[{data:o,field:n.vgField(r,{})},{data:o,field:n.vgField(r,{binSuffix:"end"})}]}return[{data:n.requestDataName(_.MAIN),field:n.vgField(r,{})}]}return s?[{data:k.isBoolean(s)?n.requestDataName(_.MAIN):n.requestDataName(_.RAW),field:n.vgField(r),sort:s}]:[{data:n.requestDataName(_.MAIN),field:n.vgField(r)}]}function c(t,e,n){if(x.hasDiscreteDomain(n)){var r=t.sort(e);return j.isSortField(r)?r:"descending"===r?{op:"min",field:t.vgField(e),order:"descending"}:!!k.contains(["ascending",void 0],r)||void 0}}function l(t,e){return t.aggregate?b.SHARED_DOMAIN_OP_INDEX[t.aggregate]?"quantitative"===t.type&&"log"===e?{valid:!1,reason:w.message.unaggregatedDomainWithLogScale(t)}:{valid:!0}:{valid:!1,reason:w.message.unaggregateDomainWithNonSharedDomainOp(t.aggregate)}:{valid:!1,reason:w.message.unaggregateDomainHasNoEffectForRawField(t)}}function f(t){var e=k.unique(t.map(function(t){return E.isDataRefDomain(t)?(t.sort,v(t,["sort"])):t}),k.hash),n=k.unique(t.map(function(t){if(E.isDataRefDomain(t)){var e=t.sort;return void 0===e||k.isBoolean(e)||("count"===e.op&&delete e.field,"ascending"===e.order&&delete e.order),e}}).filter(function(t){return void 0!==t}),k.hash);if(1===e.length){var r=t[0];if(E.isDataRefDomain(r)&&n.length>0){var i=n[0];return n.length>1&&(w.warn(w.message.MORE_THAN_ONE_SORT),i=!0),p({},r,{sort:i})}return r}var a=k.unique(n.map(function(t){return!0===t?t:"count"===t.op?t:(w.warn(w.message.domainSortDropped(t)),!0)}),k.hash),o=void 0;1===a.length?o=a[0]:a.length>1&&(w.warn(w.message.MORE_THAN_ONE_SORT),o=!0);var s=k.unique(t.map(function(t){return E.isDataRefDomain(t)?t.data:null}),function(t){return t});if(1===s.length&&null!==s[0]){var r=p({data:s[0],fields:e.map(function(t){return t.field})},o?{sort:o}:{});return r}return p({fields:e},o?{sort:o}:{})}function h(t){if(E.isDataRefDomain(t)&&g.isString(t.field))return t.field;if(S.isDataRefUnionedDomain(t)){for(var e=void 0,n=0,r=t.fields;n<r.length;n++){var i=r[n];if(E.isDataRefDomain(i)&&g.isString(i.field))if(e){if(e!==i.field)return w.warn("Detected faceted independent scales that union domain of multiple fields from different data sources.  We will use the first field.  The result view size may be incorrect."),e}else e=i.field}return w.warn("Detected faceted independent scales that union domain of identical fields from different source detected.  We will assume that this is the same field from a different fork of the same data source.  However, if this is not case, the result view size maybe incorrect."),e}if(S.isFieldRefUnionDomain(t)){w.warn("Detected faceted independent scales that union domain of multiple fields from the same data source.  We will use the first field.  The result view size may be incorrect.");var e=t.fields[0];return g.isString(e)?e:void 0}}function d(t,e){return f(t.component.scales[e].domains.map(function(e){return E.isDataRefDomain(e)&&(e.data=t.lookupDataSource(e.data)),e}))}var p=this&&this.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},v=this&&this.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&(n[r[i]]=t[r[i]]);return n};Object.defineProperty(e,"__esModule",{value:!0});var g=n(0),b=n(93),m=n(94),y=n(6),_=n(45),O=n(59),w=n(3),x=n(11),j=n(149),M=n(2),k=n(2),S=n(29),E=n(29),A=n(25),P=n(422),T=n(15),N=n(18);e.parseScaleDomain=r,e.parseDomainForChannel=s,e.domainSort=c,e.canUseUnaggregatedDomain=l,e.mergeDomains=f,e.getFieldFromDomain=h,e.assembleDomain=d},function(t,e,n){"use strict";function r(t){a(t);var e=t.component.layoutSize;e.setWithExplicit("width",o(t,"width")),e.setWithExplicit("height",o(t,"height"))}function i(t){a(t);var e=t.component.layoutSize,n=t.isVConcat?"width":"height";e.setWithExplicit(n,o(t,n))}function a(t){for(var e=0,n=t.children;e<n.length;e++)n[e].parseLayoutSize()}function o(t,e){for(var n,r="width"===e?"x":"y",i=t.component.resolve,a=0,o=t.children;a<o.length;a++){var s=o[a],u=s.component.layoutSize.getWithExplicit(e),c=i.scale[r];if("independent"===c&&"range-step"===u.value){n=void 0;break}if(n){if("independent"===c&&n.value!==u.value){n=void 0;break}n=f.mergeValuesWithExplicit(n,u,e,"")}else n=u}if(n){for(var l=0,h=t.children;l<h.length;l++){var s=h[l];t.renameLayoutSize(s.getName(e),t.getName(e)),s.component.layoutSize.set(e,"merged",!1)}return n}return{explicit:!1,value:void 0}}function s(t){var e=t.component.layoutSize;if(!e.explicit.width){var n=u(t,"width");e.set("width",n,!1)}if(!e.explicit.height){var r=u(t,"height");e.set("height",r,!1)}}function u(t,e){var n="width"===e?"x":"y",r=t.config,i=t.getScaleComponent(n);if(i){var a=i.get("type"),o=i.get("range");return c.hasDiscreteDomain(a)&&l.isVgRangeStep(o)?"range-step":r.view[e]}return"width"===e&&"text"===t.mark()?r.scale.textXRangeStep:r.scale.rangeStep||c.defaultScaleConfig.rangeStep}Object.defineProperty(e,"__esModule",{value:!0});var c=n(11),l=n(29),f=n(31);e.parseLayerLayoutSize=r,e.parseRepeatLayoutSize=r,e.parseConcatLayoutSize=i,e.parseChildrenLayoutSize=a,e.parseUnitLayoutSize=s},function(t,e,n){(function(t){function n(t){return Array.isArray?Array.isArray(t):"[object Array]"===g(t)}function r(t){return"boolean"==typeof t}function i(t){return null===t}function a(t){return null==t}function o(t){return"number"==typeof t}function s(t){return"string"==typeof t}function u(t){return"symbol"==typeof t}function c(t){return void 0===t}function l(t){return"[object RegExp]"===g(t)}function f(t){return"object"==typeof t&&null!==t}function h(t){return"[object Date]"===g(t)}function d(t){return"[object Error]"===g(t)||t instanceof Error}function p(t){return"function"==typeof t}function v(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t}function g(t){return Object.prototype.toString.call(t)}e.isArray=n,e.isBoolean=r,e.isNull=i,e.isNullOrUndefined=a,e.isNumber=o,e.isString=s,e.isSymbol=u,e.isUndefined=c,e.isRegExp=l,e.isObject=f,e.isDate=h,e.isError=d,e.isFunction=p,e.isPrimitive=v,e.isBuffer=t.isBuffer}).call(e,n(12).Buffer)},function(t,e,n){"use strict";(function(t){function r(t,e,n){function r(){for(var e;null!==(e=t.read());)o.push(e),s+=e.length;t.once("readable",r)}function i(e){t.removeListener("end",a),t.removeListener("readable",r),n(e)}function a(){var e,r=null;s>=O?r=new RangeError(w):e=g.concat(o,s),o=[],t.close(),n(r,e)}var o=[],s=0;t.on("error",i),t.on("end",a),t.end(e),r()}function i(t,e){if("string"==typeof e&&(e=g.from(e)),!g.isBuffer(e))throw new TypeError("Not a string or buffer");var n=t._finishFlushFlag;return t._processChunk(e,n)}function a(t){if(!(this instanceof a))return new a(t);d.call(this,t,m.DEFLATE)}function o(t){if(!(this instanceof o))return new o(t);d.call(this,t,m.INFLATE)}function s(t){if(!(this instanceof s))return new s(t);d.call(this,t,m.GZIP)}function u(t){if(!(this instanceof u))return new u(t);d.call(this,t,m.GUNZIP)}function c(t){if(!(this instanceof c))return new c(t);d.call(this,t,m.DEFLATERAW)}function l(t){if(!(this instanceof l))return new l(t);d.call(this,t,m.INFLATERAW)}function f(t){if(!(this instanceof f))return new f(t);d.call(this,t,m.UNZIP)}function h(t){return t===m.Z_NO_FLUSH||t===m.Z_PARTIAL_FLUSH||t===m.Z_SYNC_FLUSH||t===m.Z_FULL_FLUSH||t===m.Z_FINISH||t===m.Z_BLOCK}function d(t,n){var r=this;if(this._opts=t=t||{},this._chunkSize=t.chunkSize||e.Z_DEFAULT_CHUNK,b.call(this,t),t.flush&&!h(t.flush))throw new Error("Invalid flush flag: "+t.flush);if(t.finishFlush&&!h(t.finishFlush))throw new Error("Invalid flush flag: "+t.finishFlush);if(this._flushFlag=t.flush||m.Z_NO_FLUSH,this._finishFlushFlag=void 0!==t.finishFlush?t.finishFlush:m.Z_FINISH,t.chunkSize&&(t.chunkSize<e.Z_MIN_CHUNK||t.chunkSize>e.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+t.chunkSize);if(t.windowBits&&(t.windowBits<e.Z_MIN_WINDOWBITS||t.windowBits>e.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+t.windowBits);if(t.level&&(t.level<e.Z_MIN_LEVEL||t.level>e.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+t.level);if(t.memLevel&&(t.memLevel<e.Z_MIN_MEMLEVEL||t.memLevel>e.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+t.memLevel);if(t.strategy&&t.strategy!=e.Z_FILTERED&&t.strategy!=e.Z_HUFFMAN_ONLY&&t.strategy!=e.Z_RLE&&t.strategy!=e.Z_FIXED&&t.strategy!=e.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+t.strategy);if(t.dictionary&&!g.isBuffer(t.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._handle=new m.Zlib(n);var i=this;this._hadError=!1,this._handle.onerror=function(t,n){p(i),i._hadError=!0;var r=new Error(t);r.errno=n,r.code=e.codes[n],i.emit("error",r)};var a=e.Z_DEFAULT_COMPRESSION;"number"==typeof t.level&&(a=t.level);var o=e.Z_DEFAULT_STRATEGY;"number"==typeof t.strategy&&(o=t.strategy),this._handle.init(t.windowBits||e.Z_DEFAULT_WINDOWBITS,a,t.memLevel||e.Z_DEFAULT_MEMLEVEL,o,t.dictionary),this._buffer=g.allocUnsafe(this._chunkSize),this._offset=0,this._level=a,this._strategy=o,this.once("end",this.close),Object.defineProperty(this,"_closed",{get:function(){return!r._handle},configurable:!0,enumerable:!0})}function p(e,n){n&&t.nextTick(n),e._handle&&(e._handle.close(),e._handle=null)}function v(t){t.emit("close")}var g=n(12).Buffer,b=n(155).Transform,m=n(1067),y=n(146),_=n(240).ok,O=n(12).kMaxLength,w="Cannot create final Buffer. It would be larger than 0x"+O.toString(16)+" bytes";m.Z_MIN_WINDOWBITS=8,m.Z_MAX_WINDOWBITS=15,m.Z_DEFAULT_WINDOWBITS=15,m.Z_MIN_CHUNK=64,m.Z_MAX_CHUNK=1/0,m.Z_DEFAULT_CHUNK=16384,m.Z_MIN_MEMLEVEL=1,m.Z_MAX_MEMLEVEL=9,m.Z_DEFAULT_MEMLEVEL=8,m.Z_MIN_LEVEL=-1,m.Z_MAX_LEVEL=9,m.Z_DEFAULT_LEVEL=m.Z_DEFAULT_COMPRESSION;for(var x=Object.keys(m),j=0;j<x.length;j++){var M=x[j];M.match(/^Z/)&&Object.defineProperty(e,M,{enumerable:!0,value:m[M],writable:!1})}for(var k={Z_OK:m.Z_OK,Z_STREAM_END:m.Z_STREAM_END,Z_NEED_DICT:m.Z_NEED_DICT,Z_ERRNO:m.Z_ERRNO,Z_STREAM_ERROR:m.Z_STREAM_ERROR,Z_DATA_ERROR:m.Z_DATA_ERROR,Z_MEM_ERROR:m.Z_MEM_ERROR,Z_BUF_ERROR:m.Z_BUF_ERROR,Z_VERSION_ERROR:m.Z_VERSION_ERROR},S=Object.keys(k),E=0;E<S.length;E++){var A=S[E];k[k[A]]=A}Object.defineProperty(e,"codes",{enumerable:!0,value:Object.freeze(k),writable:!1}),e.Deflate=a,e.Inflate=o,e.Gzip=s,e.Gunzip=u,e.DeflateRaw=c,e.InflateRaw=l,e.Unzip=f,e.createDeflate=function(t){return new a(t)},e.createInflate=function(t){return new o(t)},e.createDeflateRaw=function(t){return new c(t)},e.createInflateRaw=function(t){return new l(t)},e.createGzip=function(t){return new s(t)},e.createGunzip=function(t){return new u(t)},e.createUnzip=function(t){return new f(t)},e.deflate=function(t,e,n){return"function"==typeof e&&(n=e,e={}),r(new a(e),t,n)},e.deflateSync=function(t,e){return i(new a(e),t)},e.gzip=function(t,e,n){return"function"==typeof e&&(n=e,e={}),r(new s(e),t,n)},e.gzipSync=function(t,e){return i(new s(e),t)},e.deflateRaw=function(t,e,n){return"function"==typeof e&&(n=e,e={}),r(new c(e),t,n)},e.deflateRawSync=function(t,e){return i(new c(e),t)},e.unzip=function(t,e,n){return"function"==typeof e&&(n=e,e={}),r(new f(e),t,n)},e.unzipSync=function(t,e){return i(new f(e),t)},e.inflate=function(t,e,n){return"function"==typeof e&&(n=e,e={}),r(new o(e),t,n)},e.inflateSync=function(t,e){return i(new o(e),t)},e.gunzip=function(t,e,n){return"function"==typeof e&&(n=e,e={}),r(new u(e),t,n)},e.gunzipSync=function(t,e){return i(new u(e),t)},e.inflateRaw=function(t,e,n){return"function"==typeof e&&(n=e,e={}),r(new l(e),t,n)},e.inflateRawSync=function(t,e){return i(new l(e),t)},y.inherits(d,b),d.prototype.params=function(n,r,i){if(n<e.Z_MIN_LEVEL||n>e.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+n);if(r!=e.Z_FILTERED&&r!=e.Z_HUFFMAN_ONLY&&r!=e.Z_RLE&&r!=e.Z_FIXED&&r!=e.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+r);if(this._level!==n||this._strategy!==r){var a=this;this.flush(m.Z_SYNC_FLUSH,function(){_(a._handle,"zlib binding closed"),a._handle.params(n,r),a._hadError||(a._level=n,a._strategy=r,i&&i())})}else t.nextTick(i)},d.prototype.reset=function(){return _(this._handle,"zlib binding closed"),this._handle.reset()},d.prototype._flush=function(t){this._transform(g.alloc(0),"",t)},d.prototype.flush=function(e,n){var r=this,i=this._writableState;("function"==typeof e||void 0===e&&!n)&&(n=e,e=m.Z_FULL_FLUSH),i.ended?n&&t.nextTick(n):i.ending?n&&this.once("end",n):i.needDrain?n&&this.once("drain",function(){return r.flush(e,n)}):(this._flushFlag=e,this.write(g.alloc(0),"",n))},d.prototype.close=function(e){p(this,e),t.nextTick(v,this)},d.prototype._transform=function(t,e,n){var r,i=this._writableState,a=i.ending||i.ended,o=a&&(!t||i.length===t.length);return null===t||g.isBuffer(t)?this._handle?(o?r=this._finishFlushFlag:(r=this._flushFlag,t.length>=i.length&&(this._flushFlag=this._opts.flush||m.Z_NO_FLUSH)),void this._processChunk(t,r,n)):n(new Error("zlib binding closed")):n(new Error("invalid input"))},d.prototype._processChunk=function(t,e,n){function r(c,h){if(this&&(this.buffer=null,this.callback=null),!s._hadError){var d=a-h;if(_(d>=0,"have should not go down"),d>0){var p=s._buffer.slice(s._offset,s._offset+d);s._offset+=d,u?s.push(p):(l.push(p),f+=p.length)}if((0===h||s._offset>=s._chunkSize)&&(a=s._chunkSize,s._offset=0,s._buffer=g.allocUnsafe(s._chunkSize)),0===h){if(o+=i-c,i=c,!u)return!0;var v=s._handle.write(e,t,o,i,s._buffer,s._offset,s._chunkSize);return v.callback=r,void(v.buffer=t)}if(!u)return!1;n()}}var i=t&&t.length,a=this._chunkSize-this._offset,o=0,s=this,u="function"==typeof n;if(!u){var c,l=[],f=0;this.on("error",function(t){c=t}),_(this._handle,"zlib binding closed");do{var h=this._handle.writeSync(e,t,o,i,this._buffer,this._offset,a)}while(!this._hadError&&r(h[0],h[1]));if(this._hadError)throw c;if(f>=O)throw p(this),new RangeError(w);var d=g.concat(l,f);return p(this),d}_(this._handle,"zlib binding closed");var v=this._handle.write(e,t,o,i,this._buffer,this._offset,a);v.buffer=t,v.callback=r},y.inherits(a,d),y.inherits(o,d),y.inherits(s,d),y.inherits(u,d),y.inherits(c,d),y.inherits(l,d),y.inherits(f,d)}).call(e,n(35))},function(t,e,n){"use strict";t.exports={PNG_SIGNATURE:[137,80,78,71,13,10,26,10],TYPE_IHDR:1229472850,TYPE_IEND:1229278788,TYPE_IDAT:1229209940,TYPE_PLTE:1347179589,TYPE_tRNS:1951551059,TYPE_gAMA:1732332865,COLORTYPE_GRAYSCALE:0,COLORTYPE_PALETTE:1,COLORTYPE_COLOR:2,COLORTYPE_ALPHA:4,COLORTYPE_PALETTE_COLOR:3,COLORTYPE_COLOR_ALPHA:6,COLORTYPE_TO_BPP_MAP:{0:1,2:3,3:1,4:2,6:4},GAMMA_DIVISION:1e5}},function(t,e,n){"use strict";e.a=function(t){return t<0?-1:1}},function(t,e,n){"use strict";var r=n(8),i=n(102);e.a=function(t){return Math.abs(t)<r.d?t:t-Object(i.a)(t)*Math.PI}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(507);n.d(e,"create",function(){return r.a});var i=n(105);n.d(e,"creator",function(){return i.a});var a=n(536);n.d(e,"local",function(){return a.a});var o=n(265);n.d(e,"matcher",function(){return o.a});var s=n(537);n.d(e,"mouse",function(){return s.a});var u=n(168);n.d(e,"namespace",function(){return u.a});var c=n(169);n.d(e,"namespaces",function(){return c.a});var l=n(106);n.d(e,"clientPoint",function(){return l.a});var f=n(263);n.d(e,"select",function(){return f.a});var h=n(538);n.d(e,"selectAll",function(){return h.a});var d=n(32);n.d(e,"selection",function(){return d.b});var p=n(170);n.d(e,"selector",function(){return p.a});var v=n(264);n.d(e,"selectorAll",function(){return v.a});var g=n(268);n.d(e,"style",function(){return g.b});var b=n(539);n.d(e,"touch",function(){return b.a});var m=n(540);n.d(e,"touches",function(){return m.a});var y=n(171);n.d(e,"window",function(){return y.a});var _=n(172);n.d(e,"event",function(){return _.c}),n.d(e,"customEvent",function(){return _.a})},function(t,e,n){"use strict";function r(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===o.b&&e.documentElement.namespaceURI===o.b?e.createElement(t):e.createElementNS(n,t)}}function i(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}var a=n(168),o=n(169);e.a=function(t){var e=Object(a.a)(t);return(e.local?i:r)(e)}},function(t,e,n){"use strict";e.a=function(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}},function(t,e,n){"use strict";var r=n(274);e.a=function(t){function e(){o.push(l+t.substring(n,i)),l="",n=i+1}var n,i,a,o=[],s=null,u=0,c=t.length,l="";for(t+="",n=i=0;i<c;++i)if("\\"===(a=t[i]))l+=t.substring(n,i),n=++i;else if(a===s)e(),s=null,u=-1;else{if(s)continue;n===u&&'"'===a?(n=i+1,s=a):n===u&&"'"===a?(n=i+1,s=a):"."!==a||u?"["===a?(i>n&&e(),u=n=i+1):"]"===a&&(u||Object(r.a)("Access path missing open bracket: "+t),u>0&&e(),u=0,n=i+1):i>n?e():n=i+1}return u&&Object(r.a)("Access path missing closing bracket: "+t),s&&Object(r.a)("Access path missing closing quote: "+t),i>n&&(i++,e()),o}},function(t,e,n){"use strict";function r(t){return Object(i.a)(t)?"["+t.map(r)+"]":Object(a.a)(t)||Object(o.a)(t)?JSON.stringify(t).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):t}e.a=r;var i=n(174),a=n(275),o=n(276)},function(t,e,n){"use strict";function r(t,e,n,r){this.id=++u,this.value=t,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,e&&(this._update=e),n&&this.parameters(n,r)}function i(t){return function(e){var n=this.flags;return 0===arguments.length?!!(n&t):(this.flags=e?n|t:n&~t,this)}}e.a=r;var a=n(282),o=n(73),s=n(0),u=0,c=new a.a,l=r.prototype;l.targets=function(){return this._targets||(this._targets=Object(o.a)(s.id))},l.set=function(t){return this.value!==t?(this.value=t,1):0},l.skip=i(1),l.modified=i(2),l.parameters=function(t,e){function n(t,n,i){i instanceof r?(i!==l&&(e&&i.targets().add(l),d.push(i)),h.push({op:i,name:t,index:n})):f.set(t,n,i)}e=!1!==e;var i,o,u,c,l=this,f=l._argval=l._argval||new a.a,h=l._argops=l._argops||[],d=[];for(i in t)if(o=t[i],"pulse"===i)Object(s.array)(o).forEach(function(t){t instanceof r?t!==l&&(t.targets().add(l),d.push(t)):Object(s.error)("Pulse parameters must be operator instances.")}),l.source=o;else if(Object(s.isArray)(o))for(f.set(i,-1,Array(u=o.length)),c=0;c<u;++c)n(i,c,o[c]);else n(i,-1,o);return this.marshall().clear(),d},l.marshall=function(t){var e,n,r,i,a,o=this._argval||c,s=this._argops;if(s&&(r=s.length))for(n=0;n<r;++n)e=s[n],i=e.op,a=i.modified()&&i.stamp===t,o.set(e.name,e.index,i.value,a);return o},l.evaluate=function(t){if(this._update){var e=this.marshall(t.stamp),n=this._update(e,t);if(e.clear(),n!==this.value)this.value=n;else if(!this.modified())return t.StopPropagation}},l.run=function(t){if(t.stamp<=this.stamp)return t.StopPropagation;var e;return this.skip()?(this.skip(!1),e=0):e=this.evaluate(t),this.stamp=t.stamp,this.pulse=e,e||t}},function(t,e,n){"use strict";var r=n(179);e.a=function(t,e){return function(n,i){var a=Object(r.a)(n).mimeType(t).response(e);if(null!=i){if("function"!=typeof i)throw new Error("invalid callback: "+i);return a.get(i)}return a}}},function(t,e,n){"use strict";var r=(n(19),n(596));n.d(e,"c",function(){return r.a}),n.d(e,"n",function(){return r.a});var i=n(597);n.d(e,"g",function(){return i.a}),n.d(e,"r",function(){return i.a});var a=n(598);n.d(e,"d",function(){return a.a});var o=n(599);n.d(e,"b",function(){return o.a});var s=n(600);n.d(e,"a",function(){return s.a});var u=n(601);n.d(e,"j",function(){return u.b}),n.d(e,"h",function(){return u.b}),n.d(e,"e",function(){return u.a}),n.d(e,"i",function(){return u.c});var c=n(602);n.d(e,"f",function(){return c.a});var l=n(603);n.d(e,"k",function(){return l.a});var f=n(604);n.d(e,"o",function(){return f.a});var h=n(605);n.d(e,"m",function(){return h.a});var d=n(606);n.d(e,"l",function(){return d.a});var p=n(607);n.d(e,"u",function(){return p.b}),n.d(e,"s",function(){return p.b}),n.d(e,"p",function(){return p.a}),n.d(e,"t",function(){return p.c});var v=n(608);n.d(e,"q",function(){return v.a});var g=n(609);n.d(e,"v",function(){return g.a})},function(t,e,n){"use strict";function r(t,e,n){this.dataflow=t,this.stamp=null==e?-1:e,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function i(t,e){return t?function(n,r){return t(n,r)&&e(n,r)}:e}function a(t,e){var n=[];return Object(u.visitArray)(t,e,function(t){n.push(t)}),n}function o(t,e){var n={};return t.visit(e,function(t){n[Object(s.f)(t)]=1}),function(t){return n[Object(s.f)(t)]?null:t}}n.d(e,"a",function(){return c}),e.b=r;var s=n(178),u=n(0),c={},l=r.prototype;l.StopPropagation=c,l.ADD=1,l.REM=2,l.MOD=4,l.ADD_REM=3,l.ADD_MOD=5,l.ALL=7,l.REFLOW=8,l.SOURCE=16,l.NO_SOURCE=32,l.NO_FIELDS=64,l.fork=function(t){return new r(this.dataflow).init(this,t)},l.addAll=function(){var t=this;return this.source&&this.source.length!==this.add.length?(t=new r(this.dataflow).init(this),t.add=t.source,t):t},l.init=function(t,e){var n=this;return n.stamp=t.stamp,n.encode=t.encode,!t.fields||64&e||(n.fields=t.fields),1&e?(n.addF=t.addF,n.add=t.add):(n.addF=null,n.add=[]),2&e?(n.remF=t.remF,n.rem=t.rem):(n.remF=null,n.rem=[]),4&e?(n.modF=t.modF,n.mod=t.mod):(n.modF=null,n.mod=[]),32&e?(n.srcF=null,n.source=null):(n.srcF=t.srcF,n.source=t.source),n},l.runAfter=function(t){this.dataflow.runAfter(t)},l.changed=function(t){var e=t||7;return 1&e&&this.add.length||2&e&&this.rem.length||4&e&&this.mod.length},l.reflow=function(t){if(t)return this.fork(7).reflow();var e=this.add.length,n=this.source&&this.source.length;return n&&n!==e&&(this.mod=this.source,e&&this.filter(4,o(this,1))),this},l.modifies=function(t){var e=Object(u.array)(t),n=this.fields||(this.fields={});return e.forEach(function(t){n[t]=!0}),this},l.modified=function(t){var e=this.fields;return!(!this.mod.length||!e)&&(arguments.length?Object(u.isArray)(t)?t.some(function(t){return e[t]}):e[t]:!!e)},l.filter=function(t,e){var n=this;return 1&t&&(n.addF=i(n.addF,e)),2&t&&(n.remF=i(n.remF,e)),4&t&&(n.modF=i(n.modF,e)),16&t&&(n.srcF=i(n.srcF,e)),n},l.materialize=function(t){t=t||7;var e=this;return 1&t&&e.addF&&(e.add=a(e.add,e.addF),e.addF=null),2&t&&e.remF&&(e.rem=a(e.rem,e.remF),e.remF=null),4&t&&e.modF&&(e.mod=a(e.mod,e.modF),e.modF=null),16&t&&e.srcF&&(e.source=e.source.filter(e.srcF),e.srcF=null),e},l.visit=function(t,e){var n,r,i=this,a=e;return 16&t?(Object(u.visitArray)(i.source,i.srcF,a),i):(1&t&&Object(u.visitArray)(i.add,i.addF,a),2&t&&Object(u.visitArray)(i.rem,i.remF,a),4&t&&Object(u.visitArray)(i.mod,i.modF,a),8&t&&(n=i.source)&&((r=i.add.length+i.mod.length)===n.length||(r?Object(u.visitArray)(n,o(i,5),a):Object(u.visitArray)(n,i.srcF,a))),i)}},function(t,e,n){"use strict";function r(t,e){return Object(a.a)(t,e)||Object(o.a)(t,e)||null}function i(){return Object(a.b)()||Object(o.b)()||null}e.a=r,e.b=i;var a=n(311),o=n(312)},function(t,e,n){"use strict";function r(t){this._context=t}r.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}},e.a=function(t){return new r(t)}},function(t,e,n){"use strict";e.a=function(){}},function(t,e,n){"use strict";function r(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function i(t){this._context=t}e.c=r,e.a=i,i.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:r(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:r(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},e.b=function(t){return new i(t)}},function(t,e,n){"use strict";function r(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function i(t,e){this._context=t,this._k=(1-e)/6}e.c=r,e.a=i,i.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:r(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:r(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}},e.b=function t(e){function n(t){return new i(t,e)}return n.tension=function(e){return t(+e)},n}(0)},function(t,e,n){"use strict";var r={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},i=[/([MLHVCSQTAZmlhvcsqtaz])/g,/###/,/(\d)([-+])/g,/\s|,|###/];e.a=function(t){var e,n,a,o,s,u,c,l,f,h,d,p=[];for(e=t.slice().replace(i[0],"###$1").split(i[1]).slice(1),l=0,h=e.length;l<h;++l){for(n=e[l],a=n.slice(1).trim().replace(i[2],"$1###$2").split(i[3]),u=n.charAt(0),o=[u],f=0,d=a.length;f<d;++f)(s=+a[f])===s&&o.push(s);if(c=r[u.toLowerCase()],o.length-1>c)for(f=1,d=o.length;f<d;f+=c)p.push([u].concat(o.slice(f,f+c)));else p.push(o)}return p}},function(t,e,n){"use strict";function r(t){return function(e,n,r){Object(u.b)(n,function(n){r&&!r.intersects(n.bounds)||a(t,e,n,n)})}}function i(t){return function(e,n,r){!n.items.length||r&&!r.intersects(n.bounds)||a(t,e,n.items[0],n.items)}}function a(t,e,n,r){var i=null==n.opacity?1:n.opacity;0!==i&&(t(e,r)||(n.fill&&Object(o.a)(e,n,i)&&e.fill(),n.stroke&&Object(s.a)(e,n,i)&&e.stroke()))}e.a=r,e.b=i;var o=n(193),s=n(120),u=n(38)},function(t,e,n){"use strict";var r=n(335),i=[];e.a=function(t,e,n){var a=null!=(a=e.strokeWidth)?a:1;return!(a<=0)&&(n*=null==e.strokeOpacity?1:e.strokeOpacity)>0&&(t.globalAlpha=n,t.strokeStyle=Object(r.a)(t,e,e.stroke),t.lineWidth=a,t.lineCap=e.strokeCap||"butt",t.lineJoin=e.strokeJoin||"miter",t.miterLimit=e.strokeMiterLimit||10,t.setLineDash&&(t.setLineDash(e.strokeDash||i),t.lineDashOffset=e.strokeDashOffset||0),!0)}},function(t,e,n){"use strict";var r=n(194);e.a=function(t){return Object(r.a)(t.x||0,t.y||0)}},function(t,e,n){"use strict";function r(){a=1}e.b=r;var i=n(0),a=1;e.a=function(t,e,n){var r=e.clip,o=t._defs,s=e.clip_id||(e.clip_id="clip"+a++),u=o.clipping[s]||(o.clipping[s]={id:s});return Object(i.isFunction)(r)?u.path=r(null):(u.width=n.width||0,u.height=n.height||0),"url(#"+s+")"}},function(t,e,n){"use strict";function r(t){return p=s(t),i(c(t))}function i(t){return~~(.8*t.length*p)}function a(t){return d.font=f(t),o(c(t))}function o(t){return d.measureText(t).width}function s(t){return null!=t.fontSize?t.fontSize:11}function u(t){d=t&&(d=Object(v.a)(1,1))?d.getContext("2d"):null,g.width=d?a:r}function c(t){var e=t.text;return null==e?"":t.limit>0?l(t):e+""}function l(t){var e,n=+t.limit,r=t.text+"";if(d?(d.font=f(t),e=o):(p=s(t),e=i),e(r)<n)return r;var a,u=t.ellipsis||"",c="rtl"===t.dir,l=0,h=r.length;if(n-=e(u),c){for(;l<h;)a=l+h>>>1,e(r.slice(a))>n?l=a+1:h=a;return u+r.slice(l)}for(;l<h;)a=1+(l+h>>>1),e(r.slice(0,a))<n?l=a:h=a-1;return r.slice(0,l)+u}function f(t,e){var n=t.font;return e&&n&&(n=String(n).replace(/"/g,"'")),(t.fontStyle?t.fontStyle+" ":"")+(t.fontVariant?t.fontVariant+" ":"")+(t.fontWeight?t.fontWeight+" ":"")+s(t)+"px "+(n||"sans-serif")}function h(t){var e=t.baseline,n=s(t);return Math.round("top"===e?.79*n:"middle"===e?.3*n:"bottom"===e?-.21*n:0)}n.d(e,"c",function(){return g}),e.d=c,e.a=f,e.b=h;var d,p,v=n(113),g={height:s,measureWidth:a,estimateWidth:r,width:r,canvas:u};u(!0)},function(t,e,n){"use strict";function r(t){this._el=null,this._bgcolor=null,this._loader=new i.a(t)}e.a=r;var i=n(310),a=r.prototype;a.initialize=function(t,e,n,r,i){return this._el=t,this.resize(e,n,r,i)},a.element=function(){return this._el},a.scene=function(){return this._el&&this._el.firstChild},a.background=function(t){return 0===arguments.length?this._bgcolor:(this._bgcolor=t,this)},a.resize=function(t,e,n,r){return this._width=t,this._height=e,this._origin=n||[0,0],this._scale=r||1,this},a.dirty=function(){},a.render=function(t){var e=this;return e._call=function(){e._render(t)},e._call(),e._call=null,e},a._render=function(){},a.renderAsync=function(t){var e=this.render(t);return this._ready?this._ready.then(function(){return e}):Promise.resolve(e)},a._load=function(t,e){var n=this,r=n._loader[t](e);if(!n._ready){var i=n._call;n._ready=n._loader.ready().then(function(t){t&&i(),n._ready=null})}return r},a.sanitizeURL=function(t){return this._load("sanitizeURL",t)},a.loadImage=function(t){return this._load("loadImage",t)}},function(t,e,n){"use strict";e.a=function(t,e){return t=+t,e-=t,function(n){return t+e*n}}},function(t,e,n){"use strict";function r(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Object(d.a)(e)}function i(t){return function(e,n){var r=t(e=+e,n=+n);return function(t){return t<=e?0:t>=n?1:r(t)}}}function a(t){return function(e,n){var r=t(e=+e,n=+n);return function(t){return t<=0?e:t>=1?n:r(t)}}}function o(t,e,n,r){var i=t[0],a=t[1],o=e[0],s=e[1];return a<i?(i=n(a,i),o=r(s,o)):(i=n(i,a),o=r(o,s)),function(t){return o(i(t))}}function s(t,e,n,r){var i=Math.min(t.length,e.length)-1,a=new Array(i),o=new Array(i),s=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<i;)a[s]=n(t[s],t[s+1]),o[s]=r(e[s],e[s+1]);return function(e){var n=Object(l.bisect)(t,e,1,i)-1;return o[n](a[n](e))}}function u(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp())}function c(t,e){function n(){return c=Math.min(g.length,b.length)>2?s:o,l=d=null,u}function u(e){return(l||(l=c(g,b,y?i(t):t,m)))(+e)}var c,l,d,g=v,b=v,m=f.interpolate,y=!1;return u.invert=function(t){return(d||(d=c(b,g,r,y?a(e):e)))(+t)},u.domain=function(t){return arguments.length?(g=h.a.call(t,p.a),n()):g.slice()},u.range=function(t){return arguments.length?(b=h.b.call(t),n()):b.slice()},u.rangeRound=function(t){return b=h.b.call(t),m=f.interpolateRound,n()},u.clamp=function(t){return arguments.length?(y=!!t,n()):y},u.interpolate=function(t){return arguments.length?(m=t,n()):m},n()}e.c=r,e.a=u,e.b=c;var l=n(9),f=n(39),h=n(56),d=n(203),p=n(355),v=[0,1]},function(t,e,n){"use strict";var r=n(204);e.a=function(t){return t=Object(r.a)(Math.abs(t)),t?t[1]:NaN}},function(t,e,n){"use strict";var r=n(816);n.d(e,"b",function(){return r.b}),n.d(e,"c",function(){return r.c}),n.d(e,"a",function(){return r.a})},function(t,e,n){"use strict";function r(t,e){return[t>c.o?t-c.w:t<-c.o?t+c.w:t,e]}function i(t,e,n){return(t%=c.w)?e||n?Object(u.a)(o(t),s(e,n)):o(t):e||n?s(e,n):r}function a(t){return function(e,n){return e+=t,[e>c.o?e-c.w:e<-c.o?e+c.w:e,n]}}function o(t){var e=a(t);return e.invert=a(-t),e}function s(t,e){function n(t,e){var n=Object(c.g)(e),s=Object(c.g)(t)*n,u=Object(c.t)(t)*n,l=Object(c.t)(e),f=l*r+s*i;return[Object(c.e)(u*a-f*o,s*r-l*i),Object(c.c)(f*a+u*o)]}var r=Object(c.g)(t),i=Object(c.t)(t),a=Object(c.g)(e),o=Object(c.t)(e);return n.invert=function(t,e){var n=Object(c.g)(e),s=Object(c.g)(t)*n,u=Object(c.t)(t)*n,l=Object(c.t)(e),f=l*a-u*o;return[Object(c.e)(u*a+l*o,s*r+f*i),Object(c.c)(f*r-s*i)]},n}e.b=i;var u=n(369),c=n(5);r.invert=r,e.a=function(t){function e(e){return e=t(e[0]*c.r,e[1]*c.r),e[0]*=c.h,e[1]*=c.h,e}return t=i(t[0]*c.r,t[1]*c.r,t.length>2?t[2]*c.r:0),e.invert=function(e){return e=t.invert(e[0]*c.r,e[1]*c.r),e[0]*=c.h,e[1]*=c.h,e},e}},function(t,e,n){"use strict";function r(t,e,n,r){function f(i,a){return t<=i&&i<=n&&e<=a&&a<=r}function h(i,a,o,s){var u=0,c=0;if(null==i||(u=d(i,o))!==(c=d(a,o))||v(i,a)<0^o>0)do{s.point(0===u||3===u?t:n,u>1?r:e)}while((u=(u+o+4)%4)!==c);else s.point(a[0],a[1])}function d(r,a){return Object(i.a)(r[0]-t)<i.i?a>0?0:3:Object(i.a)(r[0]-n)<i.i?a>0?2:1:Object(i.a)(r[1]-e)<i.i?a>0?1:0:a>0?3:2}function p(t,e){return v(t.x,e.x)}function v(t,e){var n=d(t,1),r=d(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(i){function d(t,e){f(t,e)&&N.point(t,e)}function v(){for(var e=0,n=0,i=w.length;n<i;++n)for(var a,o,s=w[n],u=1,c=s.length,l=s[0],f=l[0],h=l[1];u<c;++u)a=f,o=h,l=s[u],f=l[0],h=l[1],o<=r?h>r&&(f-a)*(r-o)>(h-o)*(t-a)&&++e:h<=r&&(f-a)*(r-o)<(h-o)*(t-a)&&--e;return e}function g(){N=C,O=[],w=[],T=!0}function b(){var t=v(),e=T&&t,n=(O=Object(u.merge)(O)).length;(e||n)&&(i.polygonStart(),e&&(i.lineStart(),h(null,null,1,i),i.lineEnd()),n&&Object(s.a)(O,p,t,h,i),i.polygonEnd()),N=i,O=w=x=null}function m(){R.point=_,w&&w.push(x=[]),P=!0,A=!1,S=E=NaN}function y(){O&&(_(j,M),k&&A&&C.rejoin(),O.push(C.result())),R.point=d,A&&N.lineEnd()}function _(i,a){var s=f(i,a);if(w&&x.push([i,a]),P)j=i,M=a,k=s,P=!1,s&&(N.lineStart(),N.point(i,a));else if(s&&A)N.point(i,a);else{var u=[S=Math.max(l,Math.min(c,S)),E=Math.max(l,Math.min(c,E))],h=[i=Math.max(l,Math.min(c,i)),a=Math.max(l,Math.min(c,a))];Object(o.a)(u,h,t,e,n,r)?(A||(N.lineStart(),N.point(u[0],u[1])),N.point(h[0],h[1]),s||N.lineEnd(),T=!1):s&&(N.lineStart(),N.point(i,a),T=!1)}S=i,E=a,A=s}var O,w,x,j,M,k,S,E,A,P,T,N=i,C=Object(a.a)(),R={point:d,lineStart:m,lineEnd:y,polygonStart:g,polygonEnd:b};return R}}e.a=r;var i=n(5),a=n(372),o=n(821),s=n(373),u=n(9),c=1e9,l=-c},function(t,e,n){"use strict";function r(t){return function(e){var n=new i;for(var r in t)n[r]=t[r];return n.stream=e,n}}function i(){}e.b=r,e.a=function(t){return{stream:r(t)}},i.prototype={constructor:i,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}}},function(t,e,n){"use strict";e.a=function(t,e,n,r,i){for(var a,o=t.children,s=-1,u=o.length,c=t.value&&(i-n)/t.value;++s<u;)a=o[s],a.x0=e,a.x1=r,a.y0=n,a.y1=n+=a.value*c}},function(t,e,n){"use strict";function r(t){o.g.call(this,null,t)}function i(t,e,n){for(var r,i=0,a=e.length;i<a;++i)(r=e[i])in n&&t[r](n[r])}function a(t,e,n){for(var r=t.data,i=0,a=e.length-1;i<a;++i)r[n[i]]=t[e[i]];r[n[a]]=t.children?t.children.length:0}e.a=r;var o=n(1),s=n(0);Object(s.inherits)(r,o.g).transform=function(t,e){e.source&&e.source.root||Object(s.error)(this.constructor.name+" transform requires a backing tree data source.");var n=this.layout(t.method),r=this.fields,o=e.source.root,u=t.as||r;t.field&&o.sum(t.field),t.sort&&o.sort(t.sort),i(n,this.params,t);try{this.value=n(o)}catch(t){Object(s.error)(t)}return o.each(function(t){a(t,r,u)}),e.reflow(t.modified()).modifies(u).modifies("leaf")}},function(t,e,n){"use strict";function r(t){var e=t.padding();return Math.max(0,t._viewWidth+e.left+e.right)}function i(t){var e=t.padding();return Math.max(0,t._viewHeight+e.top+e.bottom)}function a(t){var e=t.padding(),n=t._origin;return[e.left+n[0],e.top+n[1]]}function o(t){var e=a(t),n=r(t),o=i(t);t._renderer.background(t._background),t._renderer.resize(n,o,e),t._handler.origin(e),t._resizeListeners.forEach(function(t){t(n,o)})}e.d=r,e.a=i,e.b=a,e.c=o},function(t,e,n){"use strict";var r=n(395),i=n(958),a=n(959),o=n(960),s=n(219),u=n(978),c=n(979),l=n(141),f=n(980),h=n(0);e.a=function(t,e,n){var d=Object(h.array)(t.signals),p=Object(h.array)(t.scales);return n||d.forEach(function(t){Object(s.a)(t,e)}),Object(h.array)(t.projections).forEach(function(t){Object(a.a)(t,e)}),p.forEach(function(t){Object(i.a)(t,e)}),Object(h.array)(t.data).forEach(function(t){Object(c.a)(t,e)}),p.forEach(function(t){Object(i.b)(t,e)}),d.forEach(function(t){Object(r.a)(t,e)}),Object(h.array)(t.axes).forEach(function(t){Object(f.a)(t,e)}),Object(h.array)(t.marks).forEach(function(t){Object(l.a)(t,e)}),Object(h.array)(t.legends).forEach(function(t){Object(o.a)(t,e)}),t.title&&Object(u.a)(t.title,e),e.parseLambdas(),e}},function(t,e,n){"use strict";function r(t,e){var n;return Object(g.isFunction)(t)?t:Object(g.isString)(t)?(n=e.scales[t])&&n.value:void 0}function i(t,e,n){var r=p.c+n;if(!e.hasOwnProperty(r))try{e[r]=t.scaleRef(n)}catch(t){}}function a(t,e,n,r){if(e[0].type===d.b)i(n,r,e[0].value);else if(e[0].type===d.a)for(t in n.scales)i(n,r,t)}function o(t,e){var n=r(t,(e||this).context);return n&&n.range?n.range():[]}function s(t,e){var n=r(t,(e||this).context);return n?n.domain():[]}function u(t,e){var n=r(t,(e||this).context);return n&&n.bandwidth?n.bandwidth():0}function c(t,e,n){return Object(v.a)(t||0,e||0,n||0)}function l(t,e){var n=r(t,(e||this).context);return n?n.copy():void 0}function f(t,e,n){var i=r(t,(n||this).context);return i?i(e):void 0}function h(t,e,n){var i=r(t,(n||this).context);return i?Object(g.isArray)(e)?(i.invertRange||i.invert)(e):(i.invert||i.invertExtent)(e):void 0}e.e=r,e.i=a,e.g=o,e.d=s,e.b=u,e.a=c,e.c=l,e.h=f,e.f=h;var d=n(220),p=n(137),v=n(55),g=n(0)},function(t,e,n){"use strict";n.d(e,"b",function(){return r}),n.d(e,"c",function(){return i}),n.d(e,"a",function(){return a});var r="@",i="%",a=":"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(957);n.d(e,"selector",function(){return r.a})},function(t,e,n){"use strict";var r=n(964),i=n(403),a=n(404),o=n(965),s=n(966),u=n(140),c=n(0);e.a=function(t,e,n,l,f){if(null!=e.gradient)return Object(o.a)(e,n,l,f);var h=e.signal?Object(u.a)(e.signal,n,l,f):e.color?Object(r.a)(e.color,n,l,f):null!=e.field?Object(i.a)(e.field,n,l,f):void 0!==e.value?Object(c.stringValue)(e.value):void 0;return null!=e.scale&&(h=Object(a.a)(e,h,n,l,f)),void 0===h&&(h=null),null!=e.exponent&&(h="Math.pow("+h+","+Object(s.a)(e.exponent,n,l,f)+")"),null!=e.mult&&(h+="*"+Object(s.a)(e.mult,n,l,f)),null!=e.offset&&(h+="+"+Object(s.a)(e.offset,n,l,f)),e.round&&(h="Math.round("+h+")"),h}},function(t,e,n){"use strict";var r=n(58),i=n(0);e.a=function(t,e,n,a){var o=Object(r.a)(t,e);return o.$fields.forEach(function(t){a[t]=1}),Object(i.extend)(n,o.$params),o.$expr}},function(t,e,n){"use strict";var r=n(972),i=n(973),a=n(974),o=n(975),s=n(976),u=n(977),c=n(407),l=n(22),f=n(14),h=n(17),d=n(222),p=n(408),v=n(135),g=n(91),b=n(21),m=n(0),y=n(27);e.a=function(t,e){var n,_,O,w,x,j,M,k,S,E,A,P,T,N=Object(c.a)(t),C=t.type===l.a,R=t.from&&t.from.facet,D=t.layout||N===f.o||N===f.g,L=N===f.n||D||R,I=t.overlap;O=Object(o.a)(t.from,C,e),_=e.add(Object(y.f)({key:O.key||(t.key?Object(b.f)(t.key):void 0),pulse:O.pulse,clean:!C})),S=Object(b.k)(_),_=w=e.add(Object(y.d)({pulse:S})),_=e.add(Object(y.l)({markdef:Object(i.a)(t),interactive:Object(a.a)(t.interactive,e),clip:Object(r.a)(t.clip,e),context:{$context:!0},groups:e.lookup(),parent:e.signals.parent?e.signalRef("parent"):null,index:e.markpath(),pulse:Object(b.k)(_)})),E=Object(b.k)(_),_=e.add(Object(y.g)(Object(h.c)(t.encode,t.type,N,t.style,e,{pulse:E}))),_.params.parent=e.encode(),t.transform&&t.transform.forEach(function(t){var n=Object(d.a)(t,e);(n.metadata.generates||n.metadata.changes)&&Object(m.error)("Mark transforms should not generate new data."),n.params.pulse=Object(b.k)(_),e.add(_=n)}),t.sort&&(_=e.add(Object(y.x)({sort:e.compareRef(t.sort,!0),pulse:Object(b.k)(_)}))),A=Object(b.k)(_),(R||D)&&(D=e.add(Object(y.z)({layout:e.objectProperty(t.layout),legendMargin:e.config.legendMargin,mark:E,pulse:A})),P=Object(b.k)(D)),x=e.add(Object(y.c)({mark:E,pulse:P||A})),T=Object(b.k)(x),C&&(L&&(n=e.operators,n.pop(),D&&n.pop()),e.pushState(A,P||T,S),R?Object(s.a)(t,e,O):L?Object(u.a)(t,e,O):Object(v.a)(t,e),e.popState(),L&&(D&&n.push(D),n.push(x))),I&&(_={method:!0===I.method?"parity":I.method,pulse:T},I.order&&(_.sort=e.compareRef({field:I.order})),I.bound&&(_.boundScale=e.scaleRef(I.bound.scale),_.boundOrient=I.bound.orient,_.boundTolerance=I.bound.tolerance),T=Object(b.k)(e.add(Object(y.o)(_)))),j=e.add(Object(y.u)({pulse:T})),M=e.add(Object(y.w)({pulse:Object(b.k)(j)},void 0,e.parent())),null!=t.name&&(k=t.name,e.addData(k,new g.a(e,w,j,M)),t.on&&t.on.forEach(function(t){(t.insert||t.remove||t.toggle)&&Object(m.error)("Marks only support modify triggers."),Object(p.a)(t,e,k)}))}},function(t,e,n){"use strict";function r(t,e){l[t]=e}function i(t){delete l[t]}function a(t,e){var n=s.isMarkDef(t.mark)?t.mark.type:t.mark,r=l[n];if(r)return r(t,e);throw new Error('Invalid mark type "'+n+'"')}var o=this&&this.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t};Object.defineProperty(e,"__esModule",{value:!0});var s=n(23),u=n(999),c=n(1001),l={};e.add=r,e.remove=i,e.COMPOSITE_MARK_STYLES=u.BOXPLOT_STYLES,e.VL_ONLY_COMPOSITE_MARK_SPECIFIC_CONFIG_PROPERTY_INDEX=o({},u.VL_ONLY_BOXPLOT_CONFIG_PROPERTY_INDEX),r(u.BOXPLOT,u.normalizeBoxPlot),r(c.ERRORBAR,c.normalizeErrorBar),e.normalize=a},function(t,e,n){"use strict";function r(t,e,n,r,f,h,d){if(a.isFacetSpec(t))return new s.FacetModel(t,e,n,f,h);if(a.isLayerSpec(t))return new u.LayerModel(t,e,n,r,f,h,d);if(a.isUnitSpec(t))return new l.UnitModel(t,e,n,r,f,h,d);if(a.isRepeatSpec(t))return new c.RepeatModel(t,e,n,f,h);if(a.isConcatSpec(t))return new o.ConcatModel(t,e,n,f,h);throw new Error(i.message.INVALID_SPEC)}Object.defineProperty(e,"__esModule",{value:!0});var i=n(3),a=n(67),o=n(1005),s=n(1027),u=n(1028),c=n(1043),l=n(437);e.buildModel=r},function(t,e,n){"use strict";function r(t,e){if(t.data||!t.parent){var n=new E.SourceNode(t.data),r=n.hash();return r in e?e[r]:(e[r]=n,n)}return t.parent.component.data.facetRoot?t.parent.component.data.facetRoot:t.parent.component.data.main}function i(t,e){var n=0;return e.transforms.forEach(function(r){if(h.isCalculate(r))t=new m.CalculateNode(t,r);else if(h.isFilter(r)){var i={},a=r.filter,o=null;f.isFieldEqualPredicate(a)?o=a.equal:f.isFieldRangePredicate(a)?o=a.range[0]:f.isFieldOneOfPredicate(a)&&(o=(a.oneOf||a.in)[0]),o&&(c.isDateTime(o)?i[a.field]="date":s.isNumber(o)?i[a.field]="number":s.isString(o)&&(i[a.field]="string")),d.keys(i).length>0&&(t=new x.ParseNode(t,i)),t=new O.FilterNode(t,e,r.filter)}else if(h.isBin(r))t=b.BinNode.makeFromTransform(t,r,e);else if(h.isTimeUnit(r))t=P.TimeUnitNode.makeFromTransform(t,r);else if(h.isAggregate(r))t=g.AggregateNode.makeFromTransform(t,r),v.requiresSelectionId(e)&&(t=new k.IdentifierNode(t));else{if(!h.isLookup(r))return void l.warn(l.message.invalidTransformIgnored(r));t=S.LookupNode.make(t,e,r,n++)}}),t}function a(t){var e=r(t,t.component.data.sources),n=t.component.data.outputNodes,a=t.component.data.outputNodeRefCounts;v.requiresSelectionId(t)&&!t.parent&&(e=new k.IdentifierNode(e));var s=t.parent&&p.isLayerModel(t.parent);(p.isUnitModel(t)||p.isFacetModel(t))&&s&&(e=b.BinNode.makeFromEncoding(e,t)||e),t.transforms.length>0&&(e=i(e,t));var c=x.ParseNode.make(e,t);c&&(e=c),p.isUnitModel(t)&&(e=j.GeoJSONNode.parseAll(e,t),e=M.GeoPointNode.parseAll(e,t)),(p.isUnitModel(t)||p.isFacetModel(t))&&(s||(e=b.BinNode.makeFromEncoding(e,t)||e),e=P.TimeUnitNode.makeFromEncoding(e,t)||e);var l=t.getName(u.RAW),f=new y.OutputNode(e,l,u.RAW,a);if(n[l]=f,e=f,p.isUnitModel(t)){var h=g.AggregateNode.makeFromEncoding(e,t);h&&(e=h,v.requiresSelectionId(t)&&(e=new k.IdentifierNode(e))),e=A.StackNode.make(e,t)||e}p.isUnitModel(t)&&(e=w.FilterInvalidNode.make(e,t)||e);var d=t.getName(u.MAIN),m=new y.OutputNode(e,d,u.MAIN,a);n[d]=m,e=m;var O=null;if(p.isFacetModel(t)){var S=t.getName("facet");O=new _.FacetNode(e,t,S,m.getSource()),n[S]=O,e=O}var E=o({},t.component.data.ancestorParse,c?c.parse:{});return o({},t.component.data,{outputNodes:n,outputNodeRefCounts:a,raw:f,main:m,facetRoot:O,ancestorParse:E})}var o=this&&this.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t};Object.defineProperty(e,"__esModule",{value:!0});var s=n(0),u=n(45),c=n(59),l=n(3),f=n(96),h=n(145),d=n(2),p=n(15),v=n(18),g=n(228),b=n(426),m=n(427),y=n(16),_=n(150),O=n(428),w=n(229),x=n(230),j=n(429),M=n(430),k=n(431),S=n(432),E=n(151),A=n(231),P=n(152);e.parseTransformArray=i,e.parseData=a},function(t,e,n){"use strict";function r(t){return void 0!==t.filter}function i(t){return void 0!==t.lookup}function a(t){return void 0!==t.calculate}function o(t){return!!t.bin}function s(t){return void 0!==t.timeUnit}function u(t){return void 0!==t.aggregate}function c(t){return t.map(function(t){return r(t)?{filter:l.normalizeLogicalOperand(t.filter,f.normalizePredicate)}:t})}Object.defineProperty(e,"__esModule",{value:!0});var l=n(223),f=n(96);e.isFilter=r,e.isLookup=i,e.isCalculate=a,e.isBin=o,e.isTimeUnit=s,e.isAggregate=u,e.normalizeTransform=c},function(t,e,n){(function(t,r){function i(t,n){var r={seen:[],stylize:o};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),v(n)?r.showHidden=n:n&&e._extend(r,n),O(r.showHidden)&&(r.showHidden=!1),O(r.depth)&&(r.depth=2),O(r.colors)&&(r.colors=!1),O(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=a),u(r,t,r.depth)}function a(t,e){var n=i.styles[e];return n?"["+i.colors[n][0]+"m"+t+"["+i.colors[n][1]+"m":t}function o(t,e){return t}function s(t){var e={};return t.forEach(function(t,n){e[t]=!0}),e}function u(t,n,r){if(t.customInspect&&n&&k(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,t);return y(i)||(i=u(t,i,r)),i}var a=c(t,n);if(a)return a;var o=Object.keys(n),v=s(o);if(t.showHidden&&(o=Object.getOwnPropertyNames(n)),M(n)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return l(n);if(0===o.length){if(k(n)){var g=n.name?": "+n.name:"";return t.stylize("[Function"+g+"]","special")}if(w(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(j(n))return t.stylize(Date.prototype.toString.call(n),"date");if(M(n))return l(n)}var b="",m=!1,_=["{","}"];if(p(n)&&(m=!0,_=["[","]"]),k(n)&&(b=" [Function"+(n.name?": "+n.name:"")+"]"),w(n)&&(b=" "+RegExp.prototype.toString.call(n)),j(n)&&(b=" "+Date.prototype.toUTCString.call(n)),M(n)&&(b=" "+l(n)),0===o.length&&(!m||0==n.length))return _[0]+b+_[1];if(r<0)return w(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special");t.seen.push(n);var O;return O=m?f(t,n,r,v,o):o.map(function(e){return h(t,n,r,v,e,m)}),t.seen.pop(),d(O,b,_)}function c(t,e){if(O(e))return t.stylize("undefined","undefined");if(y(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}return m(e)?t.stylize(""+e,"number"):v(e)?t.stylize(""+e,"boolean"):g(e)?t.stylize("null","null"):void 0}function l(t){return"["+Error.prototype.toString.call(t)+"]"}function f(t,e,n,r,i){for(var a=[],o=0,s=e.length;o<s;++o)T(e,String(o))?a.push(h(t,e,n,r,String(o),!0)):a.push("");return i.forEach(function(i){i.match(/^\d+$/)||a.push(h(t,e,n,r,i,!0))}),a}function h(t,e,n,r,i,a){var o,s,c;if(c=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]},c.get?s=c.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):c.set&&(s=t.stylize("[Setter]","special")),T(r,i)||(o="["+i+"]"),s||(t.seen.indexOf(c.value)<0?(s=g(n)?u(t,c.value,null):u(t,c.value,n-1),s.indexOf("\n")>-1&&(s=a?s.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+s.split("\n").map(function(t){return"   "+t}).join("\n"))):s=t.stylize("[Circular]","special")),O(o)){if(a&&i.match(/^\d+$/))return s;o=JSON.stringify(""+i),o.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=t.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=t.stylize(o,"string"))}return o+": "+s}function d(t,e,n){var r=0;return t.reduce(function(t,e){return r++,e.indexOf("\n")>=0&&r++,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}function p(t){return Array.isArray(t)}function v(t){return"boolean"==typeof t}function g(t){return null===t}function b(t){return null==t}function m(t){return"number"==typeof t}function y(t){return"string"==typeof t}function _(t){return"symbol"==typeof t}function O(t){return void 0===t}function w(t){return x(t)&&"[object RegExp]"===E(t)}function x(t){return"object"==typeof t&&null!==t}function j(t){return x(t)&&"[object Date]"===E(t)}function M(t){return x(t)&&("[object Error]"===E(t)||t instanceof Error)}function k(t){return"function"==typeof t}function S(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t}function E(t){return Object.prototype.toString.call(t)}function A(t){return t<10?"0"+t.toString(10):t.toString(10)}function P(){var t=new Date,e=[A(t.getHours()),A(t.getMinutes()),A(t.getSeconds())].join(":");return[t.getDate(),D[t.getMonth()],e].join(" ")}function T(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var N=/%[sdj%]/g;e.format=function(t){if(!y(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(i(arguments[n]));return e.join(" ")}for(var n=1,r=arguments,a=r.length,o=String(t).replace(N,function(t){if("%%"===t)return"%";if(n>=a)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return t}}),s=r[n];n<a;s=r[++n])g(s)||!x(s)?o+=" "+s:o+=" "+i(s);return o},e.deprecate=function(n,i){function a(){if(!o){if(r.throwDeprecation)throw new Error(i);r.traceDeprecation?console.trace(i):console.error(i),o=!0}return n.apply(this,arguments)}if(O(t.process))return function(){return e.deprecate(n,i).apply(this,arguments)};if(!0===r.noDeprecation)return n;var o=!1;return a};var C,R={};e.debuglog=function(t){if(O(C)&&(C=r.env.NODE_DEBUG||""),t=t.toUpperCase(),!R[t])if(new RegExp("\\b"+t+"\\b","i").test(C)){var n=r.pid;R[t]=function(){var r=e.format.apply(e,arguments);console.error("%s %d: %s",t,n,r)}}else R[t]=function(){};return R[t]},e.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=p,e.isBoolean=v,e.isNull=g,e.isNullOrUndefined=b,e.isNumber=m,e.isString=y,e.isSymbol=_,e.isUndefined=O,e.isRegExp=w,e.isObject=x,e.isDate=j,e.isError=M,e.isFunction=k,e.isPrimitive=S,e.isBuffer=n(1006);var D=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];e.log=function(){console.log("%s - %s",P(),e.format.apply(e,arguments))},e.inherits=n(1007),e._extend=function(t,e){if(!e||!x(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t}}).call(e,n(41),n(35))},function(t,e,n){"use strict";function r(t){return[].concat(i(t,"width"),i(t,"height"))}function i(t,e){var n="width"===e?"x":"y",r=t.component.layoutSize.get(e);if(!r||"merged"===r)return[];var i=t.getSizeSignalRef(e).signal;if("range-step"===r){var l=t.getScaleComponent(n);if(l){var f=l.get("type"),h=l.get("range");if(s.hasDiscreteDomain(f)&&u.isVgRangeStep(h)){var d=t.scaleName(n);return c.isFacetModel(t.parent)&&"independent"===t.parent.component.resolve.scale[n]?[a(d,h)]:[a(d,h),{name:i,update:o(d,l,"domain('"+d+"').length")}]}}throw new Error("layout size is range step although there is no rangeStep.")}return[{name:i,value:r}]}function a(t,e){return{name:t+"_step",value:e.step}}function o(t,e,n){var r=e.get("type"),i=e.get("padding"),a=e.get("paddingOuter");a=void 0!==a?a:i;var o=e.get("paddingInner");return o="band"===r?void 0!==o?o:i:1,"bandspace("+n+", "+o+", "+a+") * "+t+"_step"}Object.defineProperty(e,"__esModule",{value:!0});var s=n(11),u=n(29),c=n(15);e.assembleLayoutSignals=r,e.sizeSignals=i,e.sizeExpr=o},function(t,e,n){"use strict";function r(t,e){if(u.isLayerModel(e)||u.isFacetModel(e))return"shared";if(u.isConcatModel(e)||u.isRepeatModel(e))return s.contains(a.POSITION_SCALE_CHANNELS,t)?"independent":"shared";throw new Error("invalid model type for resolve")}function i(t,e){var n=t.scale[e],r=s.contains(a.POSITION_SCALE_CHANNELS,e)?"axis":"legend";return"independent"===n?("shared"===t[r][e]&&o.warn(o.message.independentScaleMeansIndependentGuide(e)),"independent"):t[r][e]||"shared"}Object.defineProperty(e,"__esModule",{value:!0});var a=n(6),o=n(3),s=n(2),u=n(15);e.defaultScaleResolve=r,e.parseGuideResolve=i},function(t,e,n){"use strict";function r(t){return!(!t||"count"!==t.op&&!t.field||!t.op)}Object.defineProperty(e,"__esModule",{value:!0}),e.isSortField=r},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t};Object.defineProperty(e,"__esModule",{value:!0});var a=n(6),o=n(3),s=n(11),u=n(29),c=n(97),l=n(16),f=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.model=n,o.name=r,o.data=i,n.facet.column&&(o.columnFields=[n.vgField(a.COLUMN)],o.columnName=n.getName("column_domain"),n.fieldDef(a.COLUMN).bin&&o.columnFields.push(n.vgField(a.COLUMN,{binSuffix:"end"}))),n.facet.row&&(o.rowFields=[n.vgField(a.ROW)],o.rowName=n.getName("row_domain"),n.fieldDef(a.ROW).bin&&o.rowFields.push(n.vgField(a.ROW,{binSuffix:"end"}))),o.childModel=n.child,o}return r(e,t),Object.defineProperty(e.prototype,"fields",{get:function(){var t=[];return this.columnFields&&(t=t.concat(this.columnFields)),this.rowFields&&(t=t.concat(this.rowFields)),t},enumerable:!0,configurable:!0}),e.prototype.getSource=function(){return this.name},e.prototype.getChildIndependentFieldsWithStep=function(){for(var t={},e=0,n=["x","y"];e<n.length;e++){var r=n[e],i=this.childModel.component.scales[r];if(i&&!i.merged){var a=i.get("type"),l=i.get("range");if(s.hasDiscreteDomain(a)&&u.isVgRangeStep(l)){var f=c.assembleDomain(this.childModel,r),h=c.getFieldFromDomain(f);h?t[r]=h:o.warn("Unknown field for ${channel}.  Cannot calculate view size.")}}}return t},e.prototype.assembleRowColumnData=function(t,e,n){var r={},a="row"===t?"y":"x";return n[a]&&(r=e?{fields:["distinct_"+n[a]],ops:["max"],as:["distinct_"+n[a]]}:{fields:[n[a]],ops:["distinct"]}),{name:"row"===t?this.rowName:this.columnName,source:e||this.data,transform:[i({type:"aggregate",groupby:"row"===t?this.rowFields:this.columnFields},r)]}},e.prototype.assemble=function(){var t=[],e=null,n=this.getChildIndependentFieldsWithStep();if(this.columnName&&this.rowName&&(n.x||n.y)){e="cross_"+this.columnName+"_"+this.rowName;var r=[].concat(n.x?[n.x]:[],n.y?[n.y]:[]),i=r.map(function(){return"distinct"});t.push({name:e,source:this.data,transform:[{type:"aggregate",groupby:this.columnFields.concat(this.rowFields),fields:r,ops:i}]})}return this.columnName&&t.push(this.assembleRowColumnData("column",e,n)),this.rowName&&t.push(this.assembleRowColumnData("row",e,n)),t},e}(l.DataFlowNode);e.FacetNode=f},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},a=this&&this.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&(n[r[i]]=t[r[i]]);return n};Object.defineProperty(e,"__esModule",{value:!0});var o=n(45),s=n(2),u=n(16),c=function(t){function e(e){var n=t.call(this,null)||this;if(e=e||{name:"source"},o.isInlineData(e))n._data={values:e.values};else if(o.isUrlData(e)){if(n._data={url:e.url},e.format||(e.format={}),!e.format||!e.format.type){var r=/(?:\.([^.]+))?$/.exec(e.url)[1];s.contains(["json","csv","tsv","topojson"],r)||(r="json"),e.format.type=r}}else o.isNamedData(e)&&(n._name=e.name,n._data={});if(!o.isNamedData(e)&&e.format){var i=e.format,u=(i.parse,a(i,["parse"]));n._data.format=u}return n}return r(e,t),Object.defineProperty(e.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0}),e.prototype.hasName=function(){return!!this._name},Object.defineProperty(e.prototype,"dataName",{get:function(){return this._name},set:function(t){this._name=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{set:function(t){throw new Error("Source nodes have to be roots.")},enumerable:!0,configurable:!0}),e.prototype.remove=function(){throw new Error("Source nodes are roots and cannot be removed.")},e.prototype.hash=function(){return o.isInlineData(this._data)?(this._hash||(this._hash=s.hash(this._data)),this._hash):o.isUrlData(this._data)?s.hash([this._data.url,this._data.format]):this._name},e.prototype.assemble=function(){return i({name:this._name},this._data,{transform:[]})},e}(u.DataFlowNode);e.SourceNode=c},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t};Object.defineProperty(e,"__esModule",{value:!0});var a=n(7),o=n(95),s=n(2),u=n(16),c=function(t){function e(e,n){var r=t.call(this,e)||this;return r.formula=n,r}return r(e,t),e.prototype.clone=function(){return new e(null,s.duplicate(this.formula))},e.makeFromEncoding=function(t,n){var r=n.reduceFieldDef(function(t,e){if(e.timeUnit){var n=a.vgField(e);t[n]={as:n,timeUnit:e.timeUnit,field:e.field}}return t},{});return 0===s.keys(r).length?null:new e(t,r)},e.makeFromTransform=function(t,n){return new e(t,(r={},r[n.field]={as:n.as,timeUnit:n.timeUnit,field:n.field},r));var r},e.prototype.merge=function(t){this.formula=i({},this.formula,t.formula),t.remove()},e.prototype.producedFields=function(){var t={};return s.vals(this.formula).forEach(function(e){t[e.as]=!0}),t},e.prototype.dependentFields=function(){var t={};return s.vals(this.formula).forEach(function(e){t[e.field]=!0}),t},e.prototype.assemble=function(){return s.vals(this.formula).map(function(t){return{type:"formula",as:t.as,expr:o.fieldExpr(t.timeUnit,t.field)}})},e}(u.DataFlowNode);e.TimeUnitNode=c},function(t,e,n){"use strict";function r(t,e){return"domain("+i.stringValue(t.scaleName(e))+")"}Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),a=n(3),o=n(11),s=n(18),u={has:function(t){return"interval"===t.type&&"global"===t.resolve&&t.bind&&"scales"===t.bind},parse:function(t,e,n){var r=n.scales=[];n.project.forEach(function(e){var i=e.channel,u=t.getScaleComponent(i),c=u?u.get("type"):void 0;if(!u||!o.hasContinuousDomain(c)||o.isBinScale(c))return void a.warn(a.message.SCALE_BINDINGS_CONTINUOUS);u.set("domainRaw",{signal:s.channelSignalName(n,i,"data")},!0),r.push(i)})},topLevelSignals:function(t,e,n){if(!t.parent)return n;var r=e.scales.filter(function(t){return!n.filter(function(n){return n.name===s.channelSignalName(e,t,"data")}).length});return n.concat(r.map(function(t){return{name:s.channelSignalName(e,t,"data")}}))},signals:function(t,e,n){return t.parent&&e.scales.forEach(function(t){var r=n.filter(function(n){return n.name===s.channelSignalName(e,t,"data")})[0];r.push="outer",delete r.value,delete r.update}),n}};e.default=u,e.domain=r},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},u=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var c,l=s(n(235)),f=s(n(443)),h=u(n(30));!function(t){t[t.Min=0]="Min",t[t.Mean=1]="Mean",t[t.Sum=2]="Sum",t[t.Max=3]="Max"}(c=e.TileAggregation||(e.TileAggregation={}));var d=function(t){function e(t,n,a){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new l.default(t+a.width/2,n+a.height/2);r(this,e);var s=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return s.mask=a,s.center=o,s.dataValues=[],s}return a(e,t),o(e,[{key:"area",value:function(){return this.mask.area()}},{key:"rowcounts",value:function(){return this.mask.rowcounts()}},{key:"pixcount",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.mask.pixcount(t)}},{key:"maxValue",value:function(){return h.amax(this.dataValues)}},{key:"sumValue",value:function(){return h.asum(this.dataValues)}},{key:"contains",value:function(t,e){return!(t<this.x||e<this.y||t>=this.x+this.mask.width||e>=this.y+this.mask.height)&&0!=this.mask.mask[e-this.y][t-this.x]}},{key:"aggregateOne",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.Mean,n=0,r=0,i=Math.ceil(this.y),a=Math.ceil(this.x),o=Math.min(this.y+this.mask.height,t.height),s=Math.min(this.x+this.mask.width,t.width),u=i;u<o;u++)for(var l=t.values[u],f=this.mask.mask[u-i],h=a;h<s;h++)if(0!=f[h-a]){if(0==r)n=l[h];else{var d=l[h];switch(e){case c.Min:if(0==d)continue;n=0==n?d:Math.min(n,d);break;case c.Mean:case c.Sum:n+=d;break;case c.Max:n=Math.max(n,d)}}r++}return e===c.Mean&&r>0&&(n/=r),n}},{key:"aggregate",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.Mean;return 1==this.mask.height&&1==this.mask.width?t.map(function(t){return t.values[Math.ceil(e.y)][Math.ceil(e.x)]}):t.map(function(t){return e.aggregateOne(t,n)})}},{key:"getRectAtCenter",value:function(){if(this.mask&&void 0!=this.mask.path){var t=this.mask.path.pts,e=h.largeRectInPoly(t,{angle:0,aspectRatio:1,nTries:100});if(!e)return null;var n=e[0];return new f.default(new l.default(n.cx-n.width/2,n.cy-n.height/2),new l.default(n.cx+n.width/2,n.cy+n.height/2))}return new f.default(new l.default(this.x,this.y),new l.default(this.x+this.mask.width,this.y+this.mask.height))}}]),e}(l.default);e.default=d},function(t,e,n){function r(){i.call(this)}t.exports=r;var i=n(236).EventEmitter;n(68)(r,i),r.Readable=n(237),r.Writable=n(1062),r.Duplex=n(1063),r.Transform=n(1064),r.PassThrough=n(1065),r.Stream=r,r.prototype.pipe=function(t,e){function n(e){t.writable&&!1===t.write(e)&&c.pause&&c.pause()}function r(){c.readable&&c.resume&&c.resume()}function a(){l||(l=!0,t.end())}function o(){l||(l=!0,"function"==typeof t.destroy&&t.destroy())}function s(t){if(u(),0===i.listenerCount(this,"error"))throw t}function u(){c.removeListener("data",n),t.removeListener("drain",r),c.removeListener("end",a),c.removeListener("close",o),c.removeListener("error",s),t.removeListener("error",s),c.removeListener("end",u),c.removeListener("close",u),t.removeListener("close",u)}var c=this;c.on("data",n),t.on("drain",r),t._isStdio||e&&!1===e.end||(c.on("end",a),c.on("close",o));var l=!1;return c.on("error",s),t.on("error",s),c.on("end",u),c.on("close",u),t.on("close",u),t.emit("pipe",c),t}},function(t,e,n){"use strict";(function(e){function n(t,n,r,i){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var a,o,s=arguments.length;switch(s){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick(function(){t.call(null,n)});case 3:return e.nextTick(function(){t.call(null,n,r)});case 4:return e.nextTick(function(){t.call(null,n,r,i)});default:for(a=new Array(s-1),o=0;o<a.length;)a[o++]=arguments[o];return e.nextTick(function(){t.apply(null,a)})}}!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports={nextTick:n}:t.exports=e}).call(e,n(35))},function(t,e,n){function r(t,e){for(var n in t)e[n]=t[n]}function i(t,e,n){return o(t,e,n)}var a=n(12),o=a.Buffer;o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?t.exports=a:(r(a,e),e.Buffer=i),r(o,i),i.from=function(t,e,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return o(t,e,n)},i.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var r=o(t);return void 0!==e?"string"==typeof n?r.fill(e,n):r.fill(e):r.fill(0),r},i.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return o(t)},i.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return a.SlowBuffer(t)}},function(t,e,n){"use strict";function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;e.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var n=e.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var i in n)r(n,i)&&(t[i]=n[i])}}return t},e.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var a={arraySet:function(t,e,n,r,i){if(e.subarray&&t.subarray)return void t.set(e.subarray(n,n+r),i);for(var a=0;a<r;a++)t[i+a]=e[n+a]},flattenChunks:function(t){var e,n,r,i,a,o;for(r=0,e=0,n=t.length;e<n;e++)r+=t[e].length;for(o=new Uint8Array(r),i=0,e=0,n=t.length;e<n;e++)a=t[e],o.set(a,i),i+=a.length;return o}},o={arraySet:function(t,e,n,r,i){for(var a=0;a<r;a++)t[i+a]=e[n+a]},flattenChunks:function(t){return[].concat.apply([],t)}};e.setTyped=function(t){t?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,a)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,o))},e.setTyped(i)},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var s=a(n(463)),u=o(n(464)),c=function(){function t(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;r(this,t),this.width=e,this.height=n,void 0===a&&(a=new ArrayBuffer(e*n)),this.mask=Array(n);for(var s=0;s<n;s++)this.mask[s]=new Uint8ClampedArray(a,s*e+o,e),void 0!=i&&this.mask[s].fill(i)}return i(t,[{key:"rowcounts",value:function(){for(var t=(arguments.length>0&&void 0!==arguments[0]&&arguments[0],function(t,e){return t+e}),e=this.mask.map(function(e){return e.reduce(t)}),n=1;n<e.length;n++)e[n]+=e[n-1];return e}},{key:"pixcount",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=0,n=0;n<this.mask.length;n+=t)for(var r=0;r<this.mask[n].length;r+=t)e+=this.mask[n][r];return e}},{key:"area",value:function(){var t=this.rowcounts();return t[t.length-1]}},{key:"randomPoint",value:function(t){void 0===t&&(t=this.rowcounts());for(var e=u.create("JaeminFredPierreJean-Daniel"),n=e(t[t.length-1]),r=0;t[r]<n;)r++;r>0&&(n-=t[r-1]);for(var i=this.mask[r],a=0;a<this.width;a++)if(i[a]&&n--,0==n)return[r,a];throw new Error("Random point not found as expected")}},{key:"getCanvas",value:function(){return void 0==this.maskCanvas&&(this.maskCanvas=document.createElement("canvas"),this.maskCanvas.width=this.width,this.maskCanvas.height=this.height),this.maskCanvas}},{key:"getPath",value:function(){return void 0===this.path&&(this.path=new s.default),this.path}},{key:"copyFrom",value:function(t){for(var e=t.getImageData(0,0,this.width,this.height),n=0,r=0;r<e.height;r++)for(var i=this.mask[r],a=0;a<e.width;a++)e.data[n]>0&&(i[a]=1),n+=4}},{key:"copyTo",value:function(t){for(var e=t.getImageData(0,0,this.width,this.height),n=0,r=0;r<e.height;r++)for(var i=this.mask[r],a=0;a<e.width;a++)i[a]>0&&(e.data[n]=255),n+=4}}]),t}();e.default=c},function(t,e,n){"use strict";var r=n(8);e.a=function(t,e,n){var i=t*n,a=.5*t;return i=Math.pow((1-i)/(1+i),a),Math.tan(.5*(r.d-e))/i}},function(t,e,n){"use strict";var r=n(8);e.a=function(t,e){for(var n,i,a=.5*t,o=r.d-2*Math.atan(e),s=0;s<=15;s++)if(n=t*Math.sin(o),i=r.d-2*Math.atan(e*Math.pow((1-n)/(1+n),a))-o,o+=i,Math.abs(i)<=1e-10)return o;return-9999}},function(t,e,n){"use strict";e.a=function(t,e,n,r,i){return t*i-e*Math.sin(2*i)+n*Math.sin(4*i)-r*Math.sin(6*i)}},function(t,e,n){"use strict";e.a=function(t){return 1-.25*t*(1+t/16*(3+1.25*t))}},function(t,e,n){"use strict";e.a=function(t){return.375*t*(1+.25*t*(1+.46875*t))}},function(t,e,n){"use strict";e.a=function(t){return.05859375*t*t*(1+.75*t)}},function(t,e,n){"use strict";e.a=function(t){return t*t*t*(35/3072)}},function(t,e,n){"use strict";var r=n(71);e.a=function(t,e,n){if(null==n&&(n=r.a),i=t.length){if((e=+e)<=0||i<2)return+n(t[0],0,t);if(e>=1)return+n(t[i-1],i-1,t);var i,a=(i-1)*e,o=Math.floor(a),s=+n(t[o],o,t);return s+(+n(t[o+1],o+1,t)-s)*(a-o)}}},function(t,e,n){"use strict";var r=n(169);e.a=function(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),r.a.hasOwnProperty(e)?{space:r.a[e],local:t}:t}},function(t,e,n){"use strict";n.d(e,"b",function(){return r});var r="http://www.w3.org/1999/xhtml";e.a={svg:"http://www.w3.org/2000/svg",xhtml:r,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"}},function(t,e,n){"use strict";function r(){}e.a=function(t){return null==t?r:function(){return this.querySelector(t)}}},function(t,e,n){"use strict";e.a=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}},function(t,e,n){"use strict";function r(t,e,n){return t=i(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function i(t,e,n){return function(r){var i=l;l=r;try{t.call(this,this.__data__,e,n)}finally{l=i}}}function a(t){return t.trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}})}function o(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,a=e.length;r<a;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?e.length=i:delete this.__on}}}function s(t,e,n){var a=c.hasOwnProperty(t.type)?r:i;return function(r,i,o){var s,u=this.__on,c=a(e,i,o);if(u)for(var l=0,f=u.length;l<f;++l)if((s=u[l]).type===t.type&&s.name===t.name)return this.removeEventListener(s.type,s.listener,s.capture),this.addEventListener(s.type,s.listener=c,s.capture=n),void(s.value=e);this.addEventListener(t.type,c,n),s={type:t.type,name:t.name,value:e,listener:c,capture:n},u?u.push(s):this.__on=[s]}}function u(t,e,n,r){var i=l;t.sourceEvent=l,l=t;try{return e.apply(n,r)}finally{l=i}}n.d(e,"c",function(){return l}),e.a=u;var c={},l=null;"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(c={mouseenter:"mouseover",mouseleave:"mouseout"})),e.b=function(t,e,n){var r,i,u=a(t+""),c=u.length;if(!(arguments.length<2)){for(l=e?s:o,null==n&&(n=!1),r=0;r<c;++r)this.each(l(u[r],e,n));return this}var l=this.node().__on;if(l)for(var f,h=0,d=l.length;h<d;++h)for(r=0,f=l[h];r<c;++r)if((i=u[r]).type===f.type&&i.name===f.name)return f.value}},function(t,e,n){"use strict";var r=n(172);e.a=function(){for(var t,e=r.c;t=e.sourceEvent;)e=t;return e}},function(t,e,n){"use strict";e.a=Array.isArray},function(t,e,n){"use strict";var r=n(174);e.a=function(t){return null!=t?Object(r.a)(t)?t:[t]:[]}},function(t,e,n){"use strict";e.a=function(t){return"function"==typeof t}},function(t,e,n){"use strict";function r(t){return t&&t.constructor===i}function i(){var t=[],e=[],n=[],r=[],s=[],u=!1;return{constructor:i,insert:function(e){for(var n=Object(o.array)(e),r=0,i=n.length;r<i;++r)t.push(n[r]);return this},remove:function(t){for(var n=Object(o.isFunction)(t)?r:e,i=Object(o.array)(t),a=0,s=i.length;a<s;++a)n.push(i[a]);return this},modify:function(t,e,r){var i={field:e,value:Object(o.constant)(r)};return Object(o.isFunction)(t)?(i.filter=t,s.push(i)):(i.tuple=t,n.push(i)),this},encode:function(t,e){return Object(o.isFunction)(t)?s.push({filter:t,field:e}):n.push({tuple:t,field:e}),this},reflow:function(){return u=!0,this},pulse:function(i,o){function c(t,e,n){n?t[e]=n(t):i.encode=e,u||(l[Object(a.f)(t)]=t)}var l,f,h,d,p,v,g;for(f=0,h=t.length;f<h;++f)i.add.push(Object(a.b)(t[f]));for(l={},f=0,h=e.length;f<h;++f)v=e[f],l[Object(a.f)(v)]=v;for(f=0,h=r.length;f<h;++f)p=r[f],o.forEach(function(t){p(t)&&(l[Object(a.f)(t)]=t)});for(g in l)i.rem.push(l[g]);for(l={},f=0,h=n.length;f<h;++f)d=n[f],c(d.tuple,d.field,d.value),i.modifies(d.field);for(f=0,h=s.length;f<h;++f)d=s[f],p=d.filter,o.forEach(function(t){p(t)&&c(t,d.field,d.value)}),i.modifies(d.field);if(u)i.mod=e.length||r.length?o.filter(function(t){return l.hasOwnProperty(Object(a.f)(t))}):o.slice();else for(g in l)i.mod.push(l[g]);return i}}}e.b=r,e.a=i;var a=n(178),o=n(0)},function(t,e,n){"use strict";function r(t){return!(!t||!i(t))}function i(t){return t[l]}function a(t,e){return t[l]=e,t}function o(t){var e=t===Object(t)?t:{data:t};return i(e)?e:a(e,f++)}function s(t){return u(t,o({}))}function u(t,e){for(var n in t)e[n]=t[n];return e}function c(t,e){return a(e,i(t))}e.c=r,e.f=i,e.b=o,e.a=s,e.d=u,e.e=c;var l=Symbol("vega_id"),f=1},function(t,e,n){"use strict";function r(t){return function(e,n){t(null==e?n:null)}}function i(t){var e=t.responseType;return e&&"text"!==e?t.response:t.responseText}var a=n(75),o=n(284);e.a=function(t,e){function n(t){var e,n=d.status;if(!n&&i(d)||n>=200&&n<300||304===n){if(c)try{e=c.call(s,d)}catch(t){return void f.call("error",s,t)}else e=d;f.call("load",s,e)}else f.call("error",s,t)}var s,u,c,l,f=Object(o.a)("beforesend","progress","load","error"),h=Object(a.a)(),d=new XMLHttpRequest,p=null,v=null,g=0;if("undefined"==typeof XDomainRequest||"withCredentials"in d||!/^(http(s)?:)?\/\//.test(t)||(d=new XDomainRequest),"onload"in d?d.onload=d.onerror=d.ontimeout=n:d.onreadystatechange=function(t){d.readyState>3&&n(t)},d.onprogress=function(t){f.call("progress",s,t)},s={header:function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?h.get(t):(null==e?h.remove(t):h.set(t,e+""),s)},mimeType:function(t){return arguments.length?(u=null==t?null:t+"",s):u},responseType:function(t){return arguments.length?(l=t,s):l},timeout:function(t){return arguments.length?(g=+t,s):g},user:function(t){return arguments.length<1?p:(p=null==t?null:t+"",s)},password:function(t){return arguments.length<1?v:(v=null==t?null:t+"",s)},response:function(t){return c=t,s},get:function(t,e){return s.send("GET",t,e)},post:function(t,e){return s.send("POST",t,e)},send:function(e,n,i){return d.open(e,t,!0,p,v),null==u||h.has("accept")||h.set("accept",u+",*/*"),d.setRequestHeader&&h.each(function(t,e){d.setRequestHeader(e,t)}),null!=u&&d.overrideMimeType&&d.overrideMimeType(u),null!=l&&(d.responseType=l),g>0&&(d.timeout=g),null==i&&"function"==typeof n&&(i=n,n=null),null!=i&&1===i.length&&(i=r(i)),null!=i&&s.on("error",i).on("load",function(t){i(null,t)}),f.call("beforesend",s,d),d.send(null==n?null:n),s},abort:function(){return d.abort(),s},on:function(){var t=f.on.apply(f,arguments);return t===f?s:t}},null!=e){if("function"!=typeof e)throw new Error("invalid callback: "+e);return s.get(e)}return s}},function(t,e,n){"use strict";function r(){}function i(t,e){var n=new r;if(t instanceof r)t.each(function(t,e){n.set(e,t)});else if(Array.isArray(t)){var i,a=-1,o=t.length;if(null==e)for(;++a<o;)n.set(a,t[a]);else for(;++a<o;)n.set(e(i=t[a],a,t),i)}else if(t)for(var s in t)n.set(s,t[s]);return n}n.d(e,"b",function(){return a});var a="$";r.prototype=i.prototype={constructor:r,has:function(t){return a+t in this},get:function(t){return this[a+t]},set:function(t,e){return this[a+t]=e,this},remove:function(t){var e=a+t;return e in this&&delete this[e]},clear:function(){for(var t in this)t[0]===a&&delete this[t]},keys:function(){var t=[];for(var e in this)e[0]===a&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)e[0]===a&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)e[0]===a&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)e[0]===a&&++t;return t},empty:function(){for(var t in this)if(t[0]===a)return!1;return!0},each:function(t){for(var e in this)e[0]===a&&t(this[e],e.slice(1),this)}},e.a=i},function(t,e,n){"use strict";var r=n(182);n.d(e,"b",function(){return r.a});var i=n(581);n.d(e,"a",function(){return i.a});var a=n(582);n.d(e,"c",function(){return a.a})},function(t,e,n){"use strict";function r(t){return new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}")}function i(t,e){var n=r(t);return function(r,i){return e(n(r),i,t)}}function a(t){var e=Object.create(null),n=[];return t.forEach(function(t){for(var r in t)r in e||n.push(e[r]=r)}),n}var o={},s={},u=34,c=10,l=13;e.a=function(t){function e(t,e){var a,o,s=n(t,function(t,n){if(a)return a(t,n-1);o=t,a=e?i(t,e):r(t)});return s.columns=o||[],s}function n(t,e){function n(){if(d)return s;if(p)return p=!1,o;var e,n,r=f;if(t.charCodeAt(r)===u){for(;f++<a&&t.charCodeAt(f)!==u||t.charCodeAt(++f)===u;);return(e=f)>=a?d=!0:(n=t.charCodeAt(f++))===c?p=!0:n===l&&(p=!0,t.charCodeAt(f)===c&&++f),t.slice(r+1,e-1).replace(/""/g,'"')}for(;f<a;){if((n=t.charCodeAt(e=f++))===c)p=!0;else if(n===l)p=!0,t.charCodeAt(f)===c&&++f;else if(n!==g)continue;return t.slice(r,e)}return d=!0,t.slice(r,a)}var r,i=[],a=t.length,f=0,h=0,d=a<=0,p=!1;for(t.charCodeAt(a-1)===c&&--a,t.charCodeAt(a-1)===l&&--a;(r=n())!==s;){for(var v=[];r!==o&&r!==s;)v.push(r),r=n();e&&null==(v=e(v,h++))||i.push(v)}return i}function f(e,n){return null==n&&(n=a(e)),[n.map(p).join(t)].concat(e.map(function(e){return n.map(function(t){return p(e[t])}).join(t)})).join("\n")}function h(t){return t.map(d).join("\n")}function d(e){return e.map(p).join(t)}function p(t){return null==t?"":v.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}var v=new RegExp('["'+t+"\n\r]"),g=t.charCodeAt(0);return{parse:e,parseRows:n,format:f,formatRows:h}}},function(t,e,n){"use strict";var r=n(292);e.a=function(t){if(null==t)return r.a;var e,n,i=t.scale[0],a=t.scale[1],o=t.translate[0],s=t.translate[1];return function(t,r){r||(e=n=0);var u=2,c=t.length,l=new Array(c);for(l[0]=(e+=t[0])*i+o,l[1]=(n+=t[1])*a+s;u<c;)l[u]=t[u],++u;return l}}},function(t,e,n){"use strict";function r(t,e){var n=e.id,r=e.bbox,a=null==e.properties?{}:e.properties,o=i(t,e);return null==n&&null==r?{type:"Feature",properties:a,geometry:o}:null==r?{type:"Feature",id:n,properties:a,geometry:o}:{type:"Feature",id:n,bbox:r,properties:a,geometry:o}}function i(t,e){function n(t,e){e.length&&e.pop();for(var n=f[t<0?~t:t],r=0,i=n.length;r<i;++r)e.push(l(n[r],r));t<0&&Object(a.a)(e,i)}function r(t){return l(t)}function i(t){for(var e=[],r=0,i=t.length;r<i;++r)n(t[r],e);return e.length<2&&e.push(e[0]),e}function s(t){for(var e=i(t);e.length<4;)e.push(e[0]);return e}function u(t){return t.map(s)}function c(t){var e,n=t.type;switch(n){case"GeometryCollection":return{type:n,geometries:t.geometries.map(c)};case"Point":e=r(t.coordinates);break;case"MultiPoint":e=t.coordinates.map(r);break;case"LineString":e=i(t.arcs);break;case"MultiLineString":e=t.arcs.map(i);break;case"Polygon":e=u(t.arcs);break;case"MultiPolygon":e=t.arcs.map(u);break;default:return null}return{type:n,coordinates:e}}var l=Object(o.a)(t.transform),f=t.arcs;return c(e)}e.b=i;var a=n(590),o=n(183);e.a=function(t,e){return"GeometryCollection"===e.type?{type:"FeatureCollection",features:e.geometries.map(function(e){return r(t,e)})}:r(t,e)}},function(t,e,n){"use strict";function r(t){return i=Object(c.a)(t),a=i.format,o=i.parse,s=i.utcFormat,u=i.utcParse,i}n.d(e,"b",function(){return a}),n.d(e,"c",function(){return o}),n.d(e,"d",function(){return s}),n.d(e,"e",function(){return u}),e.a=r;var i,a,o,s,u,c=n(295);r({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]})},function(t,e,n){"use strict";function r(t){s.g.call(this,null,t),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}e.a=r;var i=n(298),a=n(77),o=n(299),s=n(1),u=n(0);r.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:a.a},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};var c=Object(u.inherits)(r,s.g);c.transform=function(t,e){var n,r=this,i=e.fork(e.NO_SOURCE|e.NO_FIELDS);return this.stamp=i.stamp,this.value&&((n=t.modified())||e.modified(this._inputs))?(this._prev=this.value,this.value=n?this.init(t):{},e.visit(e.SOURCE,function(t){r.add(t)})):(this.value=this.value||this.init(t),e.visit(e.REM,function(t){r.rem(t)}),e.visit(e.ADD,function(t){r.add(t)})),i.modifies(this._outputs),r._drop=!1!==t.drop,t.cross&&r._dims.length>1&&(r._drop=!1,this.cross()),r.changes(i)},c.cross=function(){function t(t){var e,n,r,s;for(e in t)for(r=t[e].tuple,n=0;n<o;++n)a[n][s=r[i[n]]]=s}function e(t,s,u){var c,l,f=i[u],h=a[u++];for(c in h)s[f]=h[c],l=t?t+"|"+c:c,u<o?e(l,s,u):r[l]||n.cell(l,s)}var n=this,r=n.value,i=n._dnames,a=i.map(function(){return{}}),o=i.length;t(n._prev),t(r),e("",{},0)},c.init=function(t){function e(t){for(var e,r=Object(u.array)(Object(u.accessorFields)(t)),i=0,a=r.length;i<a;++i)o[e=r[i]]||(o[e]=1,n.push(e))}var n=this._inputs=[],r=this._outputs=[],o={};this._dims=Object(u.array)(t.groupby),this._dnames=this._dims.map(function(t){var n=Object(u.accessorName)(t);return e(t),r.push(n),n}),this.cellkey=t.key?t.key:Object(i.a)(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];var s,c,l,f,h,d,p=t.fields||[null],v=t.ops||["count"],g=t.as||[],b=p.length,m={};for(b!==v.length&&Object(u.error)("Unmatched number of fields and aggregate ops."),d=0;d<b;++d)s=p[d],c=v[d],null==s&&"count"!==c&&Object(u.error)("Null aggregate field specified."),f=Object(u.accessorName)(s),h=Object(a.d)(c,f,g[d]),r.push(h),"count"!==c?(l=m[f],l||(e(s),l=m[f]=[],l.field=s,this._measures.push(l)),"count"!==c&&(this._countOnly=!1),l.push(Object(a.c)(c,h))):this._counts.push(h);return this._measures=this._measures.map(function(t){return Object(a.b)(t,t.field)}),{}},c.cellkey=Object(i.a)(),c.cell=function(t,e){var n=this.value[t];return n?0===n.num&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[t]=this.newcell(t,e),this._adds[this._alen++]=n),n},c.newcell=function(t,e){var n={key:t,num:0,agg:null,tuple:this.newtuple(e,this._prev&&this._prev[t]),stamp:this.stamp,store:!1};if(!this._countOnly){var r,i=this._measures,a=i.length;for(n.agg=Array(a),r=0;r<a;++r)n.agg[r]=new i[r](n)}return n.store&&(n.data=new o.a),n},c.newtuple=function(t,e){var n,r,i=this._dnames,a=this._dims,o={};for(n=0,r=a.length;n<r;++n)o[i[n]]=a[n](t);return e?Object(s.o)(e.tuple,o):Object(s.k)(o)},c.add=function(t){var e,n,r,i=this.cellkey(t),a=this.cell(i,t);if(a.num+=1,!this._countOnly)for(a.store&&a.data.add(t),e=a.agg,n=0,r=e.length;n<r;++n)e[n].add(e[n].get(t),t)},c.rem=function(t){var e,n,r,i=this.cellkey(t),a=this.cell(i,t);if(a.num-=1,!this._countOnly)for(a.store&&a.data.rem(t),e=a.agg,n=0,r=e.length;n<r;++n)e[n].rem(e[n].get(t),t)},c.celltuple=function(t){var e,n,r,i=t.tuple,a=this._counts;for(t.store&&t.data.values(),n=0,r=a.length;n<r;++n)i[a[n]]=t.num;if(!this._countOnly)for(e=t.agg,n=0,r=e.length;n<r;++n)e[n].set(i);return i},c.changes=function(t){var e,n,r,i,a=this._adds,o=this._mods,s=this._prev,u=this._drop,c=t.add,l=t.rem,f=t.mod;if(s)for(n in s)e=s[n],u&&!e.num||l.push(e.tuple);for(r=0,i=this._alen;r<i;++r)c.push(this.celltuple(a[r])),a[r]=null;for(r=0,i=this._mlen;r<i;++r)e=o[r],(0===e.num&&u?l:f).push(this.celltuple(e)),o[r]=null;return this._alen=this._mlen=0,this._prev=null,t}},function(t,e,n){"use strict";var r=n(50),i=n(51),a=n(114),o=n(188);e.a=function(){function t(t){var i,a,o,f=t.length,h=!1;for(null==u&&(l=c(o=Object(r.a)())),i=0;i<=f;++i)!(i<f&&s(a=t[i],i,t))===h&&((h=!h)?l.lineStart():l.lineEnd()),h&&l.point(+e(a,i,t),+n(a,i,t));if(o)return l=null,o+""||null}var e=o.a,n=o.b,s=Object(i.a)(!0),u=null,c=a.a,l=null;return t.x=function(n){return arguments.length?(e="function"==typeof n?n:Object(i.a)(+n),t):e},t.y=function(e){return arguments.length?(n="function"==typeof e?e:Object(i.a)(+e),t):n},t.defined=function(e){return arguments.length?(s="function"==typeof e?e:Object(i.a)(!!e),t):s},t.curve=function(e){return arguments.length?(c=e,null!=u&&(l=c(u)),t):c},t.context=function(e){return arguments.length?(null==e?u=l=null:l=c(u=e),t):u},t}},function(t,e,n){"use strict";function r(t){return t[0]}function i(t){return t[1]}e.a=r,e.b=i},function(t,e,n){"use strict";function r(t,e,n){var r=t._x1,i=t._y1,o=t._x2,s=t._y2;if(t._l01_a>a.f){var u=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,c=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*u-t._x0*t._l12_2a+t._x2*t._l01_2a)/c,i=(i*u-t._y0*t._l12_2a+t._y2*t._l01_2a)/c}if(t._l23_a>a.f){var l=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,f=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*l+t._x1*t._l23_2a-e*t._l12_2a)/f,s=(s*l+t._y1*t._l23_2a-n*t._l12_2a)/f}t._context.bezierCurveTo(r,i,o,s,t._x2,t._y2)}function i(t,e){this._context=t,this._alpha=e}e.b=r;var a=n(78),o=n(117);i.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:r(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}},e.a=function t(e){function n(t){return e?new i(t,e):new o.a(t,0)}return n.alpha=function(e){return t(+e)},n}(.5)},function(t,e,n){"use strict";function r(t){for(var e,n=0,r=-1,i=t.length;++r<i;)(e=+t[r][1])&&(n+=e);return n}e.b=r;var i=n(80);e.a=function(t){var e=t.map(r);return Object(i.a)(t).sort(function(t,n){return e[t]-e[n]})}},function(t,e,n){"use strict";function r(t,e){var n=o[0]=t[0];if("a"===n||"A"===n)o[1]=e*t[1],o[2]=e*t[2],o[6]=e*t[6],o[7]=e*t[7];else for(var r=1,i=t.length;r<i;++r)o[r]=e*t[r];return o}function i(t,e,n,r){for(var i=Object(a.b)(r[5],r[6],r[0],r[1],r[3],r[4],r[2],e,n),o=0;o<i.length;++o){var s=Object(a.a)(i[o]);t.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5])}}var a=n(690),o=["l",0,0,0,0,0,0,0];e.a=function(t,e,n,a,o){var s,u,c,l,f,h=null,d=0,p=0,v=0,g=0;null==n&&(n=0),null==a&&(a=0),null==o&&(o=1),t.beginPath&&t.beginPath();for(var b=0,m=e.length;b<m;++b){switch(s=e[b],1!==o&&(s=r(s,o)),s[0]){case"l":d+=s[1],p+=s[2],t.lineTo(d+n,p+a);break;case"L":d=s[1],p=s[2],t.lineTo(d+n,p+a);break;case"h":d+=s[1],t.lineTo(d+n,p+a);break;case"H":d=s[1],t.lineTo(d+n,p+a);break;case"v":p+=s[1],t.lineTo(d+n,p+a);break;case"V":p=s[1],t.lineTo(d+n,p+a);break;case"m":d+=s[1],p+=s[2],t.moveTo(d+n,p+a);break;case"M":d=s[1],p=s[2],t.moveTo(d+n,p+a);break;case"c":u=d+s[5],c=p+s[6],v=d+s[3],g=p+s[4],t.bezierCurveTo(d+s[1]+n,p+s[2]+a,v+n,g+a,u+n,c+a),d=u,p=c;break;case"C":d=s[5],p=s[6],v=s[3],g=s[4],t.bezierCurveTo(s[1]+n,s[2]+a,v+n,g+a,d+n,p+a);break;case"s":u=d+s[3],c=p+s[4],v=2*d-v,g=2*p-g,t.bezierCurveTo(v+n,g+a,d+s[1]+n,p+s[2]+a,u+n,c+a),v=d+s[1],g=p+s[2],d=u,p=c;break;case"S":u=s[3],c=s[4],v=2*d-v,g=2*p-g,t.bezierCurveTo(v+n,g+a,s[1]+n,s[2]+a,u+n,c+a),d=u,p=c,v=s[1],g=s[2];break;case"q":u=d+s[3],c=p+s[4],v=d+s[1],g=p+s[2],t.quadraticCurveTo(v+n,g+a,u+n,c+a),d=u,p=c;break;case"Q":u=s[3],c=s[4],t.quadraticCurveTo(s[1]+n,s[2]+a,u+n,c+a),d=u,p=c,v=s[1],g=s[2];break;case"t":u=d+s[1],c=p+s[2],null===h[0].match(/[QqTt]/)?(v=d,g=p):"t"===h[0]?(v=2*d-l,g=2*p-f):"q"===h[0]&&(v=2*d-v,g=2*p-g),l=v,f=g,t.quadraticCurveTo(v+n,g+a,u+n,c+a),d=u,p=c,v=d+s[1],g=p+s[2];break;case"T":u=s[1],c=s[2],v=2*d-v,g=2*p-g,t.quadraticCurveTo(v+n,g+a,u+n,c+a),d=u,p=c;break;case"a":i(t,d+n,p+a,[s[1],s[2],s[3],s[4],s[5],s[6]+d+n,s[7]+p+a]),d+=s[6],p+=s[7];break;case"A":i(t,d+n,p+a,[s[1],s[2],s[3],s[4],s[5],s[6]+n,s[7]+a]),d=s[6],p=s[7];break;case"z":case"Z":t.closePath()}h=s}}},function(t,e,n){"use strict";var r=n(52),i=n(81),a=n(119),o=n(53),s=n(121);e.a=function(t,e){function n(t,n){t("transform",Object(s.a)(n)),t("d",e(null,n))}function u(t,n){return e(Object(i.a)(t),n),Object(r.a)(t,n).translate(n.x||0,n.y||0)}function c(t,n){var r=n.x||0,i=n.y||0;t.translate(r,i),t.beginPath(),e(t,n),t.translate(-r,-i)}return{type:t,tag:"path",nested:!1,attr:n,bound:u,draw:Object(a.a)(c),pick:Object(o.c)(c)}}},function(t,e,n){"use strict";var r=n(335);e.a=function(t,e,n){return(n*=null==e.fillOpacity?1:e.fillOpacity)>0&&(t.globalAlpha=n,t.fillStyle=Object(r.a)(t,e,e.fill),!0)}},function(t,e,n){"use strict";e.a=function(t,e){return"translate("+t+","+e+")"}},function(t,e,n){"use strict";var r=n(52),i=n(81),a=n(119),o=n(53);e.a=function(t,e){function n(t,n){var r=n.mark.items;r.length&&t("d",e(null,r))}function s(t,n){var a=n.items;return 0===a.length?t:(e(Object(i.a)(t),a),Object(r.a)(t,a[0]))}function u(t,n){t.beginPath(),e(t,n)}function c(t,e,n,r,i,a){var o=e.items,s=e.bounds;return!o||!o.length||s&&!s.contains(i,a)?null:(t.pixelRatio>1&&(n*=t.pixelRatio,r*=t.pixelRatio),l(t,o,n,r)?o[0]:null)}var l=Object(o.a)(u);return{type:t,tag:"path",nested:!0,attr:n,bound:s,draw:Object(a.b)(u),pick:c}}},function(t,e,n){"use strict";function r(t){this._active=null,this._handlers={},this._loader=t||Object(a.d)()}e.a=r;var i=n(54),a=n(74),o=r.prototype;o.initialize=function(t,e,n){return this._el=t,this._obj=n||null,this.origin(e)},o.element=function(){return this._el},o.origin=function(t){return this._origin=t||[0,0],this},o.scene=function(t){return arguments.length?(this._scene=t,this):this._scene},o.on=function(){},o.off=function(){},o._handlerIndex=function(t,e,n){for(var r=t?t.length:0;--r>=0;)if(t[r].type===e&&!n||t[r].handler===n)return r;return-1},o.handlers=function(){var t,e=this._handlers,n=[];for(t in e)n.push.apply(n,e[t]);return n},o.eventName=function(t){var e=t.indexOf(".");return e<0?t:t.slice(0,e)},o.handleHref=function(t,e,n){this._loader.sanitize(n,{context:"href"}).then(function(e){var n=new MouseEvent(t.type,t),r=Object(i.d)(null,"a");for(var a in e)r.setAttribute(a,e[a]);r.dispatchEvent(n)}).catch(function(){})},o.handleTooltip=function(t,e,n){this._el.setAttribute("title",n||"")}},function(t,e,n){"use strict";function r(t,e,n){var r,i,a="<"+t;if(e)for(r in e)null!=(i=e[r])&&(a+=" "+r+'="'+i+'"');return n&&(a+=" "+n),a+">"}function i(t){return"</"+t+">"}e.b=r,e.a=i},function(t,e,n){"use strict";n.d(e,"e",function(){return r}),n.d(e,"h",function(){return i}),n.d(e,"o",function(){return a}),n.d(e,"l",function(){return o}),n.d(e,"a",function(){return s}),n.d(e,"n",function(){return u}),n.d(e,"g",function(){return c}),n.d(e,"d",function(){return l}),n.d(e,"f",function(){return f}),n.d(e,"i",function(){return h}),n.d(e,"j",function(){return d}),n.d(e,"m",function(){return p}),n.d(e,"b",function(){return v}),n.d(e,"c",function(){return g}),n.d(e,"k",function(){return b});var r="log",i="pow",a="utc",o="sqrt",s="band",u="time",c="point",l="linear",f="ordinal",h="quantile",d="quantize",p="threshold",v="bin-linear",g="bin-ordinal",b="sequential"},function(t,e,n){"use strict";var r=n(40),i=n(348),a=n(351),o=n(352),s=n(125),u=n(353),c=n(354),l=n(350);e.a=function(t,e){var n,f=typeof e;return null==e||"boolean"===f?Object(l.a)(e):("number"===f?s.a:"string"===f?(n=Object(r.a)(e))?(e=n,i.a):c.a:e instanceof r.a?i.a:e instanceof Date?o.a:Array.isArray(e)?a.a:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?u.a:s.a)(t,e)}},function(t,e,n){"use strict";function r(){}function i(t){var e;return t=(t+"").trim().toLowerCase(),(e=O.exec(t))?(e=parseInt(e[1],16),new c(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1)):(e=w.exec(t))?a(parseInt(e[1],16)):(e=x.exec(t))?new c(e[1],e[2],e[3],1):(e=j.exec(t))?new c(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=M.exec(t))?o(e[1],e[2],e[3],e[4]):(e=k.exec(t))?o(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=S.exec(t))?l(e[1],e[2]/100,e[3]/100,1):(e=E.exec(t))?l(e[1],e[2]/100,e[3]/100,e[4]):A.hasOwnProperty(t)?a(A[t]):"transparent"===t?new c(NaN,NaN,NaN,0):null}function a(t){return new c(t>>16&255,t>>8&255,255&t,1)}function o(t,e,n,r){return r<=0&&(t=e=n=NaN),new c(t,e,n,r)}function s(t){return t instanceof r||(t=i(t)),t?(t=t.rgb(),new c(t.r,t.g,t.b,t.opacity)):new c}function u(t,e,n,r){return 1===arguments.length?s(t):new c(t,e,n,null==r?1:r)}function c(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function l(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new d(t,e,n,r)}function f(t){if(t instanceof d)return new d(t.h,t.s,t.l,t.opacity);if(t instanceof r||(t=i(t)),!t)return new d;if(t instanceof d)return t;t=t.rgb();var e=t.r/255,n=t.g/255,a=t.b/255,o=Math.min(e,n,a),s=Math.max(e,n,a),u=NaN,c=s-o,l=(s+o)/2;return c?(u=e===s?(n-a)/c+6*(n<a):n===s?(a-e)/c+2:(e-n)/c+4,c/=l<.5?s+o:2-s-o,u*=60):c=l>0&&l<1?0:u,new d(u,c,l,t.opacity)}function h(t,e,n,r){return 1===arguments.length?f(t):new d(t,e,n,null==r?1:r)}function d(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function p(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}e.a=r,n.d(e,"d",function(){return g}),n.d(e,"c",function(){return b}),e.e=i,e.h=s,e.g=u,e.b=c,e.f=h;var v=n(201),g=.7,b=1/g,m="\\s*([+-]?\\d+)\\s*",y="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",_="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",O=/^#([0-9a-f]{3})$/,w=/^#([0-9a-f]{6})$/,x=new RegExp("^rgb\\("+[m,m,m]+"\\)$"),j=new RegExp("^rgb\\("+[_,_,_]+"\\)$"),M=new RegExp("^rgba\\("+[m,m,m,y]+"\\)$"),k=new RegExp("^rgba\\("+[_,_,_,y]+"\\)$"),S=new RegExp("^hsl\\("+[y,_,_]+"\\)$"),E=new RegExp("^hsla\\("+[y,_,_,y]+"\\)$"),A={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Object(v.a)(r,i,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}}),Object(v.a)(c,u,Object(v.b)(r,{brighter:function(t){return t=null==t?b:Math.pow(b,t),new c(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?g:Math.pow(g,t),new c(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},toString:function(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(1===t?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}})),Object(v.a)(d,h,Object(v.b)(r,{brighter:function(t){return t=null==t?b:Math.pow(b,t),new d(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?g:Math.pow(g,t),new d(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new c(p(t>=240?t-240:t+120,i,r),p(t,i,r),p(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}))},function(t,e,n){"use strict";function r(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}e.b=r,e.a=function(t,e,n){t.prototype=e.prototype=n,n.constructor=t}},function(t,e,n){"use strict";function r(t,e,n,r,i){var a=t*t,o=a*t;return((1-3*t+3*a-o)*e+(4-6*a+3*o)*n+(1+3*t+3*a-3*o)*r+o*i)/6}e.a=r,e.b=function(t){var e=t.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),a=t[i],o=t[i+1],s=i>0?t[i-1]:2*a-o,u=i<e-1?t[i+2]:2*o-a;return r((n-i/e)*e,s,a,o,u)}}},function(t,e,n){"use strict";e.a=function(t){return function(){return t}}},function(t,e,n){"use strict";e.a=function(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}},function(t,e,n){"use strict";e.a=function(t){return t}},function(t,e,n){"use strict";function r(t,e){function n(t,e){var n=Object(i.u)(s-2*a*Object(i.t)(e))/a;return[n*Object(i.t)(t*=a),u-n*Object(i.g)(t)]}var r=Object(i.t)(t),a=(r+Object(i.t)(e))/2;if(Object(i.a)(a)<i.i)return Object(o.a)(t);var s=1+r*(2*a-r),u=Object(i.u)(s)/a;return n.invert=function(t,e){var n=u-e;return[Object(i.e)(t,Object(i.a)(n))/a*Object(i.s)(n),Object(i.c)((s-(t*t+n*n)*a*a)/(2*a))]},n}e.a=r;var i=n(5),a=n(207),o=n(832);e.b=function(){return Object(a.a)(r).scale(155.424).center([0,33.6442])}},function(t,e,n){"use strict";function r(t){var e=0,n=i.o/3,r=Object(a.b)(t),o=r(e,n);return o.parallels=function(t){return arguments.length?r(e=t[0]*i.r,n=t[1]*i.r):[e*i.h,n*i.h]},o}e.a=r;var i=n(5),a=n(34)},function(t,e,n){"use strict";function r(t,e,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),Object(u.a)(n,t.stream(c.a)),e(c.a.result()),null!=r&&t.clipExtent(r),t}function i(t,e,n){return r(t,function(n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],a=Math.min(r/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),o=+e[0][0]+(r-a*(n[1][0]+n[0][0]))/2,s=+e[0][1]+(i-a*(n[1][1]+n[0][1]))/2;t.scale(150*a).translate([o,s])},n)}function a(t,e,n){return i(t,[[0,0],e],n)}function o(t,e,n){return r(t,function(n){var r=+e,i=r/(n[1][0]-n[0][0]),a=(r-i*(n[1][0]+n[0][0]))/2,o=-i*n[0][1];t.scale(150*i).translate([a,o])},n)}function s(t,e,n){return r(t,function(n){var r=+e,i=r/(n[1][1]-n[0][1]),a=-i*n[0][0],o=(r-i*(n[1][1]+n[0][1]))/2;t.scale(150*i).translate([a,o])},n)}e.a=i,e.c=a,e.d=o,e.b=s;var u=n(57),c=n(379)},function(t,e,n){"use strict";function r(t,e){return[t,Object(a.n)(Object(a.v)((a.l+e)/2))]}function i(t){function e(){var e=a.o*f(),s=c(Object(o.a)(c.rotate()).invert([0,0]));return d(null==p?[[s[0]-e,s[1]-e],[s[0]+e,s[1]+e]]:t===r?[[Math.max(s[0]-e,p),n],[Math.min(s[0]+e,i),u]]:[[p,Math.max(s[1]-e,n)],[i,Math.min(s[1]+e,u)]])}var n,i,u,c=Object(s.a)(t),l=c.center,f=c.scale,h=c.translate,d=c.clipExtent,p=null;return c.scale=function(t){return arguments.length?(f(t),e()):f()},c.translate=function(t){return arguments.length?(h(t),e()):h()},c.center=function(t){return arguments.length?(l(t),e()):l()},c.clipExtent=function(t){return arguments.length?(null==t?p=n=i=u=null:(p=+t[0][0],n=+t[0][1],i=+t[1][0],u=+t[1][1]),e()):null==p?null:[[p,n],[i,u]]},e()}e.c=r,e.b=i;var a=n(5),o=n(129),s=n(34);r.invert=function(t,e){return[t,2*Object(a.d)(Object(a.k)(e))-a.l]},e.a=function(){return i(r).scale(961/a.w)}},function(t,e,n){"use strict";e.a=function(){return 1e-6*(Math.random()-.5)}},function(t,e,n){"use strict";e.a=function(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}},function(t,e,n){"use strict";function r(){return y||(w(i),y=O.now()+_)}function i(){y=0}function a(){this._call=this._time=this._next=null}function o(t,e,n){var r=new a;return r.restart(t,e,n),r}function s(){r(),++p;for(var t,e=h;e;)(t=y-e._time)>=0&&e._call.call(null,t),e=e._next;--p}function u(){y=(m=O.now())+_,p=v=0;try{s()}finally{p=0,l(),y=0}}function c(){var t=O.now(),e=t-m;e>b&&(_-=e,m=t)}function l(){for(var t,e,n=h,r=1/0;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:h=e);d=t,f(r)}function f(t){p||(v&&(v=clearTimeout(v)),t-y>24?(t<1/0&&(v=setTimeout(u,t-O.now()-_)),g&&(g=clearInterval(g))):(g||(m=O.now(),g=setInterval(c,b)),p=1,w(u)))}e.b=r,e.a=a,e.c=o;var h,d,p=0,v=0,g=0,b=1e3,m=0,y=0,_=0,O="object"==typeof performance&&performance.now?performance:Date,w="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};a.prototype=o.prototype={constructor:a,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?r():+n)+(null==e?0:+e),this._next||d===this||(d?d._next=this:h=this,d=this),this._call=t,this._time=n,f()},stop:function(){this._call&&(this._call=null,this._time=1/0,f())}}},function(t,e,n){"use strict";function r(t,e){var n,r,i,o,c,l=new u(t),f=+t.value&&(l.value=t.value),h=[l];for(null==e&&(e=a);n=h.pop();)if(f&&(n.value=+n.data.value),(i=e(n.data))&&(c=i.length))for(n.children=new Array(c),o=c-1;o>=0;--o)h.push(r=n.children[o]=new u(i[o])),r.parent=n,r.depth=n.depth+1;return l.eachBefore(s)}function i(){return r(this).eachBefore(o)}function a(t){return t.children}function o(t){t.data=t.data.data}function s(t){var e=0;do{t.height=e}while((t=t.parent)&&t.height<++e)}function u(t){this.data=t,this.depth=this.height=0,this.parent=null}e.c=r,e.b=s,e.a=u;var c=n(877),l=n(878),f=n(879),h=n(880),d=n(881),p=n(882),v=n(883),g=n(884),b=n(885),m=n(886),y=n(887);u.prototype=r.prototype={constructor:u,count:c.a,each:l.a,eachAfter:h.a,eachBefore:f.a,sum:d.a,sort:p.a,path:v.a,ancestors:g.a,descendants:b.a,leaves:m.a,links:y.a,copy:i}},function(t,e,n){"use strict";function r(t){return null==t?null:i(t)}function i(t){if("function"!=typeof t)throw new Error;return t}e.a=r,e.b=i},function(t,e,n){"use strict";function r(t,e,n,r,o,s){for(var u,c,l,f,h,d,p,v,g,b,m,y=[],_=e.children,O=0,w=0,x=_.length,j=e.value;O<x;){l=o-n,f=s-r;do{h=_[w++].value}while(!h&&w<x);for(d=p=h,b=Math.max(f/l,l/f)/(j*t),m=h*h*b,g=Math.max(p/m,m/d);w<x;++w){if(h+=c=_[w].value,c<d&&(d=c),c>p&&(p=c),m=h*h*b,(v=Math.max(p/m,m/d))>g){h-=c;break}g=v}y.push(u={value:h,dice:l<f,children:_.slice(O,w)}),u.dice?Object(i.a)(u,n,r,o,j?r+=f*h/j:s):Object(a.a)(u,n,r,j?n+=l*h/j:o,s),j-=h,O=w}return y}n.d(e,"b",function(){return o}),e.c=r;var i=n(89),a=n(132),o=(1+Math.sqrt(5))/2;e.a=function t(e){function n(t,n,i,a,o){r(e,t,n,i,a,o)}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(o)},function(t,e,n){"use strict";function r(){this._=null}function i(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function a(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function o(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function s(t){for(;t.L;)t=t.L;return t}e.a=i,r.prototype={constructor:r,insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=s(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)r=n.U,n===r.L?(i=r.R,i&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(a(this,n),t=n,n=t.U),n.C=!1,r.C=!0,o(this,r))):(i=r.L,i&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(o(this,n),t=n,n=t.U),n.C=!1,r.C=!0,a(this,r))),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,u=t.L,c=t.R;if(n=u?c?s(c):u:c,i?i.L===t?i.L=n:i.R=n:this._=n,u&&c?(r=n.C,n.C=t.C,n.L=u,u.U=n,n!==c?(i=n.U,n.U=t.U,t=n.R,i.L=t,n.R=c,c.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r){if(t&&t.C)return void(t.C=!1);do{if(t===this._)break;if(t===i.L){if(e=i.R,e.C&&(e.C=!1,i.C=!0,a(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,o(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,a(this,i),t=this._;break}}else if(e=i.L,e.C&&(e.C=!1,i.C=!0,o(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,a(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,o(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}},e.b=r},function(t,e,n){"use strict";function r(t,e,n,r){var i=[null,null],o=c.e.push(i)-1;return i.left=t,i.right=e,n&&a(i,t,e,n),r&&a(i,e,t,r),c.b[t.index].halfedges.push(o),c.b[e.index].halfedges.push(o),i}function i(t,e,n){var r=[e,n];return r.left=t,r}function a(t,e,n,r){t[0]||t[1]?t.left===n?t[1]=r:t[0]=r:(t[0]=r,t.left=e,t.right=n)}function o(t,e,n,r,i){var a,o=t[0],s=t[1],u=o[0],c=o[1],l=s[0],f=s[1],h=0,d=1,p=l-u,v=f-c;if(a=e-u,p||!(a>0)){if(a/=p,p<0){if(a<h)return;a<d&&(d=a)}else if(p>0){if(a>d)return;a>h&&(h=a)}if(a=r-u,p||!(a<0)){if(a/=p,p<0){if(a>d)return;a>h&&(h=a)}else if(p>0){if(a<h)return;a<d&&(d=a)}if(a=n-c,v||!(a>0)){if(a/=v,v<0){if(a<h)return;a<d&&(d=a)}else if(v>0){if(a>d)return;a>h&&(h=a)}if(a=i-c,v||!(a<0)){if(a/=v,v<0){if(a>d)return;a>h&&(h=a)}else if(v>0){if(a<h)return;a<d&&(d=a)}return!(h>0||d<1)||(h>0&&(t[0]=[u+h*p,c+h*v]),d<1&&(t[1]=[u+d*p,c+d*v]),!0)}}}}}function s(t,e,n,r,i){var a=t[1];if(a)return!0;var o,s,u=t[0],c=t.left,l=t.right,f=c[0],h=c[1],d=l[0],p=l[1],v=(f+d)/2,g=(h+p)/2;if(p===h){if(v<e||v>=r)return;if(f>d){if(u){if(u[1]>=i)return}else u=[v,n];a=[v,i]}else{if(u){if(u[1]<n)return}else u=[v,i];a=[v,n]}}else if(o=(f-d)/(p-h),s=g-o*v,o<-1||o>1)if(f>d){if(u){if(u[1]>=i)return}else u=[(n-s)/o,n];a=[(i-s)/o,i]}else{if(u){if(u[1]<n)return}else u=[(i-s)/o,i];a=[(n-s)/o,n]}else if(h<p){if(u){if(u[0]>=r)return}else u=[e,o*e+s];a=[r,o*r+s]}else{if(u){if(u[0]<e)return}else u=[r,o*r+s];a=[e,o*e+s]}return t[0]=u,t[1]=a,!0}function u(t,e,n,r){for(var i,a=c.e.length;a--;)s(i=c.e[a],t,e,n,r)&&o(i,t,e,n,r)&&(Math.abs(i[0][0]-i[1][0])>c.f||Math.abs(i[0][1]-i[1][1])>c.f)||delete c.e[a]}e.c=r,e.b=i,e.d=a,e.a=u;var c=n(90)},function(t,e,n){"use strict";var r=n(393),i=n(20);e.a=function(t,e,n){var a=Object(i.J)(e),o=a&&a.headless;return o?t.runAsync().then(function(){return Object(r.a)(t,null,null,o,n).renderAsync(t._scenegraph.root)}):Promise.reject("Unrecognized renderer type: "+e)}},function(t,e,n){"use strict";function r(t,e){Object(i.error)(t+' for "outer" push: '+Object(i.stringValue)(e))}var i=n(0),a=["value","update","react","bind"];e.a=function(t,e){var n=t.name;if("outer"===t.push)e.signals[n]||r("No prior signal definition",n),a.forEach(function(e){void 0!==t[e]&&r("Invalid property ",e)});else{var i=e.addSignal(n,t.value);!1===t.react&&(i.react=!1),t.bind&&e.addBinding(n,t.bind)}}},function(t,e,n){"use strict";n.d(e,"b",function(){return r}),n.d(e,"a",function(){return i});var r="Literal",i="Identifier"},function(t,e,n){"use strict";function r(t){var e=this.context.data[t];return e?e.values.value:[]}function i(t,e,n,r){e[0].type!==u.b&&Object(l.error)("First argument to data functions must be a string literal.");var i=e[0].value,a=c.a+i;r.hasOwnProperty(a)||(r[a]=n.getData(i).tuplesRef())}function a(t,e,n){var r=this.context.data[t]["index:"+e],i=r?r.value.get(n):void 0;return i?i.count:i}function o(t,e,n,r){e[0].type!==u.b&&Object(l.error)("First argument to indata must be a string literal."),e[1].type!==u.b&&Object(l.error)("Second argument to indata must be a string literal.");var i=e[0].value,a=e[1].value,o=c.b+a;r.hasOwnProperty(o)||(r[o]=n.getData(i).indataRef(n,a))}function s(t,e){var n=this.context.dataflow,r=this.context.data[t],i=r.input;return n.pulse(i,n.changeset().remove(l.truthy).insert(e)),1}e.a=r,e.b=i,e.c=a,e.d=o,e.e=s;var u=n(220),c=n(137),l=n(0)},function(t,e,n){"use strict";function r(t,e,n){var r,a,o,s={};for(a=0,o=t.params.length;a<o;++a)r=t.params[a],s[r.name]=i(r,e,n);return s}function i(t,e,n){var r=t.type,i=e[t.name];return"index"===r?o(t,e,n):void 0===i?void(t.required&&Object(y.error)("Missing required "+Object(y.stringValue)(e.type)+" parameter: "+Object(y.stringValue)(t.name))):"param"===r?s(t,e,n):"projection"===r?n.projectionRef(e[t.name]):t.array&&!Object(g.g)(i)?i.map(function(e){return a(t,e,n)}):a(t,i,n)}function a(t,e,n){var r=t.type;if(Object(g.g)(e))return h(r)?Object(y.error)("Expression references can not be signals."):d(r)?n.fieldRef(e):p(r)?n.compareRef(e):n.signalRef(e.signal);var i=t.expr||d(r);return i&&c(e)?Object(v.a)(e.expr,n):i&&l(e)?Object(g.f)(e.field):h(r)?Object(v.a)(e,n):f(r)?Object(g.k)(n.getData(e).values):d(r)?Object(g.f)(e):p(r)?n.compareRef(e):e}function o(t,e,n){return Object(y.isString)(e.from)||Object(y.error)('Lookup "from" parameter must be a string literal.'),n.getData(e.from).lookupRef(n,e.key)}function s(t,e,n){var r=e[t.name];return t.array?(Object(y.isArray)(r)||Object(y.error)("Expected an array of sub-parameters. Instead: "+Object(y.stringValue)(r)),r.map(function(e){return u(t,e,n)})):u(t,r,n)}function u(t,e,n){var i,a,o,s,u;for(s=0,u=t.params.length;s<u;++s){a=t.params[s];for(o in a.key)if(a.key[o]!==e[o]){a=null;break}if(a)break}return a||Object(y.error)("Unsupported parameter: "+Object(y.stringValue)(e)),i=Object(y.extend)(r(a,e,n),a.key),Object(g.k)(n.add(Object(b.p)(i)))}function c(t){return t&&t.expr}function l(t){return t&&t.field}function f(t){return"data"===t}function h(t){return"expr"===t}function d(t){return"field"===t}function p(t){return"compare"===t}var v=n(58),g=n(21),b=n(27),m=n(1),y=n(0);e.a=function(t,e){var n=Object(m.i)(t.type);n||Object(y.error)("Unrecognized transform type: "+Object(y.stringValue)(t.type));var i=Object(g.e)(n.type.toLowerCase(),null,r(n,t,e));return t.signal&&e.addSignal(t.signal,e.proxy(i)),i.metadata=n.metadata||{},i}},function(t,e,n){"use strict";function r(t){return!!t.or}function i(t){return!!t.and}function a(t){return!!t.not}function o(t,e){if(a(t))o(t.not,e);else if(i(t))for(var n=0,s=t.and;n<s.length;n++){var u=s[n];o(u,e)}else if(r(t))for(var c=0,l=t.or;c<l.length;c++){var u=l[c];o(u,e)}else e(t)}function s(t,e){return a(t)?{not:s(t.not,e)}:i(t)?{and:t.and.map(function(t){return s(t,e)})}:r(t)?{or:t.or.map(function(t){return s(t,e)})}:e(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.isLogicalOr=r,e.isLogicalAnd=i,e.isLogicalNot=a,e.forEachLeave=o,e.normalizeLogicalOperand=s},function(t,e,n){"use strict";function r(t){return!!s[t]}var i=this&&this.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t};Object.defineProperty(e,"__esModule",{value:!0});var a=n(2);e.AXIS_PARTS=["domain","grid","labels","ticks","title"],e.AXIS_PROPERTY_TYPE={grid:"grid",gridScale:"grid",domain:"main",labels:"main",labelFlush:"main",labelOverlap:"main",minExtent:"main",maxExtent:"main",offset:"main",ticks:"main",title:"main",values:"both",scale:"both",zindex:"both"};var o={orient:1,domain:1,format:1,grid:1,labelBound:1,labelFlush:1,labelPadding:1,labels:1,labelOverlap:1,maxExtent:1,minExtent:1,offset:1,position:1,tickCount:1,ticks:1,tickSize:1,title:1,titlePadding:1,values:1,zindex:1},s=i({},o,{encoding:1,labelAngle:1,titleMaxLength:1}),u=i({scale:1},o,{gridScale:1,encode:1});e.isAxisProperty=r,e.VG_AXIS_PROPERTIES=a.flagKeys(u),e.AXIS_PROPERTIES=a.flagKeys(s)},function(t,e,n){"use strict";var r=this&&this.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t};Object.defineProperty(e,"__esModule",{value:!0});var i=n(2);e.defaultLegendConfig={};var a={entryPadding:1,format:1,offset:1,orient:1,padding:1,tickCount:1,title:1,type:1,values:1,zindex:1},o=r({},a,{opacity:1,shape:1,stroke:1,fill:1,size:1,encode:1});e.LEGEND_PROPERTIES=i.flagKeys(a),e.VG_LEGEND_PROPERTIES=i.flagKeys(o)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SELECTION_ID="_vgsid_",e.defaultConfig={single:{on:"click",fields:[e.SELECTION_ID],resolve:"global",empty:"all"},multi:{on:"click",fields:[e.SELECTION_ID],toggle:"event.shiftKey",resolve:"global",empty:"all"},interval:{on:"[mousedown, window:mouseup] > window:mousemove!",encodings:["x","y"],translate:"[mousedown, window:mouseup] > window:mousemove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global"}}},function(t,e,n){"use strict";function r(t){return!!v[t]}function i(t){var e=t.x,n=t.y;if(l.isFieldDef(e)&&l.isFieldDef(n))if("quantitative"===e.type&&"quantitative"===n.type){if(e.stack)return"x";if(n.stack)return"y";if(!!e.aggregate!=!!n.aggregate)return e.aggregate?"x":"y"}else{if("quantitative"===e.type)return"x";if("quantitative"===n.type)return"y"}else{if(l.isFieldDef(e)&&"quantitative"===e.type)return"x";if(l.isFieldDef(n)&&"quantitative"===n.type)return"y"}}function a(t,n,a){var v=h.isMarkDef(t)?t.type:t;if(!p.contains(e.STACKABLE_MARKS,v))return null;var g=i(n);if(!g)return null;var b=n[g],m=l.isStringFieldDef(b)?l.vgField(b,{}):void 0,y="x"===g?"y":"x",_=n[y],O=l.isStringFieldDef(_)?l.vgField(_,{}):void 0,w=u.NONPOSITION_CHANNELS.reduce(function(t,e){if(c.channelHasField(n,e)){var r=n[e];(o.isArray(r)?r:[r]).forEach(function(n){var r=l.getFieldDef(n);if(!r.aggregate){var i=l.isStringFieldDef(r)?l.vgField(r,{}):void 0;(!i||i!==O&&i!==m)&&t.push({channel:e,fieldDef:r})}})}return t},[]);if(0===w.length)return null;var x=void 0;return(x=void 0!==b.stack?b.stack:p.contains(e.STACK_BY_DEFAULT_MARKS,v)&&void 0===a?"zero":a)&&r(x)?b.scale&&b.scale.type&&b.scale.type!==d.ScaleType.LINEAR?(f.warn(f.message.cannotStackNonLinearScale(b.scale.type)),null):c.channelHasField(n,g===u.X?u.X2:u.Y2)?(f.warn(f.message.cannotStackRangedMark(g)),null):(b.aggregate&&!p.contains(s.SUM_OPS,b.aggregate)&&f.warn(f.message.stackNonSummativeAggregate(b.aggregate)),{groupbyChannel:_?y:void 0,fieldChannel:g,impute:p.contains(["area","line"],v),stackBy:w,offset:x}):null}Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),s=n(93),u=n(6),c=n(28),l=n(7),f=n(3),h=n(23),d=n(11),p=n(2),v={zero:1,center:1,normalize:1};e.isStackOffset=r,e.STACKABLE_MARKS=[h.BAR,h.AREA,h.RULE,h.POINT,h.CIRCLE,h.SQUARE,h.LINE,h.TEXT,h.TICK],e.STACK_BY_DEFAULT_MARKS=[h.BAR,h.AREA],e.stack=a},function(t,e,n){"use strict";function r(t,e,n){return n.bin?(t[u.vgField(n,{})]=!0,t[u.vgField(n,{binSuffix:"end"})]=!0,f.binRequiresRange(n,e)&&(t[u.vgField(n,{binSuffix:"range"})]=!0)):t[u.vgField(n)]=!0,t}function i(t,e){for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];for(var i in r)r.hasOwnProperty(i)&&(n in t?t[n][i]=r[i]:t[n]={op:r[i]})}}var a=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t};Object.defineProperty(e,"__esModule",{value:!0});var s=n(6),u=n(7),c=n(3),l=n(2),f=n(25),h=n(16),d=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.dimensions=n,i.measures=r,i}return a(e,t),e.prototype.clone=function(){return new e(null,o({},this.dimensions),l.duplicate(this.measures))},e.makeFromEncoding=function(t,n){var i=!1;n.forEachFieldDef(function(t){t.aggregate&&(i=!0)});var a={},o={};return i?(n.forEachFieldDef(function(t,e){t.aggregate?"count"===t.aggregate?(a["*"]=a["*"]||{},a["*"].count=u.vgField(t,{aggregate:"count"})):(a[t.field]=a[t.field]||{},a[t.field][t.aggregate]=u.vgField(t),s.isScaleChannel(e)&&"unaggregated"===n.scaleDomain(e)&&(a[t.field].min=u.vgField(t,{aggregate:"min"}),a[t.field].max=u.vgField(t,{aggregate:"max"}))):r(o,e,t)}),l.keys(o).length+l.keys(a).length===0?null:new e(t,o,a)):null},e.makeFromTransform=function(t,n){for(var r={},i={},a=0,o=n.aggregate;a<o.length;a++){var s=o[a];s.op&&("count"===s.op?(i["*"]=i["*"]||{},i["*"].count=s.as||u.vgField(s)):(i[s.field]=i[s.field]||{},i[s.field][s.op]=s.as||u.vgField(s)))}for(var c=0,f=n.groupby||[];c<f.length;c++){var s=f[c];r[s]=!0}return l.keys(r).length+l.keys(i).length===0?null:new e(t,r,i)},e.prototype.merge=function(t){l.differ(this.dimensions,t.dimensions)?c.debug("different dimensions, cannot merge"):(i(this.measures,t.measures),t.remove())},e.prototype.addDimensions=function(t){var e=this;t.forEach(function(t){return e.dimensions[t]=!0})},e.prototype.dependentFields=function(){var t={};return l.keys(this.dimensions).forEach(function(e){return t[e]=!0}),l.keys(this.measures).forEach(function(e){return t[e]=!0}),t},e.prototype.producedFields=function(){var t=this,e={};return l.keys(this.measures).forEach(function(n){l.keys(t.measures[n]).forEach(function(t){e[t+"_"+n]=!0})}),e},e.prototype.assemble=function(){for(var t=[],e=[],n=[],r=0,i=l.keys(this.measures);r<i.length;r++)for(var a=i[r],o=0,s=l.keys(this.measures[a]);o<s.length;o++){var u=s[o];n.push(this.measures[a][u]),t.push(u),e.push(a)}return{type:"aggregate",groupby:l.keys(this.dimensions),ops:t,fields:e,as:n}},e}(h.DataFlowNode);e.AggregateNode=d},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t};Object.defineProperty(e,"__esModule",{value:!0});var a=n(6),o=n(7),s=n(11),u=n(2),c=n(16),l=function(t){function e(e,n){var r=t.call(this,e)||this;return r.fieldDefs=n,r}return r(e,t),e.prototype.clone=function(){return new e(null,i({},this.fieldDefs))},e.make=function(t,n){if("filter"!==n.config.invalidValues)return null;var r=n.reduceFieldDef(function(t,e,r){var i=a.isScaleChannel(r)&&n.getScaleComponent(r);if(i){var o=i.get("type");s.hasContinuousDomain(o)&&!e.aggregate&&(t[e.field]=e)}return t},{});return u.keys(r).length?new e(t,r):null},Object.defineProperty(e.prototype,"filter",{get:function(){return this.fieldDefs},enumerable:!0,configurable:!0}),e.prototype.assemble=function(){var t=this,e=u.keys(this.filter).reduce(function(e,n){var r=t.fieldDefs[n],i=o.vgField(r,{expr:"datum"});return null!==r&&(e.push(i+" !== null"),e.push("!isNaN("+i+")")),e},[]);return e.length>0?{type:"filter",expr:e.join(" && ")}:null},e}(c.DataFlowNode);e.FilterInvalidNode=l},function(t,e,n){"use strict";function r(t,e){var n="datum"+d.accessPath(t);if("number"===e)return"toNumber("+n+")";if("boolean"===e)return"toBoolean("+n+")";if("string"===e)return"toString("+n+")";if("date"===e)return"toDate("+n+")";if(0===e.indexOf("date:")){var r=e.slice(5,e.length);return"timeParse("+n+","+r+")"}if(0===e.indexOf("utc:")){var r=e.slice(4,e.length);return"utcParse("+n+","+r+")"}return c.warn(c.message.unrecognizedParse(e)),null}var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),a=this&&this.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t};Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),s=n(93),u=n(7),c=n(3),l=n(223),f=n(96),h=n(145),d=n(2),p=n(15),v=n(16),g=function(t){function e(e,n){var r=t.call(this,e)||this;return r._parse={},r._parse=n,r}return i(e,t),e.prototype.clone=function(){return new e(null,d.duplicate(this.parse))},e.make=function(t,n){var r={},i={};(n.transforms||[]).forEach(function(t){h.isCalculate(t)?i[t.as]=!0:h.isFilter(t)&&l.forEachLeave(t.filter,function(t){f.isFieldPredicate(t)&&t.timeUnit&&(r[t.field]="date")})},{}),(p.isUnitModel(n)||p.isFacetModel(n))&&n.forEachFieldDef(function(t){if(u.isTimeFieldDef(t))r[t.field]="date";else if(u.isNumberFieldDef(t)){if(i[t.field]||s.isCountingAggregateOp(t.aggregate))return;r[t.field]="number"}});var a=n.data;if(a&&a.format&&a.format.parse){var o=a.format.parse;d.keys(o).forEach(function(t){r[t]=o[t]})}var v=n.component.data.ancestorParse;return d.keys(v).forEach(function(t){r[t]!==v[t]?c.warn(c.message.differentParse(t,r[t],v[t])):delete r[t]}),0===d.keys(r).length?null:new e(t,r)},Object.defineProperty(e.prototype,"parse",{get:function(){return this._parse},enumerable:!0,configurable:!0}),e.prototype.merge=function(t){this._parse=a({},this._parse,t.parse),t.remove()},e.prototype.assembleFormatParse=function(){return this._parse},e.prototype.producedFields=function(){return o.toSet(d.keys(this.parse))},e.prototype.dependentFields=function(){return o.toSet(d.keys(this.parse))},e.prototype.assembleTransforms=function(){var t=this;return d.keys(this._parse).map(function(e){var n=r(e,t._parse[e]);return n?{type:"formula",expr:n,as:e}:null}).filter(function(t){return null!==t})},e}(v.DataFlowNode);e.ParseNode=g},function(t,e,n){"use strict";function r(t){return t.stack.stackBy.reduce(function(t,e){var n=e.fieldDef,r=o.vgField(n);return r&&t.push(r),t},[])}var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),o=n(7),s=n(2),u=n(25),c=n(16),l=function(t){function e(e,n){var r=t.call(this,e)||this;return r._stack=n,r}return i(e,t),e.prototype.clone=function(){return new e(null,s.duplicate(this._stack))},e.make=function(t,n){var i=n.stack;if(!i)return null;var a;i.groupbyChannel&&(a=n.fieldDef(i.groupbyChannel));var o,s=r(n),c=n.encoding.order;return o=c?u.sortParams(c):s.reduce(function(t,e){return t.field.push(e),t.order.push("descending"),t},{field:[],order:[]}),new e(t,{dimensionFieldDef:a,field:n.vgField(i.fieldChannel),facetby:[],stackby:s,sort:o,offset:i.offset,impute:i.impute})},Object.defineProperty(e.prototype,"stack",{get:function(){return this._stack},enumerable:!0,configurable:!0}),e.prototype.addDimensions=function(t){this._stack.facetby=this._stack.facetby.concat(t)},e.prototype.dependentFields=function(){var t={};t[this._stack.field]=!0,this.getGroupbyFields().forEach(function(e){return t[e]=!0}),this._stack.facetby.forEach(function(e){return t[e]=!0});var e=this._stack.sort.field;return a.isArray(e)?e.forEach(function(e){return t[e]=!0}):t[e]=!0,t},e.prototype.producedFields=function(){var t={};return t[this._stack.field+"_start"]=!0,t[this._stack.field+"_end"]=!0,t},e.prototype.getGroupbyFields=function(){var t=this._stack,e=t.dimensionFieldDef,n=t.impute;return e?e.bin?n?[o.vgField(e,{binSuffix:"mid"})]:[o.vgField(e,{}),o.vgField(e,{binSuffix:"end"})]:[o.vgField(e)]:[]},e.prototype.assemble=function(){var t=[],e=this._stack,n=e.facetby,r=e.field,i=e.dimensionFieldDef,a=e.impute,s=e.offset,u=e.sort,c=e.stackby;if(a&&i){var l=i?o.vgField(i,{binSuffix:"mid"}):void 0;i.bin&&t.push({type:"formula",expr:"("+o.vgField(i,{expr:"datum"})+"+"+o.vgField(i,{expr:"datum",binSuffix:"end"})+")/2",as:l}),t.push({type:"impute",field:r,groupby:c,key:l,method:"value",value:0})}return t.push({type:"stack",groupby:this.getGroupbyFields().concat(n),field:r,sort:u,as:[r+"_start",r+"_end"],offset:s}),t},e}(c.DataFlowNode);e.StackNode=l},function(t,e,n){"use strict";function r(t,n,r){var a=h.channelSignalName(n,r,"visual"),o=h.channelSignalName(n,r,"data"),c=d.default.has(n),f=t.scaleName(r),p=s.stringValue(f),v=t.getScaleComponent(r),g=v?v.get("type"):void 0,b=t.getSizeSignalRef(r===u.X?"width":"height").signal,m=r+"(unit)",y=i(n,function(t,e){return t.concat({events:e.between[0],update:"["+m+", "+m+"]"},{events:e,update:"["+a+"[0], clamp("+m+", 0, "+b+")]"})});return y.push({events:{signal:n.name+e.SCALE_TRIGGER},update:l.hasContinuousDomain(g)&&!l.isBinScale(g)?"[scale("+p+", "+o+"[0]), scale("+p+", "+o+"[1])]":"[0, 0]"}),c?[{name:o,on:[]}]:[{name:a,value:[],on:y},{name:o,on:[{events:{signal:a},update:a+"[0] === "+a+"[1] ? null : invert("+p+", "+a+")"}]}]}function i(t,e){return t.events.reduce(function(t,n){return n.between?e(t,n):(c.warn(n+" is not an ordered event stream for interval selections"),t)},[])}var a=this&&this.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},o=this&&this.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&(n[r[i]]=t[r[i]]);return n};Object.defineProperty(e,"__esModule",{value:!0});var s=n(0),u=n(6),c=n(3),l=n(11),f=n(2),h=n(18),d=n(153);e.BRUSH="_brush",e.SCALE_TRIGGER="_scale_trigger";var p={predicate:"vlInterval",scaleDomain:"vlIntervalDomain",signals:function(t,n){var a=n.name,o=d.default.has(n),f=[],p=[],v=[],g=[];if(n.translate&&!o){var b="!event.item || event.item.mark.name !== "+s.stringValue(a+e.BRUSH);i(n,function(t,e){var n=e.between[0].filter||(e.between[0].filter=[]);n.indexOf(b)<0&&n.push(b)})}return n.project.forEach(function(e){var i=e.channel;if(i!==u.X&&i!==u.Y)return void c.warn("Interval selections only support x and y encoding channels.");var a=r(t,n,i),o=h.channelSignalName(n,i,"data"),d=h.channelSignalName(n,i,"visual"),b=s.stringValue(t.scaleName(i)),m=t.getScaleComponent(i).get("type"),y=l.hasContinuousDomain(m)?"+":"";f.push.apply(f,a),v.push(o),p.push("{encoding: "+s.stringValue(i)+", field: "+s.stringValue(e.field)+", extent: "+o+"}"),g.push({scaleName:t.scaleName(i),expr:"(!isArray("+o+") || ("+y+"invert("+b+", "+d+")[0] === "+y+o+"[0] && "+y+"invert("+b+", "+d+")[1] === "+y+o+"[1]))"})}),o||f.push({name:a+e.SCALE_TRIGGER,update:g.map(function(t){return t.expr}).join(" && ")+" ? "+(a+e.SCALE_TRIGGER)+" : {}"}),f.concat({name:a+h.TUPLE,on:[{events:v.map(function(t){return{signal:t}}),update:v.join(" && ")+" ? {unit: "+h.unitName(t)+", intervals: ["+p.join(", ")+"]} : null"}]})},modifyExpr:function(t,e){return e.name+h.TUPLE+", "+("global"===e.resolve?"true":"{unit: "+h.unitName(t)+"}")},marks:function(t,n,r){var i=n.name,u=h.positionalProjections(n),c=u.xi,l=u.yi,p="data("+s.stringValue(n.name+h.STORE)+")";if(d.default.has(n))return r;var v={x:null!==c?{signal:i+"_x[0]"}:{value:0},y:null!==l?{signal:i+"_y[0]"}:{value:0},x2:null!==c?{signal:i+"_x[1]"}:{field:{group:"width"}},y2:null!==l?{signal:i+"_y[1]"}:{field:{group:"height"}}};if("global"===n.resolve)for(var g=0,b=f.keys(v);g<b.length;g++){var m=b[g];v[m]=[a({test:p+".length && "+p+"[0].unit === "+h.unitName(t)},v[m]),{value:0}]}var y=n.mark,_=y.fill,O=y.fillOpacity,w=o(y,["fill","fillOpacity"]),x=f.keys(w).reduce(function(t,e){return t[e]={value:w[e]},t},{});return[{name:i+e.BRUSH+"_bg",type:"rect",clip:!0,encode:{enter:{fill:{value:_},fillOpacity:{value:O}},update:v}}].concat(r,{name:i+e.BRUSH,type:"rect",clip:!0,encode:{enter:a({fill:{value:"transparent"}},x),update:v}})}};e.default=p},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),i=n(18),a={has:function(t){return"interval"!==t.type&&t.nearest},marks:function(t,e,n){var a=i.positionalProjections(e),o=a.x,s=a.y,u=t.mark();if("line"===u||"area"===u)return r.warn(r.message.nearestNotSupportForContinuous(u)),n;var c={name:t.getName("voronoi"),type:"path",from:{data:t.getName("marks")},encode:{enter:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0}}},transform:[{type:"voronoi",x:o||!o&&!s?"datum.x":{expr:"0"},y:s||!o&&!s?"datum.y":{expr:"0"},size:[t.getSizeSignalRef("width"),t.getSizeSignalRef("height")]}]},l=0,f=!1;return n.forEach(function(e,n){var r=e.name||"";r===t.component.mark[0].name?l=n:r.indexOf("voronoi")>=0&&(f=!0)}),f||n.splice(l+1,0,c),n}};e.default=a},function(t,e,n){"use strict";function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var u=s(n(46)),c=n(1049),l=n(30),f=function(){function t(e,n){!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a(this,t),this.domain=e,this.range=n,this.type="linear",this.scale=(this.range[1]-this.range[0])/(this.domain[1]-this.domain[0]),this.min=l.amin(this.range),this.max=l.amax(this.range)}return o(t,[{key:"clamp",value:function(t){return t<this.min?this.min:t>this.max?this.max:t}},{key:"map",value:function(t){var e=(t-this.domain[0])*this.scale+this.range[0];return this.clamp?this.clamp(e):e}},{key:"invmap",value:function(t){var e=l.amin(this.domain),n=l.amax(this.domain);return t<=this.min?this.scale>0?e:n:t>=this.max?this.scale>0?n:e:(t-this.range[0])/this.scale+this.domain[0]}}]),t}();e.LinearScale=f;var h=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Math.E;a(this,t),this.domain=e,this.range=n,this.base=r,this.type="log",this.logBase=Math.log(r),this.internalScale=new f([Math.log(e[0])/this.logBase,Math.log(e[1])/this.logBase],n)}return o(t,[{key:"map",value:function(t){return 0===t?NaN:this.internalScale.map(Math.log(t)/this.logBase)}},{key:"invmap",value:function(t){return Math.exp(this.internalScale.invmap(t)*this.logBase)}}]),t}();e.LogScale=h;var d=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;a(this,t),this.domain=e,this.range=n,this.degree=r,this.type="root",this.internalScale=new f([Math.pow(e[0],1/r),Math.pow(e[1],1/r)],n)}return o(t,[{key:"map",value:function(t){return this.internalScale.map(Math.pow(t,1/this.degree))}},{key:"invmap",value:function(t){return Math.pow(this.internalScale.invmap(t),this.degree)}}]),t}();e.RootScale=d;var p=function(t){function e(t,n){a(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,2));return i.domain=t,i.range=n,i.type="sqrt",i}return i(e,t),e}(d);e.SquareRootScale=p;var v=function(t){function e(t,n){a(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,3));return i.domain=t,i.range=n,i.type="cbrt",i}return i(e,t),e}(d);e.CubicRootScale=v;var g=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32;a(this,t),this.domain=e,this.range=n,this.level=r,this.type="equidepth",this.bounds=[],this.minBound=0,this.digest=new c.Digest,this.addPoints(e)}return o(t,[{key:"addPoints",value:function(t){this.digest.push(t.filter(l.positive))}},{key:"addPoint",value:function(t){l.positive(t)&&this.digest.push(t)}},{key:"computeBounds",value:function(){this.digest.compress();var t=this.level;this.minBound=this.digest.percentile(0),this.bounds=this.digest.percentile(l.arange(t).map(function(e){return(e+1)/t}))}},{key:"getBounds",value:function(){return 0==this.bounds.length&&this.computeBounds(),this.bounds}},{key:"map",value:function(t){var e=this.range[0];if(t<=this.domain[0])return e;if(t>=this.domain[1])return this.range[1];var n=this.level-1,r=this.range[1]-e;this.getBounds();for(var i=0;i<n;i++)if(t<this.bounds[i])return e+r/n*i;return e+r}},{key:"invmap",value:function(t){if(this.getBounds(),t<this.range[0])return this.minBound;if(t>this.range[1])return this.bounds[this.level-1];var e=(t-this.range[0])/(this.range[1]-this.range[0])*this.level,n=Math.floor(e),r=e-n;return(0===n?this.minBound:this.bounds[n-1])*(1-r)+this.bounds[n]*r}}]),t}();e.EquiDepthScale=g;var b=function(){function t(e,n,r){a(this,t),this.colorRange=e,this.interpolator=n,this.outOfRangeColor=r}return o(t,[{key:"map",value:function(t){return isNaN(t)&&!this.outOfRangeColor?this.outOfRangeColor:u.default.interpolate(this.colorRange[0],this.colorRange[1],this.interpolator.map(t))}}]),t}();e.ColorScale=b;var m=function(t){function e(t,n){a(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,new f(t,[0,1])));return i.domain=t,i.colorRange=n,i}return i(e,t),e}(b);e.LinearColorScale=m;var y=function(t){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Math.E;a(this,e);var o=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,new h(t,[0,1],i)));return o.domain=t,o.colorRange=n,o.base=i,o}return i(e,t),e}(b);e.LogColorScale=y;var _=function(t){function e(t,n){a(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,new p(t,[0,1])));return i.domain=t,i.colorRange=n,i}return i(e,t),e}(b);e.SquareRootColorScale=_;var O=function(t){function e(t,n){a(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,new v(t,[0,1])));return i.domain=t,i.colorRange=n,i}return i(e,t),e}(b);e.CubicRootColorScale=O;var w=function(t){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32;a(this,e);var o=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,new g(t,[0,1],i)));return o.domain=t,o.colorRange=n,o.level=i,o}return i(e,t),o(e,[{key:"scale",value:function(){return this.interpolator}}]),e}(b);e.EquiDepthColorScale=w},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(e,n){r(this,t),this.x=e,this.y=n}return i(t,[{key:"round",value:function(){return new t(Math.round(this.x),Math.round(this.y))}}]),t}();e.default=a},function(t,e){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(t){return"function"==typeof t}function i(t){return"number"==typeof t}function a(t){return"object"==typeof t&&null!==t}function o(t){return void 0===t}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if(!i(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,n,i,s,u,c;if(this._events||(this._events={}),"error"===t&&(!this._events.error||a(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var l=new Error('Uncaught, unspecified "error" event. ('+e+")");throw l.context=e,l}if(n=this._events[t],o(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(a(n))for(s=Array.prototype.slice.call(arguments,1),c=n.slice(),i=c.length,u=0;u<i;u++)c[u].apply(this,s);return!0},n.prototype.addListener=function(t,e){var i;if(!r(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,r(e.listener)?e.listener:e),this._events[t]?a(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,a(this._events[t])&&!this._events[t].warned&&(i=o(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&i>0&&this._events[t].length>i&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){function n(){this.removeListener(t,n),i||(i=!0,e.apply(this,arguments))}if(!r(e))throw TypeError("listener must be a function");var i=!1;return n.listener=e,this.on(t,n),this},n.prototype.removeListener=function(t,e){var n,i,o,s;if(!r(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],o=n.length,i=-1,n===e||r(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(a(n)){for(s=o;s-- >0;)if(n[s]===e||n[s].listener&&n[s].listener===e){i=s;break}if(i<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],r(n))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){return this._events&&this._events[t]?r(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(r(e))return 1;if(e)return e.length}return 0},n.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,n){e=t.exports=n(445),e.Stream=e,e.Readable=e,e.Writable=n(238),e.Duplex=n(61),e.Transform=n(449),e.PassThrough=n(1061)},function(t,e,n){"use strict";(function(e,r,i){function a(t){var e=this;this.next=null,this.entry=null,this.finish=function(){S(e,t)}}function o(t){return R.from(t)}function s(t){return R.isBuffer(t)||t instanceof D}function u(){}function c(t,e){A=A||n(61),t=t||{};var r=e instanceof A;this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var i=t.highWaterMark,o=t.writableHighWaterMark,s=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(o||0===o)?o:s,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var u=!1===t.decodeStrings;this.decodeStrings=!u,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){m(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new a(this)}function l(t){if(A=A||n(61),!(I.call(l,this)||this instanceof A))return new l(t);this._writableState=new c(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),C.call(this)}function f(t,e){var n=new Error("write after end");t.emit("error",n),E.nextTick(e,n)}function h(t,e,n,r){var i=!0,a=!1;return null===n?a=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||e.objectMode||(a=new TypeError("Invalid non-string/buffer chunk")),a&&(t.emit("error",a),E.nextTick(r,a),i=!1),i}function d(t,e,n){return t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=R.from(e,n)),e}function p(t,e,n,r,i,a){if(!n){var o=d(e,r,i);r!==o&&(n=!0,i="buffer",r=o)}var s=e.objectMode?1:r.length;e.length+=s;var u=e.length<e.highWaterMark;if(u||(e.needDrain=!0),e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:a,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else v(t,e,!1,s,r,i,a);return u}function v(t,e,n,r,i,a,o){e.writelen=r,e.writecb=o,e.writing=!0,e.sync=!0,n?t._writev(i,e.onwrite):t._write(i,a,e.onwrite),e.sync=!1}function g(t,e,n,r,i){--e.pendingcb,n?(E.nextTick(i,r),E.nextTick(M,t,e),t._writableState.errorEmitted=!0,t.emit("error",r)):(i(r),t._writableState.errorEmitted=!0,t.emit("error",r),M(t,e))}function b(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function m(t,e){var n=t._writableState,r=n.sync,i=n.writecb;if(b(n),e)g(t,n,r,e,i);else{var a=w(n);a||n.corked||n.bufferProcessing||!n.bufferedRequest||O(t,n),r?P(y,t,n,a,i):y(t,n,a,i)}}function y(t,e,n,r){n||_(t,e),e.pendingcb--,r(),M(t,e)}function _(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function O(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var r=e.bufferedRequestCount,i=new Array(r),o=e.corkedRequestsFree;o.entry=n;for(var s=0,u=!0;n;)i[s]=n,n.isBuf||(u=!1),n=n.next,s+=1;i.allBuffers=u,v(t,e,!0,e.length,i,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new a(e),e.bufferedRequestCount=0}else{for(;n;){var c=n.chunk,l=n.encoding,f=n.callback;if(v(t,e,!1,e.objectMode?1:c.length,c,l,f),n=n.next,e.bufferedRequestCount--,e.writing)break}null===n&&(e.lastBufferedRequest=null)}e.bufferedRequest=n,e.bufferProcessing=!1}function w(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function x(t,e){t._final(function(n){e.pendingcb--,n&&t.emit("error",n),e.prefinished=!0,t.emit("prefinish"),M(t,e)})}function j(t,e){e.prefinished||e.finalCalled||("function"==typeof t._final?(e.pendingcb++,e.finalCalled=!0,E.nextTick(x,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function M(t,e){var n=w(e);return n&&(j(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),n}function k(t,e,n){e.ending=!0,M(t,e),n&&(e.finished?E.nextTick(n):t.once("finish",n)),e.ended=!0,t.writable=!1}function S(t,e,n){var r=t.entry;for(t.entry=null;r;){var i=r.callback;e.pendingcb--,i(n),r=r.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}var E=n(156);t.exports=l;var A,P=!e.browser&&["v0.10","v0.9."].indexOf(e.version.slice(0,5))>-1?r:E.nextTick;l.WritableState=c;var T=n(99);T.inherits=n(68);var N={deprecate:n(1060)},C=n(446),R=n(157).Buffer,D=i.Uint8Array||function(){},L=n(447);T.inherits(l,C),c.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(c.prototype,"buffer",{get:N.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}();var I;"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(I=Function.prototype[Symbol.hasInstance],Object.defineProperty(l,Symbol.hasInstance,{value:function(t){return!!I.call(this,t)||this===l&&t&&t._writableState instanceof c}})):I=function(t){return t instanceof this},l.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},l.prototype.write=function(t,e,n){var r=this._writableState,i=!1,a=!r.objectMode&&s(t);return a&&!R.isBuffer(t)&&(t=o(t)),"function"==typeof e&&(n=e,e=null),a?e="buffer":e||(e=r.defaultEncoding),"function"!=typeof n&&(n=u),r.ended?f(this,n):(a||h(this,r,t,n))&&(r.pendingcb++,i=p(this,r,a,t,e,n)),i},l.prototype.cork=function(){this._writableState.corked++},l.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||O(this,t))},l.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},l.prototype._write=function(t,e,n){n(new Error("_write() is not implemented"))},l.prototype._writev=null,l.prototype.end=function(t,e,n){var r=this._writableState;"function"==typeof t?(n=t,t=null,e=null):"function"==typeof e&&(n=e,e=null),null!==t&&void 0!==t&&this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||k(this,r,n)},Object.defineProperty(l.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),l.prototype.destroy=L.destroy,l.prototype._undestroy=L.undestroy,l.prototype._destroy=function(t,e){this.end(),e(t)}}).call(e,n(35),n(1058).setImmediate,n(41))},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(1066);Object.defineProperty(e,"ParserAsync",{enumerable:!0,get:function(){return r(i).default}});var a=n(1092);Object.defineProperty(e,"ParserSync",{enumerable:!0,get:function(){return r(a).default}});var o=n(458);Object.defineProperty(e,"Parser",{enumerable:!0,get:function(){return r(o).default}})},function(t,e,n){"use strict";(function(e){/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
	function r(t,e){if(t===e)return 0;for(var n=t.length,r=e.length,i=0,a=Math.min(n,r);i<a;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0}function i(t){return e.Buffer&&"function"==typeof e.Buffer.isBuffer?e.Buffer.isBuffer(t):!(null==t||!t._isBuffer)}function a(t){return Object.prototype.toString.call(t)}function o(t){return!i(t)&&"function"==typeof e.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):!!t&&(t instanceof DataView||!!(t.buffer&&t.buffer instanceof ArrayBuffer)))}function s(t){if(_.isFunction(t)){if(x)return t.name;var e=t.toString(),n=e.match(M);return n&&n[1]}}function u(t,e){return"string"==typeof t?t.length<e?t:t.slice(0,e):t}function c(t){if(x||!_.isFunction(t))return _.inspect(t);var e=s(t);return"[Function"+(e?": "+e:"")+"]"}function l(t){return u(c(t.actual),128)+" "+t.operator+" "+u(c(t.expected),128)}function f(t,e,n,r,i){throw new j.AssertionError({message:n,actual:t,expected:e,operator:r,stackStartFunction:i})}function h(t,e){t||f(t,!0,e,"==",j.ok)}function d(t,e,n,s){if(t===e)return!0;if(i(t)&&i(e))return 0===r(t,e);if(_.isDate(t)&&_.isDate(e))return t.getTime()===e.getTime();if(_.isRegExp(t)&&_.isRegExp(e))return t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase;if(null!==t&&"object"==typeof t||null!==e&&"object"==typeof e){if(o(t)&&o(e)&&a(t)===a(e)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===r(new Uint8Array(t.buffer),new Uint8Array(e.buffer));if(i(t)!==i(e))return!1;s=s||{actual:[],expected:[]};var u=s.actual.indexOf(t);return-1!==u&&u===s.expected.indexOf(e)||(s.actual.push(t),s.expected.push(e),v(t,e,n,s))}return n?t===e:t==e}function p(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function v(t,e,n,r){if(null===t||void 0===t||null===e||void 0===e)return!1;if(_.isPrimitive(t)||_.isPrimitive(e))return t===e;if(n&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;var i=p(t),a=p(e);if(i&&!a||!i&&a)return!1;if(i)return t=w.call(t),e=w.call(e),d(t,e,n);var o,s,u=k(t),c=k(e);if(u.length!==c.length)return!1;for(u.sort(),c.sort(),s=u.length-1;s>=0;s--)if(u[s]!==c[s])return!1;for(s=u.length-1;s>=0;s--)if(o=u[s],!d(t[o],e[o],n,r))return!1;return!0}function g(t,e,n){d(t,e,!0)&&f(t,e,n,"notDeepStrictEqual",g)}function b(t,e){if(!t||!e)return!1;if("[object RegExp]"==Object.prototype.toString.call(e))return e.test(t);try{if(t instanceof e)return!0}catch(t){}return!Error.isPrototypeOf(e)&&!0===e.call({},t)}function m(t){var e;try{t()}catch(t){e=t}return e}function y(t,e,n,r){var i;if("function"!=typeof e)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(r=n,n=null),i=m(e),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),t&&!i&&f(i,n,"Missing expected exception"+r);var a="string"==typeof r,o=!t&&_.isError(i),s=!t&&i&&!n;if((o&&a&&b(i,n)||s)&&f(i,n,"Got unwanted exception"+r),t&&i&&n&&!b(i,n)||!t&&i)throw i}var _=n(146),O=Object.prototype.hasOwnProperty,w=Array.prototype.slice,x=function(){return"foo"===function(){}.name}(),j=t.exports=h,M=/\s*function\s+([^\(\s]*)\s*/;j.AssertionError=function(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=l(this),this.generatedMessage=!0);var e=t.stackStartFunction||f;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var n=new Error;if(n.stack){var r=n.stack,i=s(e),a=r.indexOf("\n"+i);if(a>=0){var o=r.indexOf("\n",a+1);r=r.substring(o+1)}this.stack=r}}},_.inherits(j.AssertionError,Error),j.fail=f,j.ok=h,j.equal=function(t,e,n){t!=e&&f(t,e,n,"==",j.equal)},j.notEqual=function(t,e,n){t==e&&f(t,e,n,"!=",j.notEqual)},j.deepEqual=function(t,e,n){d(t,e,!1)||f(t,e,n,"deepEqual",j.deepEqual)},j.deepStrictEqual=function(t,e,n){d(t,e,!0)||f(t,e,n,"deepStrictEqual",j.deepStrictEqual)},j.notDeepEqual=function(t,e,n){d(t,e,!1)&&f(t,e,n,"notDeepEqual",j.notDeepEqual)},j.notDeepStrictEqual=g,j.strictEqual=function(t,e,n){t!==e&&f(t,e,n,"===",j.strictEqual)},j.notStrictEqual=function(t,e,n){t===e&&f(t,e,n,"!==",j.notStrictEqual)},j.throws=function(t,e,n){y(!0,t,e,n)},j.doesNotThrow=function(t,e,n){y(!1,t,e,n)},j.ifError=function(t){if(t)throw t};var k=Object.keys||function(t){var e=[];for(var n in t)O.call(t,n)&&e.push(n);return e}}).call(e,n(41))},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(1076);Object.defineProperty(e,"Pack",{enumerable:!0,get:function(){return r(i).default}});var a=n(1087);Object.defineProperty(e,"ParseAsync",{enumerable:!0,get:function(){return r(a).default}});var o=n(1088);Object.defineProperty(e,"parseSync",{enumerable:!0,get:function(){return r(o).default}});var s=n(243);Object.defineProperty(e,"Parse",{enumerable:!0,get:function(){return r(s).default}})},function(t,e,n){"use strict";t.exports=function(t,e,n){var r=t+e-n,i=Math.abs(r-t),a=Math.abs(r-e),o=Math.abs(r-n);return i<=a&&i<=o?t:a<=o?e:n}},function(t,e,n){"use strict";(function(t){function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e,n){var r=t*e;return 8!==n&&(r=Math.ceil(r/(8/n))),r}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(453),u=r(s),c=n(242),l=r(c),f=function(){function e(t,n){i(this,e);var r=t.width,o=t.height,s=t.interlace,c=t.bpp,l=t.depth;if(this.read=n.read,this.write=n.write,this.complete=n.complete,this._imageIndex=0,this._images=[],s)for(var f=u.default.getImagePasses(r,o),h=0;h<f.length;h++)this._images.push({byteWidth:a(f[h].width,c,l),height:f[h].height,lineIndex:0});else this._images.push({byteWidth:a(r,c,l),height:o,lineIndex:0});this._xComparison=8===l?c:16===l?2*c:1}return o(e,[{key:"start",value:function(){this.read(this._images[this._imageIndex].byteWidth+1,this._reverseFilterLine.bind(this))}},{key:"_unFilterType1",value:function(t,e,n){for(var r=this._xComparison,i=r-1,a=0;a<n;a++){var o=t[1+a],s=a>i?e[a-r]:0;e[a]=o+s}}},{key:"_unFilterType2",value:function(t,e,n){for(var r=this._lastLine,i=0;i<n;i++){var a=t[1+i],o=r?r[i]:0;e[i]=a+o}}},{key:"_unFilterType3",value:function(t,e,n){for(var r=this._xComparison,i=r-1,a=this._lastLine,o=0;o<n;o++){var s=t[1+o],u=a?a[o]:0,c=o>i?e[o-r]:0,l=Math.floor((c+u)/2);e[o]=s+l}}},{key:"_unFilterType4",value:function(t,e,n){for(var r=this._xComparison,i=r-1,a=this._lastLine,o=0;o<n;o++){var s=t[1+o],u=a?a[o]:0,c=o>i?e[o-r]:0,f=o>i&&a?a[o-r]:0,h=(0,l.default)(c,u,f);e[o]=s+h}}},{key:"_reverseFilterLine",value:function(e){var n,r=e[0],i=this._images[this._imageIndex],a=i.byteWidth;if(0===r)n=e.slice(1,a+1);else switch(n=new t(a),r){case 1:this._unFilterType1(e,n,a);break;case 2:this._unFilterType2(e,n,a);break;case 3:this._unFilterType3(e,n,a);break;case 4:this._unFilterType4(e,n,a);break;default:throw new Error("Unrecognised filter type - "+r)}this.write(n),i.lineIndex++,i.lineIndex>=i.height?(this._lastLine=null,this._imageIndex++,i=this._images[this._imageIndex]):this._lastLine=n,i?this.read(i.byteWidth+1,this._reverseFilterLine.bind(this)):(this._lastLine=null,this.complete())}}]),e}();e.default=f}).call(e,n(12).Buffer)},function(t,e,n){"use strict";function r(t,e){if(!(this instanceof r))return new r(t);e=e||function(t){if(t)throw t};var n=Object(i.a)(t);if("object"!=typeof n)return void e(t);var o=r.projections.get(n.projName);if(!o)return void e(t);if(n.datumCode&&"none"!==n.datumCode){var f=Object(l.a)(u.a,n.datumCode);f&&(n.datum_params=f.towgs84?f.towgs84.split(","):null,n.ellps=f.ellipse,n.datumName=f.datumName?f.datumName:n.datumCode)}n.k0=n.k0||1,n.axis=n.axis||"enu",n.ellps=n.ellps||"wgs84";var h=Object(s.b)(n.a,n.b,n.rf,n.ellps,n.sphere),d=Object(s.a)(h.a,h.b,h.rf,n.R_A),p=n.datum||Object(c.a)(n.datumCode,n.datum_params,h.a,h.b,d.es,d.ep2);Object(a.a)(this,n),Object(a.a)(this,o),this.a=h.a,this.b=h.b,this.rf=h.rf,this.sphere=h.sphere,this.es=d.es,this.e=d.e,this.ep2=d.ep2,this.datum=p,this.init(),e(null,this)}var i=n(1102),a=n(1108),o=n(1109),s=n(1112),u=n(1114),c=n(1115),l=n(245);r.projections=o.a,r.projections.start(),e.a=r},function(t,e,n){"use strict";function r(t,e){if(t[e])return t[e];for(var n,r=Object.keys(t),a=e.toLowerCase().replace(i,""),o=-1;++o<r.length;)if(n=r[o],n.toLowerCase().replace(i,"")===a)return t[n]}e.a=r;var i=/[\s_\-\/\(\)]/g},function(t,e,n){"use strict";e.a=function(t,e,n,r){return n*=e,e*=e,r[0]*t-n*(r[1]+e*(r[2]+e*(r[3]+e*r[4])))}},function(t,e,n){"use strict";e.a=function(t,e,n){var r=e*n;return t/Math.sqrt(1-r*r)}},function(t,e,n){"use strict";e.a=function(t,e,n,r,i){var a,o;a=t/e;for(var s=0;s<15;s++)if(o=(t-(e*a-n*Math.sin(2*a)+r*Math.sin(4*a)-i*Math.sin(6*a)))/(e-2*n*Math.cos(2*a)+4*r*Math.cos(4*a)-6*i*Math.cos(6*a)),a+=o,Math.abs(o)<=1e-10)return a;return NaN}},function(t,e,n){"use strict";e.a=function(t,e){var n;return t>1e-7?(n=t*e,(1-t*t)*(e/(1-n*n)-.5/t*Math.log((1-n)/(1+n)))):2*e}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var o,s=n(30),u=a(n(9)),c=a(n(104));!function(t){t[t.Normal=0]="Normal",t[t.Alpha=1]="Alpha"}(o=e.BlendingMode||(e.BlendingMode={}));var l=function(){function t(){r(this,t)}return i(t,null,[{key:"renderAll",value:function(e,n,r,i,a){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};return 1==e.length?t.render(e[0],n,o):a&&1==a.length&&a[0]<e.length?t.render(e[a[0]],n,o):o.interval?t.renderTimeMultiplexing(e,n,r,i,o.interval,o.wrapper):t.renderMultiples(e,n,a,o)}},{key:"render",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e instanceof HTMLCanvasElement?e:document.getElementById(e);n.noResetDims||(r.width=t.width,r.height=t.height);var i=r.getContext("2d");if(n.noResetDims||i.clearRect(0,0,r.width,r.height),t.imageCanvas)i.drawImage(t.imageCanvas,0,0);else{var a=i.getImageData(0,0,r.width,r.height);n.blendingMode&&n.blendingMode!==o.Normal?(n.blendingMode,o.Alpha):this.renderToImageData(t,a),i.putImageData(a,0,0)}return i}},{key:"render2",value:function(t,e){var n=(arguments.length>2&&void 0!==arguments[2]&&arguments[2],e instanceof HTMLCanvasElement?e:document.getElementById(e));n.width=t.width,n.height=t.height;var r=n.getContext("2d");return r.drawImage(t.imageCanvas,0,0),r}},{key:"renderToImageData",value:function(t,e){for(var n=e.data,r=0,i=0;i<t.height;i++)for(var a=t.pixels[i],o=0;o<t.width;o++){var s=a[o],u=s.a;0==u?(n[r++]=0,n[r++]=0,n[r++]=0,n[r++]=0):(n[r++]=255*s.r,n[r++]=255*s.g,n[r++]=255*s.b,n[r++]=255*s.a)}}},{key:"renderAlphaBlending",value:function(t,e){for(var n=e.data,r=0,i=0;i<t.height;i++)for(var a=0;a<t.width;a++){var o=t.pixels[i][a],s=o.a;1==s?(n[r+0]=o.r,n[r+1]=o.g,n[r+2]=o.b,n[r+3]=255):0!=s&&(n[r+0]=o.r/s*255+n[r+0]*(1-s),n[r+1]=o.g/s*255+n[r+1]*(1-s),n[r+2]=o.b/s*255+n[r+2]*(1-s),n[r+3]=255*s+n[r+3]*(1-s)),r+=4}}},{key:"strokeVectorMask",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t&&void 0!=t.path){var r=e instanceof HTMLCanvasElement?e:document.getElementById(e),i=r.getContext("2d");i.beginPath(),i.strokeStyle=n.color||"#000",i.lineWidth=n.lineWidth||1,t.path.send(i),i.stroke()}}},{key:"renderTimeMultiplexing",value:function(e,n,r,i,a,o){function s(){var t=c.select(f[h]),e=c.select(f[(h+1)%l]);t.style("display","none"),e.style("display","inline"),h=(h+1)%l}var l=e.length;n.remove();var f=u.range(l).map(function(){var t=document.createElement("canvas");return t.style.verticalAlign="top",t.style.width=r+"px",t.style.height=i+"px",o.appendChild(t),t});e.forEach(function(e,n){t.render(e,f[n])});var h=0;c.select(f[0]).style("display","inline");for(var d=1;d<l;++d)c.select(f[d]).style("display","none");return setInterval(s,1e3*a),f[0].getContext("2d")}},{key:"renderMultiples",value:function(t,e,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=void 0!==n?n.length:t.length;void 0===n&&(n=s.arange(a));var o=i.rows||1,u=i.cols||1;o*u<a&&(o=u=Math.ceil(Math.sqrt(a)));var c=e instanceof HTMLCanvasElement?e:document.getElementById(e),l=t[0].width,f=t[0].height;c.width=l,c.height=f;var h=c.getContext("2d"),d=document.createElement("canvas");d.width=l,d.height=f;var p=d.getContext("2d"),v=p.getImageData(0,0,l,f);t.forEach(function(t,e){r.renderToImageData(t,v),p.putImageData(v,0,0);var i=Math.floor(n[e]/o),a=n[e]%o;h.drawImage(d,0,0,l,f,l*i/u,f*a/o,l/u,f/o)});for(var g=1;g<o;g++){var b=f*g/o;h.moveTo(0,b),h.lineTo(l,b)}for(var m=1;m<u;m++){var y=l*m/u;h.moveTo(y,0),h.lineTo(y,f)}return h.lineWidth=1,h.strokeStyle="black",h.stroke(),h}}]),t}();l.BlendingMode=o,e.default=l},function(t,e,n){"use strict";n.d(e,"b",function(){return o}),n.d(e,"a",function(){return s});var r=n(62),i=n(252),a=Object(i.a)(r.a),o=a.right,s=a.left;e.c=o},function(t,e,n){"use strict";function r(t){return function(e,n){return Object(i.a)(t(e),n)}}var i=n(62);e.a=function(t){return 1===t.length&&(t=r(t)),{left:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var a=r+i>>>1;t(e[a],n)<0?r=a+1:i=a}return r},right:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var a=r+i>>>1;t(e[a],n)>0?i=a:r=a+1}return r}}}},function(t,e,n){"use strict";function r(t,e){return[t,e]}e.b=r,e.a=function(t,e){null==e&&(e=r);for(var n=0,i=t.length-1,a=t[0],o=new Array(i<0?0:i);n<i;)o[n]=e(a,a=t[++n]);return o}},function(t,e,n){"use strict";var r=n(255);e.a=function(t,e){var n=Object(r.a)(t,e);return n?Math.sqrt(n):n}},function(t,e,n){"use strict";var r=n(71);e.a=function(t,e){var n,i,a=t.length,o=0,s=-1,u=0,c=0;if(null==e)for(;++s<a;)isNaN(n=Object(r.a)(t[s]))||(i=n-u,u+=i/++o,c+=i*(n-u));else for(;++s<a;)isNaN(n=Object(r.a)(e(t[s],s,t)))||(i=n-u,u+=i/++o,c+=i*(n-u));if(o>1)return c/(o-1)}},function(t,e,n){"use strict";e.a=function(t,e){var n,r,i,a=t.length,o=-1;if(null==e){for(;++o<a;)if(null!=(n=t[o])&&n>=n)for(r=i=n;++o<a;)null!=(n=t[o])&&(r>n&&(r=n),i<n&&(i=n))}else for(;++o<a;)if(null!=(n=e(t[o],o,t))&&n>=n)for(r=i=n;++o<a;)null!=(n=e(t[o],o,t))&&(r>n&&(r=n),i<n&&(i=n));return[r,i]}},function(t,e,n){"use strict";n.d(e,"b",function(){return i}),n.d(e,"a",function(){return a});var r=Array.prototype,i=r.slice,a=r.map},function(t,e,n){"use strict";e.a=function(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),a=new Array(i);++r<i;)a[r]=t+r*n;return a}},function(t,e,n){"use strict";function r(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),u=r/Math.pow(10,i);return i>=0?(u>=a?10:u>=o?5:u>=s?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(u>=a?10:u>=o?5:u>=s?2:1)}function i(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),u=r/i;return u>=a?i*=10:u>=o?i*=5:u>=s&&(i*=2),e<t?-i:i}e.b=r,e.c=i;var a=Math.sqrt(50),o=Math.sqrt(10),s=Math.sqrt(2);e.a=function(t,e,n){var i,a,o,s,u=-1;if(e=+e,t=+t,n=+n,t===e&&n>0)return[t];if((i=e<t)&&(a=t,t=e,e=a),0===(s=r(t,e,n))||!isFinite(s))return[];if(s>0)for(t=Math.ceil(t/s),e=Math.floor(e/s),o=new Array(a=Math.ceil(e-t+1));++u<a;)o[u]=(t+u)*s;else for(t=Math.floor(t*s),e=Math.ceil(e*s),o=new Array(a=Math.ceil(t-e+1));++u<a;)o[u]=(t-u)/s;return i&&o.reverse(),o}},function(t,e,n){"use strict";e.a=function(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1}},function(t,e,n){"use strict";e.a=function(t,e){var n,r,i=t.length,a=-1;if(null==e){for(;++a<i;)if(null!=(n=t[a])&&n>=n)for(r=n;++a<i;)null!=(n=t[a])&&r>n&&(r=n)}else for(;++a<i;)if(null!=(n=e(t[a],a,t))&&n>=n)for(r=n;++a<i;)null!=(n=e(t[a],a,t))&&r>n&&(r=n);return r}},function(t,e,n){"use strict";function r(t){return t.length}var i=n(261);e.a=function(t){if(!(o=t.length))return[];for(var e=-1,n=Object(i.a)(t,r),a=new Array(n);++e<n;)for(var o,s=-1,u=a[e]=new Array(o);++s<o;)u[s]=t[s][e];return a}},function(t,e,n){"use strict";var r=n(32);e.a=function(t){return"string"==typeof t?new r.a([[document.querySelector(t)]],[document.documentElement]):new r.a([[t]],r.c)}},function(t,e,n){"use strict";function r(){return[]}e.a=function(t){return null==t?r:function(){return this.querySelectorAll(t)}}},function(t,e,n){"use strict";var r=function(t){return function(){return this.matches(t)}};if("undefined"!=typeof document){var i=document.documentElement;if(!i.matches){var a=i.webkitMatchesSelector||i.msMatchesSelector||i.mozMatchesSelector||i.oMatchesSelector;r=function(t){return function(){return a.call(this,t)}}}}e.a=r},function(t,e,n){"use strict";function r(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}e.a=r;var i=n(267),a=n(32);e.b=function(){return new a.a(this._enter||this._groups.map(i.a),this._parents)},r.prototype={constructor:r,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}}},function(t,e,n){"use strict";e.a=function(t){return new Array(t.length)}},function(t,e,n){"use strict";function r(t){return function(){this.style.removeProperty(t)}}function i(t,e,n){return function(){this.style.setProperty(t,e,n)}}function a(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function o(t,e){return t.style.getPropertyValue(e)||Object(s.a)(t).getComputedStyle(t,null).getPropertyValue(e)}e.b=o;var s=n(171);e.a=function(t,e,n){return arguments.length>1?this.each((null==e?r:"function"==typeof e?a:i)(t,e,null==n?"":n)):o(this.node(),t)}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var s=a(n(46)),u=a(n(270)),c=o(n(30)),l=n(146),f=function(){function t(){r(this,t)}return i(t,null,[{key:"max",value:function(t,e){var n=e[0],r=0;return e.forEach(function(t,e){t>n&&(n=t,r=e)}),t[r].colorScale.map(n)}},{key:"invmin",value:function(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=1/0,i=-1,a=0;a<e.length;a++){var o=e[a];o<n||o<r&&(r=o,i=a)}if(-1==i)return t[0].colorScale.map(0);var s=t[i],u=s.colorScale.interpolator;return s.colorScale.map(u.domain[1]-r)}},{key:"mean",value:function(t,e){var n=0,r=new s.default(0,0,0,0);return e.forEach(function(e,i){if(0!=e){var a=t[i].colorScale.map(e);r.r+=a.r*e,r.g+=a.g*e,r.b+=a.b*e,r.a+=a.a*e,n+=e}}),n>0&&r.rdissolve(1/n),r}},{key:"add",value:function(t,e){var n=new s.default(0,0,0,1);return e.forEach(function(e,r){n.radd(t[r].colorScale.map(e))}),n}},{key:"multiply",value:function(t,e){var n=new s.default(1,1,1,1);return e.forEach(function(e,r){var i=t[r].colorScale.map(e);n.r*=i.r,n.g*=i.g,n.b*=i.b,n.a*=i.a}),n}},{key:"none",value:function(){return s.default.None}},{key:"one",value:function(t,e){return t.colorScale.map(e)}},{key:"bars",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{"y.scale.domain":[0,1],"y.scale.type":"linear","y.scale.base":10},r=t.map(function(t,n){return{name:t.dataBuffer.name,value:e[n]}}),i={$schema:"https://vega.github.io/schema/vega-lite/v2.0.json",data:{values:r},mark:"bar",encoding:{x:{field:"name",type:"ordinal",legend:!1,axis:!1},color:{field:"name",type:"ordinal",scale:{domain:r.map(function(t){return t.name}),range:r.map(function(e,n){return t[n].color1.css()})},legend:!1},y:{field:"value",type:"quantitative",scale:{domain:n["y.scale.domain"],type:n["y.scale.type"],base:"log"===n["y.scale.type"]?n["y.scale.base"]:void 0,exponent:"pow"===n["y.scale.type"]?n["y.scale.exponent"]:void 0},lgend:!1,axis:!1}},config:{group:{strokeWidth:0}},width:n.width||30,height:n.height||30,padding:0};return u.default(i)}},{key:"punchcard",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{"z.scale.domain":[0,1],"z.scale.type":"linear","z.scale.base":10,factor:8},i=t.length,a=r.cols||Math.ceil(Math.sqrt(i)),o=r.width||30,l=r.height||30,f=t.map(function(t){return(t.color1||s.default.Blue).css()}),h=r.factor||8,d=t.map(function(t,r){return{name:e[r],value:n[r],row:Math.floor(r/a),col:r%a}}),p=Math.ceil(i/a),v={$schema:"https://vega.github.io/schema/vega-lite/v2.0.json",data:{values:d},mark:"circle",encoding:{x:{field:"col",type:"ordinal",axis:!1,legend:!1,scale:{type:"point",domain:c.arange(a),padding:.5}},y:{field:"row",type:"ordinal",axis:!1,legend:!1,scale:{type:"point",domain:c.arange(p),padding:.5}},size:{field:"value",type:"quantitative",scale:{domain:r["z.scale.domain"],type:r["z.scale.type"],range:[0,Math.min(o,l)*h]},legend:!1},color:{field:"name",type:"ordinal",scale:{domain:e,range:f},legend:!1}},autosize:"none",config:{mark:{opacity:1},group:{strokeWidth:0,stroke:"transparent"}},width:o,height:l,padding:0};return u.default(v)}},{key:"hatch",value:function(t,e,n,r){var i=document.createElement("canvas");i.width=t.mask.width,i.height=t.mask.height;var a=i.getContext("2d");a.drawImage(t.mask.getCanvas(),0,0),a.globalCompositeOperation="source-atop",a.fillStyle="white",a.fillRect(0,0,a.canvas.width,a.canvas.height),a.save();var o=[],s=Math.sqrt(i.width*i.width+i.height*i.height),u=0;n.forEach(function(t,e){u+=t,o.push({index:e,value:t})});var c=0;return r.sort&&(o=o.sort(function(t,e){return e.value-t.value})),o.forEach(function(n){var o=n.value,f=n.index,h=e[f];a.save(),a.translate(i.width/2,i.height/2),a.rotate(h.angle),a.strokeStyle=h.colorScale.map(o).css(),r.colprop?a.strokeStyle=h.colorScale.map(o).css():a.strokeStyle=h.color1.css(),l.isUndefined(r.widthprop)?a.lineWidth=r.thickness:"percent"===r.widthprop?a.lineWidth=r.thickness*t.dataValues.length*o/u:a.lineWidth=r.thickness*t.dataValues.length*o/r.widthprop,c+=a.lineWidth/2;for(var d=t.x+i.width/2-s,p=c-s-d%(t.dataValues.length*r.thickness);p<s;p+=t.dataValues.length*r.thickness)a.beginPath(),a.moveTo(p,-s),a.lineTo(p,s),a.stroke();c+=a.lineWidth/2,a.restore()}),i}}]),t}();e.default=f},function(t,e,n){"use strict";function r(t){var e=document.createElement("div");return a.default(e,t,{actions:!1}).then(function(){var t=e.getElementsByTagName("canvas")[0];return t.getContext("2d"),t})}var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=i(n(271));e.default=r},function(t,e,n){"use strict";function r(t,n,l){return o(this,void 0,void 0,function(){var o,f,b,m,y,_,y,O,w,x,j,M,k,S,E,A;return s(this,function(s){switch(s.label){case 0:return l=l||{},o=void 0===l.actions||l.actions,f=l.loader||e.vega.loader(),b=l.renderer||"canvas",m=l.logLevel||e.vega.Warn,e.vega.isString(n)?[4,f.load(n)]:[3,2];case 1:return y=s.sent(),[2,r(t,JSON.parse(y),l)];case 2:return _=l.config,e.vega.isString(_)?[4,f.load(_)]:[3,4];case 3:return y=s.sent(),[2,r(t,n,a({},l,{config:JSON.parse(y)}))];case 4:return n.$schema?(O=h.default(n.$schema),l.mode&&l.mode!==O.library&&console.warn("The given visualization spec is written in "+p[O.library]+", but mode argument sets "+p[l.mode]+"."),w=O.library,u(O.version,v[w])>0&&console.warn("The input spec uses "+w+" "+O.version+", but the current version of "+p[w]+" is "+v[w]+".")):w=l.mode||"vega",x=g[w](n,_),"vega-lite"===w&&x.$schema&&(O=h.default(x.$schema),u(O.version,v.vega)>0&&console.warn("The compiled spec uses Vega "+O.version+", but current version is "+v.vega+".")),j=c.select(t).classed("vega-embed",!0).html(""),l.onBeforeParse&&(x=l.onBeforeParse(x)),M=e.vega.parse(x,"vega-lite"===w?{}:_),k=new e.vega.View(M,{loader:f,logLevel:m,renderer:b}).initialize(t),"vega-lite"!==w&&k.hover(),l&&(l.width&&k.width(l.width),l.height&&k.height(l.height),l.padding&&k.padding(l.padding)),l.runAsync?[4,k.runAsync()]:[3,6];case 5:return s.sent(),[3,7];case 6:k.run(),s.label=7;case 7:return!1!==o&&(S=j.append("div").attr("class","vega-actions"),!0!==o&&!1===o.export||(E="canvas"===b?"png":"svg",S.append("a").text("Export as "+E.toUpperCase()).attr("href","#").attr("target","_blank").attr("download","visualization."+E).on("mousedown",function(){var t=this;k.toImageURL(E).then(function(e){t.href=e}).catch(function(t){throw t}),c.event.preventDefault()})),!0!==o&&!1===o.source||S.append("a").text("View Source").attr("href","#").on("click",function(){i(JSON.stringify(n,null,2),l.sourceHeader||"",l.sourceFooter||""),c.event.preventDefault()}),!0!==o&&!1===o.editor||(A=l.editorUrl||"https://vega.github.io/editor/",S.append("a").text("Open in Vega Editor").attr("href","#").on("click",function(){d.post(window,A,{mode:w,renderer:b,spec:JSON.stringify(n,null,2)}),c.event.preventDefault()}))),[2,{view:k,spec:n}]}})})}function i(t,e,n){var r="<html><head>"+e+'</head><body><pre><code class="json">',i="</code></pre>"+n+"</body></html>",a=window.open("");a.document.write(r+t+i),a.document.title="Vega JSON Source"}var a=this&&this.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(i,a){function o(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(o,s)}u((r=r.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){function n(t){return function(e){return r([t,e])}}function r(n){if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,a&&(o=a[2&n[0]?"return":n[0]?"throw":"next"])&&!(o=o.call(a,n[1])).done)return o;switch(a=0,o&&(n=[0,o.value]),n[0]){case 0:case 1:o=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,a=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(o=u.trys,!(o=o.length>0&&o[o.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){u.label=n[1];break}if(6===n[0]&&u.label<o[1]){u.label=o[1],o=n;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(n);break}o[2]&&u.ops.pop(),u.trys.pop();continue}n=e.call(t,u)}catch(t){n=[6,t],a=0}finally{i=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,a,o,s,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(e,"__esModule",{value:!0});var u=n(541),c=n(104),l=n(542),f=n(994),h=n(1047),d=n(1048);e.vega=l,e.vl=f;var p={vega:"Vega","vega-lite":"Vega-Lite"},v={vega:e.vega.version,"vega-lite":e.vl?e.vl.version:"not available"},g={vega:function(t,e){return t},"vega-lite":function(t,n){return e.vl.compile(t,{config:n}).spec}};e.default=r},function(t,e,n){"use strict";n.d(e,"b",function(){return o}),n.d(e,"c",function(){return s}),n.d(e,"f",function(){return u}),n.d(e,"d",function(){return c}),n.d(e,"e",function(){return l}),n.d(e,"a",function(){return f});var r=n(72),i=n(273),a=[],o=Object(i.a)("id"),s=Object(r.c)(function(t){return t},a,"identity"),u=Object(r.c)(function(){return 0},a,"zero"),c=Object(r.c)(function(){return 1},a,"one"),l=Object(r.c)(function(){return!0},a,"true"),f=Object(r.c)(function(){return!1},a,"false")},function(t,e,n){"use strict";var r=n(72),i=n(107),a=n(108);e.a=function(t,e){var n=Object(i.a)(t),o="return _["+n.map(a.a).join("][")+"];";return Object(r.c)(Function("_",o),[t=1===n.length?n[0]:t],e||t)}},function(t,e,n){"use strict";e.a=function(t){throw Error(t)}},function(t,e,n){"use strict";e.a=function(t){return t===Object(t)}},function(t,e,n){"use strict";e.a=function(t){return"string"==typeof t}},function(t,e,n){"use strict";e.a=function(t){return t[t.length-1]}},function(t,e,n){"use strict";e.a=function(t){return null==t||""===t?null:+t}},function(t,e,n){"use strict";e.a=function(t){return"[object Date]"===Object.prototype.toString.call(t)}},function(t,e,n){"use strict";e.a=function(t){return"number"==typeof t}},function(t,e,n){"use strict";e.a=function(t,e){for(var n="";--e>=0;)n+=t;return n}},function(t,e,n){"use strict";function r(){Object.defineProperty(this,a,{writable:!0,value:{}})}e.a=r;var i=n(0),a="_:mod:_",o=r.prototype;o.set=function(t,e,n,r){var o=this,s=o[t],u=o[a];return null!=e&&e>=0?(s[e]!==n||r)&&(s[e]=n,u[e+":"+t]=-1,u[t]=-1):(s!==n||r)&&(o[t]=n,u[t]=Object(i.isArray)(n)?1+n.length:-1),o},o.modified=function(t,e){var n,r=this[a];if(!arguments.length){for(n in r)if(r[n])return!0;return!1}if(Object(i.isArray)(t)){for(n=0;n<t.length;++n)if(r[t[n]])return!0;return!1}return null!=e&&e>=0?e+1<r[t]||!!r[e+":"+t]:!!r[t]},o.clear=function(){return this[a]={},this}},function(t,e,n){"use strict";function r(t,e,n){this.id=++s,this.value=null,n&&(this.receive=n),t&&(this._filter=t),e&&(this._apply=e)}function i(t,e,n){return new r(t,e,n)}e.a=r,e.b=i;var a=n(73),o=n(0),s=0,u=r.prototype;u._filter=o.truthy,u._apply=o.identity,u.targets=function(){return this._targets||(this._targets=Object(a.a)(o.id))},u.consume=function(t){return arguments.length?(this._consume=!!t,this):!!this._consume},u.receive=function(t){if(this._filter(t)){for(var e=this.value=this._apply(t),n=this._targets,r=n?n.length:0,i=0;i<r;++i)n[i].receive(e);this._consume&&(t.preventDefault(),t.stopPropagation())}},u.filter=function(t){var e=i(t);return this.targets().add(e),e},u.apply=function(t){var e=i(null,t);return this.targets().add(e),e},u.merge=function(){var t=i();this.targets().add(t);for(var e=0,n=arguments.length;e<n;++e)arguments[e].targets().add(t);return t},u.throttle=function(t){var e=-1;return this.filter(function(){var n=Date.now();return n-e>t?(e=n,1):0})},u.debounce=function(t){var e=i();return this.targets().add(i(null,null,Object(o.debounce)(t,function(t){var n=t.dataflow;e.receive(t),n&&n.run&&n.run()}))),e},u.between=function(t,e){var n=!1;return t.targets().add(i(null,null,function(){n=!0})),e.targets().add(i(null,null,function(){n=!1})),this.filter(function(){return n})}},function(t,e,n){"use strict";var r=n(575);n.d(e,"a",function(){return r.a})},function(t,e,n){"use strict";function r(t,e){return function(n){return t(n.responseText,e)}}var i=n(179);e.a=function(t,e){return function(n,a,o){arguments.length<3&&(o=a,a=null);var s=Object(i.a)(n).mimeType(t);return s.row=function(t){return arguments.length?s.response(r(e,a=t)):a},s.row(a),o?s.get(o):s}}},function(t,e,n){"use strict";function r(t,e){if(!t||!t.length)return"unknown";var n,r,i,o,s=h.slice();for(r=0,i=t.length;r<i;++r){for(n=e?t[r][e]:t[r],o=0;o<s.length;++o)a(n)&&!s[o](n)&&(s.splice(o,1),--o);if(0===s.length)return"string"}return d[h.indexOf(s[0])]}function i(t,e){return e.reduce(function(e,n){return e[n]=r(t,n),e},{})}function a(t){return null!=t&&t===t}function o(t){return"true"===t||"false"===t||!0===t||!1===t}function s(t){return!isNaN(Date.parse(t))}function u(t){return!(isNaN(+t)||t instanceof Date)}function c(t){return u(t)&&(t=+t)==~~t}n.d(e,"c",function(){return f}),e.a=r,e.b=i;var l=n(0),f={boolean:l.toBoolean,integer:l.toNumber,number:l.toNumber,date:l.toDate,string:l.toString,unknown:l.identity},h=[o,c,u,s],d=["boolean","integer","number","date"]},function(t,e,n){"use strict";var r=n(586),i=n(288),a=n(589),o={dsv:r.a,csv:Object(r.b)(","),tsv:Object(r.b)("\t"),json:i.a,topojson:a.a};e.a=function(t,e){return arguments.length>1?(o[t]=e,this):o.hasOwnProperty(t)?o[t]:null}},function(t,e,n){"use strict";(function(t){function r(e){return!("function"!=typeof t||!Object(a.isFunction)(t.isBuffer))&&t.isBuffer(e)}function i(t,e){return e&&e.copy?JSON.parse(JSON.stringify(t)):t}var a=n(0);e.a=function(t,e){var n=e&&e.property?Object(a.field)(e.property):a.identity;return Object(a.isObject)(t)&&!r(t)?i(n(t)):n(JSON.parse(t))}}).call(e,n(12).Buffer)},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(291);n.d(e,"bbox",function(){return r.a});var i=n(184);n.d(e,"feature",function(){return i.a});var a=n(591);n.d(e,"mesh",function(){return a.a}),n.d(e,"meshArcs",function(){return a.b});var o=n(592);n.d(e,"merge",function(){return o.a}),n.d(e,"mergeArcs",function(){return o.b});var s=n(593);n.d(e,"neighbors",function(){return s.a});var u=n(595);n.d(e,"quantize",function(){return u.a});var c=n(183);n.d(e,"transform",function(){return c.a});var l=n(294);n.d(e,"untransform",function(){return l.a})},function(t,e,n){"use strict";var r=n(183);e.a=function(t){function e(t){t=a(t),t[0]<o&&(o=t[0]),t[0]>u&&(u=t[0]),t[1]<s&&(s=t[1]),t[1]>c&&(c=t[1])}function n(t){switch(t.type){case"GeometryCollection":t.geometries.forEach(n);break;case"Point":e(t.coordinates);break;case"MultiPoint":t.coordinates.forEach(e)}}var i,a=Object(r.a)(t.transform),o=1/0,s=o,u=-o,c=-o;t.arcs.forEach(function(t){for(var e,n=-1,r=t.length;++n<r;)e=a(t[n],n),e[0]<o&&(o=e[0]),e[0]>u&&(u=e[0]),e[1]<s&&(s=e[1]),e[1]>c&&(c=e[1])});for(i in t.objects)n(t.objects[i]);return[o,s,u,c]}},function(t,e,n){"use strict";e.a=function(t){return t}},function(t,e,n){"use strict";e.a=function(t,e){function n(e){var n,r=t.arcs[e<0?~e:e],i=r[0];return t.transform?(n=[0,0],r.forEach(function(t){n[0]+=t[0],n[1]+=t[1]})):n=r[r.length-1],e<0?[n,i]:[i,n]}function r(t,e){for(var n in t){var r=t[n];delete e[r.start],delete r.start,delete r.end,r.forEach(function(t){i[t<0?~t:t]=1}),s.push(r)}}var i={},a={},o={},s=[],u=-1;return e.forEach(function(n,r){var i,a=t.arcs[n<0?~n:n];a.length<3&&!a[1][0]&&!a[1][1]&&(i=e[++u],e[u]=n,e[r]=i)}),e.forEach(function(t){var e,r,i=n(t),s=i[0],u=i[1];if(e=o[s])if(delete o[e.end],e.push(t),e.end=u,r=a[u]){delete a[r.start];var c=r===e?e:e.concat(r);a[c.start=e.start]=o[c.end=r.end]=c}else a[e.start]=o[e.end]=e;else if(e=a[u])if(delete a[e.start],e.unshift(t),e.start=s,r=o[s]){delete o[r.end];var l=r===e?e:r.concat(e);a[l.start=r.start]=o[l.end=e.end]=l}else a[e.start]=o[e.end]=e;else e=[t],a[e.start=s]=o[e.end=u]=e}),r(o,a),r(a,o),e.forEach(function(t){i[t<0?~t:t]||s.push([t])}),s}},function(t,e,n){"use strict";var r=n(292);e.a=function(t){if(null==t)return r.a;var e,n,i=t.scale[0],a=t.scale[1],o=t.translate[0],s=t.translate[1];return function(t,r){r||(e=n=0);var u=2,c=t.length,l=new Array(c),f=Math.round((t[0]-o)/i),h=Math.round((t[1]-s)/a);for(l[0]=f-e,e=f,l[1]=h-n,n=h;u<c;)l[u]=t[u],++u;return l}}},function(t,e,n){"use strict";function r(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function i(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function a(t){return{y:t,m:0,d:1,H:0,M:0,S:0,L:0}}function o(t){function e(t,e){return function(n){var r,i,a,o=[],s=-1,u=0,c=t.length;for(n instanceof Date||(n=new Date(+n));++s<c;)37===t.charCodeAt(s)&&(o.push(t.slice(u,s)),null!=(i=pt[r=t.charAt(++s)])?r=t.charAt(++s):i="e"===r?" ":"0",(a=e[r])&&(r=a(n,i)),o.push(r),u=s+1);return o.push(t.slice(u,s)),o.join("")}}function n(t,e){return function(n){var r,s,u=a(1900);if(o(u,t,n+="",0)!=n.length)return null;if("Q"in u)return new Date(u.Q);if("p"in u&&(u.H=u.H%12+12*u.p),"V"in u){if(u.V<1||u.V>53)return null;"w"in u||(u.w=1),"Z"in u?(r=i(a(u.y)),s=r.getUTCDay(),r=s>4||0===s?dt.p.ceil(r):Object(dt.p)(r),r=dt.l.offset(r,7*(u.V-1)),u.y=r.getUTCFullYear(),u.m=r.getUTCMonth(),u.d=r.getUTCDate()+(u.w+6)%7):(r=e(a(u.y)),s=r.getDay(),r=s>4||0===s?dt.e.ceil(r):Object(dt.e)(r),r=dt.a.offset(r,7*(u.V-1)),u.y=r.getFullYear(),u.m=r.getMonth(),u.d=r.getDate()+(u.w+6)%7)}else("W"in u||"U"in u)&&("w"in u||(u.w="u"in u?u.u%7:"W"in u?1:0),s="Z"in u?i(a(u.y)).getUTCDay():e(a(u.y)).getDay(),u.m=0,u.d="W"in u?(u.w+6)%7+7*u.W-(s+5)%7:u.w+7*u.U-(s+6)%7);return"Z"in u?(u.H+=u.Z/100|0,u.M+=u.Z%100,i(u)):e(u)}}function o(t,e,n,r){for(var i,a,o=0,s=e.length,u=n.length;o<s;){if(r>=u)return-1;if(37===(i=e.charCodeAt(o++))){if(i=e.charAt(o++),!(a=Kt[i in pt?e.charAt(o++):i])||(r=a(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}function s(t,e,n){var r=Ft.exec(e.slice(n));return r?(t.p=Ut[r[0].toLowerCase()],n+r[0].length):-1}function u(t,e,n){var r=Gt.exec(e.slice(n));return r?(t.w=Ht[r[0].toLowerCase()],n+r[0].length):-1}function vt(t,e,n){var r=Bt.exec(e.slice(n));return r?(t.w=qt[r[0].toLowerCase()],n+r[0].length):-1}function gt(t,e,n){var r=Vt.exec(e.slice(n));return r?(t.m=Xt[r[0].toLowerCase()],n+r[0].length):-1}function bt(t,e,n){var r=Wt.exec(e.slice(n));return r?(t.m=Yt[r[0].toLowerCase()],n+r[0].length):-1}function mt(t,e,n){return o(t,Tt,e,n)}function yt(t,e,n){return o(t,Nt,e,n)}function _t(t,e,n){return o(t,Ct,e,n)}function Ot(t){return Lt[t.getDay()]}function wt(t){return Dt[t.getDay()]}function xt(t){return zt[t.getMonth()]}function jt(t){return It[t.getMonth()]}function Mt(t){return Rt[+(t.getHours()>=12)]}function kt(t){return Lt[t.getUTCDay()]}function St(t){return Dt[t.getUTCDay()]}function Et(t){return zt[t.getUTCMonth()]}function At(t){return It[t.getUTCMonth()]}function Pt(t){return Rt[+(t.getUTCHours()>=12)]}var Tt=t.dateTime,Nt=t.date,Ct=t.time,Rt=t.periods,Dt=t.days,Lt=t.shortDays,It=t.months,zt=t.shortMonths,Ft=c(Rt),Ut=l(Rt),Bt=c(Dt),qt=l(Dt),Gt=c(Lt),Ht=l(Lt),Wt=c(It),Yt=l(It),Vt=c(zt),Xt=l(zt),Zt={a:Ot,A:wt,b:xt,B:jt,c:null,d:P,e:P,f:D,H:T,I:N,j:C,L:R,m:L,M:I,p:Mt,Q:ft,s:ht,S:z,u:F,U:U,V:B,w:q,W:G,x:null,X:null,y:H,Y:W,Z:Y,"%":lt},$t={a:kt,A:St,b:Et,B:At,c:null,d:V,e:V,f:J,H:X,I:Z,j:$,L:K,m:Q,M:tt,p:Pt,Q:ft,s:ht,S:et,u:nt,U:rt,V:it,w:at,W:ot,x:null,X:null,y:st,Y:ut,Z:ct,"%":lt},Kt={a:u,A:vt,b:gt,B:bt,c:mt,d:_,e:_,f:k,H:w,I:w,j:O,L:M,m:y,M:x,p:s,Q:E,s:A,S:j,u:h,U:d,V:p,w:f,W:v,x:yt,X:_t,y:b,Y:g,Z:m,"%":S};return Zt.x=e(Nt,Zt),Zt.X=e(Ct,Zt),Zt.c=e(Tt,Zt),$t.x=e(Nt,$t),$t.X=e(Ct,$t),$t.c=e(Tt,$t),{format:function(t){var n=e(t+="",Zt);return n.toString=function(){return t},n},parse:function(t){var e=n(t+="",r);return e.toString=function(){return t},e},utcFormat:function(t){var n=e(t+="",$t);return n.toString=function(){return t},n},utcParse:function(t){var e=n(t,i);return e.toString=function(){return t},e}}}function s(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function u(t){return t.replace(bt,"\\$&")}function c(t){return new RegExp("^(?:"+t.map(u).join("|")+")","i")}function l(t){for(var e={},n=-1,r=t.length;++n<r;)e[t[n].toLowerCase()]=n;return e}function f(t,e,n){var r=vt.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function h(t,e,n){var r=vt.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function d(t,e,n){var r=vt.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function p(t,e,n){var r=vt.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function v(t,e,n){var r=vt.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function g(t,e,n){var r=vt.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function b(t,e,n){var r=vt.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function m(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function y(t,e,n){var r=vt.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function _(t,e,n){var r=vt.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function O(t,e,n){var r=vt.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function w(t,e,n){var r=vt.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function x(t,e,n){var r=vt.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function j(t,e,n){var r=vt.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function M(t,e,n){var r=vt.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function k(t,e,n){var r=vt.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function S(t,e,n){var r=gt.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function E(t,e,n){var r=vt.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function A(t,e,n){var r=vt.exec(e.slice(n));return r?(t.Q=1e3*+r[0],n+r[0].length):-1}function P(t,e){return s(t.getDate(),e,2)}function T(t,e){return s(t.getHours(),e,2)}function N(t,e){return s(t.getHours()%12||12,e,2)}function C(t,e){return s(1+dt.a.count(Object(dt.k)(t),t),e,3)}function R(t,e){return s(t.getMilliseconds(),e,3)}function D(t,e){return R(t,e)+"000"}function L(t,e){return s(t.getMonth()+1,e,2)}function I(t,e){return s(t.getMinutes(),e,2)}function z(t,e){return s(t.getSeconds(),e,2)}function F(t){var e=t.getDay();return 0===e?7:e}function U(t,e){return s(dt.h.count(Object(dt.k)(t),t),e,2)}function B(t,e){var n=t.getDay();return t=n>=4||0===n?Object(dt.i)(t):dt.i.ceil(t),s(dt.i.count(Object(dt.k)(t),t)+(4===Object(dt.k)(t).getDay()),e,2)}function q(t){return t.getDay()}function G(t,e){return s(dt.e.count(Object(dt.k)(t),t),e,2)}function H(t,e){return s(t.getFullYear()%100,e,2)}function W(t,e){return s(t.getFullYear()%1e4,e,4)}function Y(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+s(e/60|0,"0",2)+s(e%60,"0",2)}function V(t,e){return s(t.getUTCDate(),e,2)}function X(t,e){return s(t.getUTCHours(),e,2)}function Z(t,e){return s(t.getUTCHours()%12||12,e,2)}function $(t,e){return s(1+dt.l.count(Object(dt.v)(t),t),e,3)}function K(t,e){return s(t.getUTCMilliseconds(),e,3)}function J(t,e){return K(t,e)+"000"}function Q(t,e){return s(t.getUTCMonth()+1,e,2)}function tt(t,e){return s(t.getUTCMinutes(),e,2)}function et(t,e){return s(t.getUTCSeconds(),e,2)}function nt(t){var e=t.getUTCDay();return 0===e?7:e}function rt(t,e){return s(dt.s.count(Object(dt.v)(t),t),e,2)}function it(t,e){var n=t.getUTCDay();return t=n>=4||0===n?Object(dt.t)(t):dt.t.ceil(t),s(dt.t.count(Object(dt.v)(t),t)+(4===Object(dt.v)(t).getUTCDay()),e,2)}function at(t){return t.getUTCDay()}function ot(t,e){return s(dt.p.count(Object(dt.v)(t),t),e,2)}function st(t,e){return s(t.getUTCFullYear()%100,e,2)}function ut(t,e){return s(t.getUTCFullYear()%1e4,e,4)}function ct(){return"+0000"}function lt(){return"%"}function ft(t){return+t}function ht(t){return Math.floor(+t/1e3)}e.a=o;var dt=n(111),pt={"-":"",_:" ",0:"0"},vt=/^\s*\d+/,gt=/^%/,bt=/[\\^$*+?|[\]().{}]/g},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n(185),i="%Y-%m-%dT%H:%M:%S.%LZ";Date.prototype.toISOString||Object(r.d)(i)},function(t,e,n){"use strict";function r(t,e,n,r){var i,a,o,s,u,c=this,l=0;for(this.dataflow=t,this.stamp=e,this.fields=null,this.encode=r||null,this.pulses=n,o=0,s=n.length;o<s;++o)if(i=n[o],i.stamp===e){if(i.fields){a=c.fields||(c.fields={});for(u in i.fields)a[u]=1}i.changed(c.ADD)&&(l|=c.ADD),i.changed(c.REM)&&(l|=c.REM),i.changed(c.MOD)&&(l|=c.MOD)}this.changes=l}e.a=r;var i=n(112),a=n(0),o=Object(a.inherits)(r,i.b);o.fork=function(t){var e=new i.b(this.dataflow).init(this,t&this.NO_FIELDS);return void 0!==t&&(t&e.ADD&&this.visit(e.ADD,function(t){return e.add.push(t)}),t&e.REM&&this.visit(e.REM,function(t){return e.rem.push(t)}),t&e.MOD&&this.visit(e.MOD,function(t){return e.mod.push(t)})),e},o.changed=function(t){return this.changes&t},o.modified=function(t){var e=this,n=e.fields;return n&&e.changes&e.MOD?Object(a.isArray)(t)?t.some(function(t){return n[t]}):n[t]:0},o.filter=function(){Object(a.error)("MultiPulse does not support filtering.")},o.materialize=function(){Object(a.error)("MultiPulse does not support materialization.")},o.visit=function(t,e){var n=this,r=n.pulses,i=r.length,a=0;if(t&n.SOURCE)for(;a<i;++a)r[a].visit(t,e);else for(;a<i;++a)r[a].stamp===n.stamp&&r[a].visit(t,e);return n}},function(t,e,n){"use strict";function r(t){return function(e){for(var n=t.length,r=1,i=String(t[0](e));r<n;++r)i+="|"+t[r](e);return i}}function i(t){return t&&t.length?1===t.length?t[0]:r(t):function(){return""}}e.a=i},function(t,e,n){"use strict";function r(t){this._key=t?Object(o.field)(t):i.r,this.reset()}e.a=r;var i=n(1),a=n(47),o=n(0),s=r.prototype;s.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null},s.add=function(t){this._add.push(t)},s.rem=function(t){this._rem.push(t)},s.values=function(){if(this._get=null,0===this._rem.length)return this._add;var t,e,n,r=this._add,i=this._rem,a=this._key,o=r.length,s=i.length,u=Array(o-s),c={};for(t=0;t<s;++t)c[a(i[t])]=1;for(t=0,e=0;t<o;++t)c[a(n=r[t])]?c[a(n)]=0:u[e++]=n;return this._rem=[],this._add=u},s.distinct=function(t){for(var e,n=this.values(),r=n.length,i={},a=0;--r>=0;)e=t(n[r])+"",i.hasOwnProperty(e)||(i[e]=1,++a);return a},s.extent=function(t){if(this._get!==t||!this._ext){var e=this.values(),n=Object(o.extentIndex)(e,t);this._ext=[e[n[0]],e[n[1]]],this._get=t}return this._ext},s.argmin=function(t){return this.extent(t)[0]||{}},s.argmax=function(t){return this.extent(t)[1]||{}},s.min=function(t){var e=this.extent(t)[0];return null!=e?t(e):1/0},s.max=function(t){var e=this.extent(t)[1];return null!=e?t(e):-1/0},s.quartile=function(t){return this._get===t&&this._q||(this._q=Object(a.c)(this.values(),t),this._get=t),this._q},s.q1=function(t){return this.quartile(t)[0]},s.q2=function(t){return this.quartile(t)[1]},s.q3=function(t){return this.quartile(t)[2]},s.ci=function(t){return this._get===t&&this._ci||(this._ci=Object(a.b)(this.values(),1e3,.05,t),this._get=t),this._ci},s.ci0=function(t){return this.ci(t)[0]},s.ci1=function(t){return this.ci(t)[1]}},function(t,e,n){"use strict";function r(t){return null===t?NaN:+t}e.a=function(t,e){var n,i=[],a=t.length,o=-1;if(null==e)for(;++o<a;)isNaN(n=r(t[o]))||i.push(n);else for(;++o<a;)isNaN(n=r(e(t[o],o,t)))||i.push(n);return i}},function(t,e,n){"use strict";var r=n(300),i=n(9);e.a=function(t,e){var n=Object(r.a)(t,e);return[Object(i.quantile)(n.sort(i.ascending),.25),Object(i.quantile)(n,.5),Object(i.quantile)(n,.75)]}},function(t,e,n){"use strict";var r=n(48);e.a=function(t,e){var n,i,a=NaN,o={};return o.mean=function(t){return arguments.length?(n=t||0,a=NaN,o):n},o.stdev=function(t){return arguments.length?(i=null==t?1:t,a=NaN,o):i},o.sample=function(){var t,e,o=0,s=0;if(a===a)return o=a,a=NaN,o;do{o=2*Object(r.a)()-1,s=2*Object(r.a)()-1,t=o*o+s*s}while(0===t||t>1);return e=Math.sqrt(-2*Math.log(t)/t),a=n+s*e*i,n+o*e*i},o.pdf=function(t){var e=Math.exp(Math.pow(t-n,2)/(-2*Math.pow(i,2)));return 1/(i*Math.sqrt(2*Math.PI))*e},o.cdf=function(t){var e,r=(t-n)/i,a=Math.abs(r);if(a>37)e=0;else{var o,s=Math.exp(-a*a/2);a<7.07106781186547?(o=.0352624965998911*a+.700383064443688,o=o*a+6.37396220353165,o=o*a+33.912866078383,o=o*a+112.079291497871,o=o*a+221.213596169931,o=o*a+220.206867912376,e=s*o,o=.0883883476483184*a+1.75566716318264,o=o*a+16.064177579207,o=o*a+86.7807322029461,o=o*a+296.564248779674,o=o*a+637.333633378831,o=o*a+793.826512519948,o=o*a+440.413735824752,e/=o):(o=a+.65,o=a+4/o,o=a+3/o,o=a+2/o,o=a+1/o,e=s/o/2.506628274631)}return r>0?1-e:e},o.icdf=function(t){if(t<=0||t>=1)return NaN;var e=2*t-1,r=8*(Math.PI-3)/(3*Math.PI*(4-Math.PI)),a=2/(Math.PI*r)+Math.log(1-Math.pow(e,2))/2,o=Math.log(1-e*e)/r,s=(e>0?1:-1)*Math.sqrt(Math.sqrt(a*a-o)-a);return n+i*Math.SQRT2*s},o.mean(t).stdev(e)}},function(t,e,n){"use strict";var r=n(0);e.a=function(t,e,n){var i=t,a=e||[],o=n||[],s={},u=0;return{add:function(t){o.push(t)},remove:function(t){s[i(t)]=++u},size:function(){return a.length},data:function(t,e){return u&&(a=a.filter(function(t){return!s[i(t)]}),s={},u=0),e&&t&&a.sort(t),o.length&&(a=t?Object(r.merge)(t,a,o.sort(t)):a.concat(o),o=[]),a}}}},function(t,e,n){"use strict";function r(t){a.g.call(this,{},t),this._keys=Object(o.fastmap)();var e=this._targets=[];e.active=0,e.forEach=function(t){for(var n=0,r=e.active;n<r;++n)t(e[n],n,e)}}e.a=r;var i=n(305),a=n(1),o=n(0),s=Object(o.inherits)(r,a.g);s.activate=function(t){this._targets[this._targets.active++]=t},s.subflow=function(t,e,n,r){var a,o,s=this.value,u=s.hasOwnProperty(t)&&s[t];return u?u.value.stamp<n.stamp&&(u.init(n),this.activate(u)):(o=r||(o=this._group[t])&&o.tuple,a=n.dataflow,u=a.add(new i.a(n.fork(n.NO_SOURCE),this)).connect(e(a,t,o)),s[t]=u,this.activate(u)),u},s.transform=function(t,e){function n(t){return i.subflow(t,s,e)}var r=e.dataflow,i=this,o=t.key,s=t.subflow,u=this._keys,c=t.modified("key");return this._group=t.group||{},this._targets.active=0,e.visit(e.REM,function(t){var e=Object(a.r)(t),r=u.get(e);void 0!==r&&(u.delete(e),n(r).rem(t))}),e.visit(e.ADD,function(t){var e=o(t);u.set(Object(a.r)(t),e),n(e).add(t)}),c||e.modified(o.fields)?e.visit(e.MOD,function(t){var e=Object(a.r)(t),r=u.get(e),i=o(t);r===i?n(i).mod(t):(u.set(e,i),n(r).rem(t),n(i).add(t))}):e.changed(e.MOD)&&e.visit(e.MOD,function(t){n(u.get(Object(a.r)(t))).mod(t)}),c&&e.visit(e.REFLOW,function(t){var e=Object(a.r)(t),r=u.get(e),i=o(t);r!==i&&(u.set(e,i),n(r).rem(t),n(i).add(t))}),u.empty>r.cleanThreshold&&r.runAfter(u.clean),e}},function(t,e,n){"use strict";function r(t,e){i.d.call(this,t),this.parent=e}e.a=r;var i=n(1),a=n(0),o=Object(a.inherits)(r,i.d);o.connect=function(t){return this.targets().add(t),t.source=this},o.add=function(t){this.value.add.push(t)},o.rem=function(t){this.value.rem.push(t)},o.mod=function(t){this.value.mod.push(t)},o.init=function(t){this.value.init(t,t.NO_SOURCE)},o.evaluate=function(){return this.value}},function(t,e,n){"use strict";function r(t,e){return t?t.map(function(t,n){return e[n]||Object(i.accessorName)(t)}):null}e.a=r;var i=n(0)},function(t,e,n){"use strict";function r(t,e,n,r){var o=a[t](e,n);return{init:o.init||i.zero,update:function(t,e){e[r]=o.next(t)}}}e.b=r,n.d(e,"c",function(){return a}),n.d(e,"a",function(){return o});var i=n(0),a={row_number:function(){return{next:function(t){return t.index+1}}},rank:function(){var t;return{init:function(){t=1},next:function(e){var n=e.index,r=e.data;return n&&e.compare(r[n-1],r[n])?t=n+1:t}}},dense_rank:function(){var t;return{init:function(){t=1},next:function(e){var n=e.index,r=e.data;return n&&e.compare(r[n-1],r[n])?++t:t}}},percent_rank:function(){var t=a.rank(),e=t.next;return{init:t.init,next:function(t){return(e(t)-1)/(t.data.length-1)}}},cume_dist:function(){var t;return{init:function(){t=0},next:function(e){var n=e.index,r=e.data,i=e.compare;if(t<n){for(;n+1<r.length&&!i(r[n],r[n+1]);)++n;t=n}return(1+t)/r.length}}},ntile:function(t,e){(e=+e)>0||Object(i.error)("ntile num must be greater than zero.");var n=a.cume_dist(),r=n.next;return{init:n.init,next:function(t){return Math.ceil(e*r(t))}}},lag:function(t,e){return e=+e||1,{next:function(n){var r=n.index-e;return r>=0?t(n.data[r]):null}}},lead:function(t,e){return e=+e||1,{next:function(n){var r=n.index+e,i=n.data;return r<i.length?t(i[r]):null}}},first_value:function(t){return{next:function(e){return t(e.data[e.i0])}}},last_value:function(t){return{next:function(e){return t(e.data[e.i1-1])}}},nth_value:function(t,e){return e=+e,e>0||Object(i.error)("nth_value nth must be greater than zero."),{next:function(n){var r=n.i0+(e-1);return r<n.i1?t(n.data[r]):null}}}},o=Object.keys(a)},function(t,e,n){"use strict";function r(t){i.a.call(this,t),this.items=this.items||[]}e.a=r;var i=n(309),a=n(0);Object(a.inherits)(r,i.a)},function(t,e,n){"use strict";function r(t){this.mark=t,this.bounds=this.bounds||new i.a}e.a=r;var i=n(42)},function(t,e,n){"use strict";function r(t){this._pending=0,this._loader=t||Object(s.d)()}function i(t){t._pending+=1}function a(t){t._pending-=1}e.a=r;var o=n(113),s=n(74),u=r.prototype;u.pending=function(){return this._pending},u.sanitizeURL=function(t){var e=this;return i(e),e._loader.sanitize(t,{context:"href"}).then(function(t){return a(e),t}).catch(function(){return a(e),null})},u.loadImage=function(t){var e=this,n=Object(o.b)();return i(e),e._loader.sanitize(t,{context:"image"}).then(function(t){var r=t.href;if(!r||!n)throw{url:r};var i=new n;return i.onload=function(){a(e),i.loaded=!0},i.onerror=function(){a(e),i.loaded=!1},i.src=r,i}).catch(function(t){return a(e),{loaded:!1,width:0,height:0,src:t&&t.url||""}})},u.ready=function(){var t=this;return new Promise(function(e){function n(r){t.pending()?setTimeout(function(){n(!0)},10):e(r)}n(!1)})}},function(t,e,n){"use strict";function r(t,e){if("undefined"!=typeof document&&document.createElement){var n=document.createElement("canvas");if(n&&n.getContext)return n.width=t,n.height=e,n}return null}function i(){return"undefined"!=typeof Image?Image:null}e.a=r,e.b=i},function(t,e,n){"use strict";function r(t,e){if(a)try{return new a(t,e)}catch(t){}return null}function i(){return a&&a.Image||null}e.a=r,e.b=i;var a;try{if(!(a=n(661)))throw 1}catch(t){try{a=n(662)}catch(t){a=null}}},function(t,e,n){"use strict";function r(t,e){return JSON.stringify(t,s,e)}function i(t){return a("string"==typeof t?JSON.parse(t):t)}function a(t){var e,n,r,i=t.marktype,s=t.items;if(s)for(n=0,r=s.length;n<r;++n)e=i?"mark":"group",s[n][e]=t,s[n].zindex&&(s[n][e].zdirty=!0),"group"===(i||e)&&a(s[n]);return i&&Object(o.a)(t),t}e.b=r,e.a=i;var o=n(314),s=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","interpolate","tension","orient","defined","url","path","x2","y2","size","shape","text","angle","theta","radius","dx","dy","font","fontSize","fontWeight","fontStyle","fontVariant"]},function(t,e,n){"use strict";var r=n(42),i=n(315),a=n(49),o={mark:null};e.a=function(t,e,n){var s,u,c,l,f=a.a[t.marktype],h=f.bound,d=t.items,p=d&&d.length;if(f.nested)return p?c=d[0]:(o.mark=t,c=o),l=Object(i.a)(c,h,n),e=e&&e.union(l)||l;if(e=e||t.bounds&&t.bounds.clear()||new r.a,p)for(s=0,u=d.length;s<u;++s)e.union(Object(i.a)(d[s],h,n));return t.bounds=e}},function(t,e,n){"use strict";var r=n(42),i=n(49);e.a=function(t,e,n){var a=i.a[t.mark.marktype],o=e||a.bound;return a.nested&&(t=t.mark),o(t.bounds||(t.bounds=new r.a),t,n)}},function(t,e,n){"use strict";function r(t,e,n){var r=a.hasOwnProperty(t)&&a[t],i=null;return r&&(i=r.curve||r[e||"vertical"],r.tension&&null!=n&&(i=i[r.tension](n))),i}e.a=r;var i=n(317),a={basis:{curve:i.c},"basis-closed":{curve:i.d},"basis-open":{curve:i.e},bundle:{curve:i.f,tension:"beta",value:.85},cardinal:{curve:i.g,tension:"tension",value:0},"cardinal-open":{curve:i.i,tension:"tension",value:0},"cardinal-closed":{curve:i.h,tension:"tension",value:0},"catmull-rom":{curve:i.j,tension:"alpha",value:.5},"catmull-rom-closed":{curve:i.k,tension:"alpha",value:.5},"catmull-rom-open":{curve:i.l,tension:"alpha",value:.5},linear:{curve:i.m},"linear-closed":{curve:i.n},monotone:{horizontal:i.p,vertical:i.o},natural:{curve:i.q},step:{curve:i.r},"step-after":{curve:i.s},"step-before":{curve:i.t}}},function(t,e,n){"use strict";var r=n(665);n.d(e,"a",function(){return r.a});var i=n(318);n.d(e,"b",function(){return i.a});var a=n(187);n.d(e,"u",function(){return a.a});var o=(n(667),n(670),n(320),n(321),n(671),n(672));n.d(e,"v",function(){return o.a});var s=(n(323),n(324),n(325),n(327),n(326),n(328),n(329),n(673));n.d(e,"d",function(){return s.a});var u=n(674);n.d(e,"e",function(){return u.a});var c=n(116);n.d(e,"c",function(){return c.b});var l=n(675);n.d(e,"f",function(){return l.a});var f=n(330);n.d(e,"h",function(){return f.b});var h=n(331);n.d(e,"i",function(){return h.b});var d=n(117);n.d(e,"g",function(){return d.b});var p=n(676);n.d(e,"k",function(){return p.a});var v=n(677);n.d(e,"l",function(){return v.a});var g=n(189);n.d(e,"j",function(){return g.a});var b=n(678);n.d(e,"n",function(){return b.a});var m=n(114);n.d(e,"m",function(){return m.a});var y=n(679);n.d(e,"o",function(){return y.a}),n.d(e,"p",function(){return y.b});var _=n(680);n.d(e,"q",function(){return _.a});var O=n(681);n.d(e,"r",function(){return O.a}),n.d(e,"s",function(){return O.b}),n.d(e,"t",function(){return O.c}),n(682),n(683),n(684),n(79),n(685),n(686),n(190),n(687),n(688),n(80),n(689)},function(t,e,n){"use strict";var r=n(50),i=n(51),a=n(114),o=n(187),s=n(188);e.a=function(){function t(t){var e,i,a,o,s,v=t.length,g=!1,b=new Array(v),m=new Array(v);for(null==h&&(p=d(s=Object(r.a)())),e=0;e<=v;++e){if(!(e<v&&f(o=t[e],e,t))===g)if(g=!g)i=e,p.areaStart(),p.lineStart();else{for(p.lineEnd(),p.lineStart(),a=e-1;a>=i;--a)p.point(b[a],m[a]);p.lineEnd(),p.areaEnd()}g&&(b[e]=+n(o,e,t),m[e]=+c(o,e,t),p.point(u?+u(o,e,t):b[e],l?+l(o,e,t):m[e]))}if(s)return p=null,s+""||null}function e(){return Object(o.a)().defined(f).curve(d).context(h)}var n=s.a,u=null,c=Object(i.a)(0),l=s.b,f=Object(i.a)(!0),h=null,d=a.a,p=null;return t.x=function(e){return arguments.length?(n="function"==typeof e?e:Object(i.a)(+e),u=null,t):n},t.x0=function(e){return arguments.length?(n="function"==typeof e?e:Object(i.a)(+e),t):n},t.x1=function(e){return arguments.length?(u=null==e?null:"function"==typeof e?e:Object(i.a)(+e),t):u},t.y=function(e){return arguments.length?(c="function"==typeof e?e:Object(i.a)(+e),l=null,t):c},t.y0=function(e){return arguments.length?(c="function"==typeof e?e:Object(i.a)(+e),t):c},t.y1=function(e){return arguments.length?(l=null==e?null:"function"==typeof e?e:Object(i.a)(+e),t):l},t.lineX0=t.lineY0=function(){return e().x(n).y(c)},t.lineY1=function(){return e().x(n).y(l)},t.lineX1=function(){return e().x(u).y(c)},t.defined=function(e){return arguments.length?(f="function"==typeof e?e:Object(i.a)(!!e),t):f},t.curve=function(e){return arguments.length?(d=e,null!=h&&(p=d(h)),t):d},t.context=function(e){return arguments.length?(null==e?h=p=null:p=d(h=e),t):h},t}},function(t,e,n){"use strict";function r(t){this._curve=t}function i(t){function e(e){return new r(t(e))}return e._curve=t,e}n.d(e,"a",function(){return o}),e.b=i;var a=n(114),o=i(a.a);r.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}}},function(t,e,n){"use strict";function r(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?e(Object(i.b)(t)):e()._curve},t}e.a=r;var i=n(319);n(187)},function(t,e,n){"use strict";e.a=function(t,e){return[(e=+e)*Math.cos(t-=Math.PI/2),e*Math.sin(t)]}},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=Array.prototype.slice},function(t,e,n){"use strict";var r=n(78);e.a={draw:function(t,e){var n=Math.sqrt(e/r.j);t.moveTo(n,0),t.arc(0,0,n,0,r.m)}}},function(t,e,n){"use strict";e.a={draw:function(t,e){var n=Math.sqrt(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}}},function(t,e,n){"use strict";var r=Math.sqrt(1/3),i=2*r;e.a={draw:function(t,e){var n=Math.sqrt(e/i),a=n*r;t.moveTo(0,-n),t.lineTo(a,0),t.lineTo(0,n),t.lineTo(-a,0),t.closePath()}}},function(t,e,n){"use strict";var r=n(78),i=Math.sin(r.j/10)/Math.sin(7*r.j/10),a=Math.sin(r.m/10)*i,o=-Math.cos(r.m/10)*i;e.a={draw:function(t,e){var n=Math.sqrt(.8908130915292852*e),i=a*n,s=o*n;t.moveTo(0,-n),t.lineTo(i,s);for(var u=1;u<5;++u){var c=r.m*u/5,l=Math.cos(c),f=Math.sin(c);t.lineTo(f*n,-l*n),t.lineTo(l*i-f*s,f*i+l*s)}t.closePath()}}},function(t,e,n){"use strict";e.a={draw:function(t,e){var n=Math.sqrt(e),r=-n/2;t.rect(r,r,n,n)}}},function(t,e,n){"use strict";var r=Math.sqrt(3);e.a={draw:function(t,e){var n=-Math.sqrt(e/(3*r));t.moveTo(0,2*n),t.lineTo(-r*n,-n),t.lineTo(r*n,-n),t.closePath()}}},function(t,e,n){"use strict";var r=-.5,i=Math.sqrt(3)/2,a=1/Math.sqrt(12),o=3*(a/2+1);e.a={draw:function(t,e){var n=Math.sqrt(e/o),s=n/2,u=n*a,c=s,l=n*a+n,f=-c,h=l;t.moveTo(s,u),t.lineTo(c,l),t.lineTo(f,h),t.lineTo(r*s-i*u,i*s+r*u),t.lineTo(r*c-i*l,i*c+r*l),t.lineTo(r*f-i*h,i*f+r*h),t.lineTo(r*s+i*u,r*u-i*s),t.lineTo(r*c+i*l,r*l-i*c),t.lineTo(r*f+i*h,r*h-i*f),t.closePath()}}},function(t,e,n){"use strict";function r(t,e){this._context=t,this._k=(1-e)/6}e.a=r;var i=n(115),a=n(117);r.prototype={areaStart:i.a,areaEnd:i.a,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Object(a.c)(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}},e.b=function t(e){function n(t){return new r(t,e)}return n.tension=function(e){return t(+e)},n}(0)},function(t,e,n){"use strict";function r(t,e){this._context=t,this._k=(1-e)/6}e.a=r;var i=n(117);r.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Object(i.c)(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}},e.b=function t(e){function n(t){return new r(t,e)}return n.tension=function(e){return t(+e)},n}(0)},function(t,e,n){"use strict";function r(t){return c.hasOwnProperty(t)?c[t]:i(t)}function i(t){if(!l.hasOwnProperty(t)){var e=Object(a.a)(t);l[t]={draw:function(t,n){Object(o.a)(t,e,0,0,Math.sqrt(n)/2)}}}return l[t]}e.a=r;var a=n(118),o=n(191),s=2*Math.PI,u=Math.sqrt(3)/2,c={circle:{draw:function(t,e){var n=Math.sqrt(e)/2;t.moveTo(n,0),t.arc(0,0,n,0,s)}},cross:{draw:function(t,e){var n=Math.sqrt(e)/2,r=n/2.5;t.moveTo(-n,-r),t.lineTo(-n,r),t.lineTo(-r,r),t.lineTo(-r,n),t.lineTo(r,n),t.lineTo(r,r),t.lineTo(n,r),t.lineTo(n,-r),t.lineTo(r,-r),t.lineTo(r,-n),t.lineTo(-r,-n),t.lineTo(-r,-r),t.closePath()}},diamond:{draw:function(t,e){var n=Math.sqrt(e)/2;t.moveTo(-n,0),t.lineTo(0,-n),t.lineTo(n,0),t.lineTo(0,n),t.closePath()}},square:{draw:function(t,e){var n=Math.sqrt(e),r=-n/2;t.rect(r,r,n,n)}},"triangle-up":{draw:function(t,e){var n=Math.sqrt(e)/2,r=u*n;t.moveTo(0,-r),t.lineTo(-n,r),t.lineTo(n,r),t.closePath()}},"triangle-down":{draw:function(t,e){var n=Math.sqrt(e)/2,r=u*n;t.moveTo(0,r),t.lineTo(-n,-r),t.lineTo(n,-r),t.closePath()}},"triangle-right":{draw:function(t,e){var n=Math.sqrt(e)/2,r=u*n;t.moveTo(r,0),t.lineTo(-r,-n),t.lineTo(-r,n),t.closePath()}},"triangle-left":{draw:function(t,e){var n=Math.sqrt(e)/2,r=u*n;t.moveTo(-r,0),t.lineTo(r,-n),t.lineTo(r,n),t.closePath()}}},l={}},function(t,e,n){"use strict";function r(t){return t.x}function i(t){return t.y}function a(t){return t.width}function o(t){return t.height}function s(t){return function(){return t}}var u=n(50);e.a=function(){function t(t,r,i){var a,o=null!=r?r:+e.call(this,t),s=null!=i?i:+n.call(this,t),d=+c.call(this,t),p=+l.call(this,t),v=+f.call(this,t);if(h||(h=a=Object(u.a)()),v<=0)h.rect(o,s,d,p);else{var g=o+d,b=s+p;h.moveTo(o+v,s),h.lineTo(g-v,s),h.quadraticCurveTo(g,s,g,s+v),h.lineTo(g,b-v),h.quadraticCurveTo(g,b,g-v,b),h.lineTo(o+v,b),h.quadraticCurveTo(o,b,o,b-v),h.lineTo(o,s+v),h.quadraticCurveTo(o,s,o+v,s),h.closePath()}if(a)return h=null,a+""||null}var e=r,n=i,c=a,l=o,f=s(0),h=null;return t.x=function(n){return arguments.length?(e="function"==typeof n?n:s(+n),t):e},t.y=function(e){return arguments.length?(n="function"==typeof e?e:s(+e),t):n},t.width=function(e){return arguments.length?(c="function"==typeof e?e:s(+e),t):c},t.height=function(e){return arguments.length?(l="function"==typeof e?e:s(+e),t):l},t.cornerRadius=function(e){return arguments.length?(f="function"==typeof e?e:s(+e),t):f},t.context=function(e){return arguments.length?(h=null==e?null:e,t):h},t}},function(t,e,n){"use strict";var r=n(50),i=Math.PI;e.a=function(){function t(t,e,n){var r=n/2;if(u){var a=l-e,o=t-c;if(a||o){var s=Math.sqrt(a*a+o*o),d=(a/=s)*f,p=(o/=s)*f,v=Math.atan2(o,a);h.moveTo(c-d,l-p),h.lineTo(t-a*r,e-o*r),h.arc(t,e,r,v-i,v),h.lineTo(c+d,l+p),h.arc(c,l,f,v,v+i)}else h.arc(t,e,r,0,2*i);h.closePath()}else u=1;c=t,l=e,f=r}function e(e){var i,c,l,f=e.length,d=!1;for(null==h&&(h=l=Object(r.a)()),i=0;i<=f;++i)!(i<f&&s(c=e[i],i,e))===d&&(d=!d)&&(u=0),d&&t(+n(c,i,e),+a(c,i,e),+o(c,i,e));if(l)return h=null,l+""||null}var n,a,o,s,u,c,l,f,h=null;return e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(a=t,e):a},e.size=function(t){return arguments.length?(o=t,e):o},e.defined=function(t){return arguments.length?(s=t,e):s},e.context=function(t){return arguments.length?(h=null==t?null:t,e):h},e}},function(t,e,n){"use strict";var r=n(691);e.a=function(t,e,n){return n.id?Object(r.a)(t,n,e.bounds):n}},function(t,e,n){"use strict";function r(t){o.a.call(this,t),this._down=null,this._touch=null,this._first=!0}function i(t,e,n){return function(r){var i=this._active,a=this.pickEvent(r);a===i?this.fire(t,r):(i&&i.exit||this.fire(n,r),this._active=a,this.fire(e,r),this.fire(t,r))}}function a(t){return function(e){this.fire(t,e),this._active=null}}e.a=r;var o=n(196),s=n(49),u=n(337),c=n(54),l=n(0),f=Object(l.inherits)(r,o.a);f.initialize=function(t,e,n){var r=this._canvas=t&&Object(c.e)(t,"canvas");if(r){var i=this;this.events.forEach(function(t){r.addEventListener(t,function(e){f[t]?f[t].call(i,e):i.fire(t,e)})})}return o.a.prototype.initialize.call(this,t,e,n)},f.canvas=function(){return this._canvas},f.context=function(){return this._canvas.getContext("2d")},f.events=["keydown","keypress","keyup","dragenter","dragleave","dragover","mousedown","mouseup","mousemove","mouseout","mouseover","click","dblclick","wheel","mousewheel","touchstart","touchmove","touchend"],f.DOMMouseScroll=function(t){this.fire("mousewheel",t)},f.mousemove=i("mousemove","mouseover","mouseout"),f.dragover=i("dragover","dragenter","dragleave"),f.mouseout=a("mouseout"),f.dragleave=a("dragleave"),f.mousedown=function(t){this._down=this._active,this.fire("mousedown",t)},f.click=function(t){this._down===this._active&&(this.fire("click",t),this._down=null)},f.touchstart=function(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire("touchstart",t,!0)},f.touchmove=function(t){this.fire("touchmove",t,!0)},f.touchend=function(t){this.fire("touchend",t,!0),this._touch=null},f.fire=function(t,e,n){var r,i,a=n?this._touch:this._active,o=this._handlers[t];if("click"===t&&a&&a.href?this.handleHref(e,a,a.href):("mouseover"===t||"mouseout"===t)&&a&&a.tooltip&&this.handleTooltip(e,a,"mouseover"===t?a.tooltip:null),o)for(e.vegaType=t,r=0,i=o.length;r<i;++r)o[r].handler.call(this._obj,e,a)},f.on=function(t,e){var n=this.eventName(t),r=this._handlers;return this._handlerIndex(r[n],t,e)<0&&(r[n]||(r[n]=[])).push({type:t,handler:e}),this},f.off=function(t,e){var n=this.eventName(t),r=this._handlers[n],i=this._handlerIndex(r,t,e);return i>=0&&r.splice(i,1),this},f.pickEvent=function(t){var e=Object(u.a)(t,this._canvas),n=this._origin;return this.pick(this._scene,e[0],e[1],e[0]-n[0],e[1]-n[1])},f.pick=function(t,e,n,r,i){var a=this.context();return s.a[t.marktype].pick.call(this,a,t,e,n,r,i)}},function(t,e,n){"use strict";e.a=function(t,e){var n=e.getBoundingClientRect();return[t.clientX-n.left-(e.clientLeft||0),t.clientY-n.top-(e.clientTop||0)]}},function(t,e,n){"use strict";function r(t){o.a.call(this,t),this._redraw=!1,this._dirty=new s.a}function i(t,e,n){return e.expand(1).round(),e.translate(-n[0]%1,-n[1]%1),t.beginPath(),t.rect(e.x1,e.y1,e.width(),e.height()),t.clip(),e}function a(t,e){if(null==e)return t;for(var n=g.clear().union(t);null!=e;e=e.mark.group)n.translate(e.x||0,e.y||0);return n}e.a=r;var o=n(124),s=n(42),u=n(49),c=n(54),l=n(703),f=n(704),h=n(113),d=n(0),p=Object(d.inherits)(r,o.a),v=o.a.prototype,g=new s.a;p.initialize=function(t,e,n,r,i){return this._canvas=Object(h.a)(1,1),t&&(Object(c.c)(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),v.initialize.call(this,t,e,n,r,i)},p.resize=function(t,e,n,r){return v.resize.call(this,t,e,n,r),Object(f.a)(this._canvas,this._width,this._height,this._origin,this._scale),this._redraw=!0,this},p.canvas=function(){return this._canvas},p.context=function(){return this._canvas?this._canvas.getContext("2d"):null},p.dirty=function(t){var e=a(t.bounds,t.mark.group);this._dirty.union(e)},p._render=function(t){var e=this.context(),n=this._origin,r=this._width,a=this._height,o=this._dirty;return e.save(),this._redraw||o.empty()?(this._redraw=!1,o=null):o=i(e,o,n),this.clear(-n[0],-n[1],r,a),this.draw(e,t,o),e.restore(),this._dirty.clear(),this},p.draw=function(t,e,n){var r=u.a[e.marktype];e.clip&&Object(l.a)(t,e),r.draw.call(this,t,e,n),e.clip&&t.restore()},p.clear=function(t,e,n,r){var i=this.context();i.clearRect(t,e,n,r),null!=this._bgcolor&&(i.fillStyle=this._bgcolor,i.fillRect(t,e,n,r))}},function(t,e,n){"use strict";function r(t){a.a.call(this,t);var e=this;e._hrefHandler=i(e,function(t,n){n&&n.href&&e.handleHref(t,n,n.href)}),e._tooltipHandler=i(e,function(t,n){n&&n.tooltip&&e.handleTooltip(t,n,"mouseover"===t.type?n.tooltip:null)})}function i(t,e){return function(n){var r=n.target,i=r.__data__;n.vegaType=n.type,i=Array.isArray(i)?i[0]:i,e.call(t._obj,n,i)}}e.a=r;var a=n(196),o=n(54),s=n(0),u=Object(s.inherits)(r,a.a);u.initialize=function(t,e,n){var r=this._svg;return r&&(r.removeEventListener("click",this._hrefHandler),r.removeEventListener("mouseover",this._tooltipHandler),r.removeEventListener("mouseout",this._tooltipHandler)),this._svg=r=t&&Object(o.e)(t,"svg"),r&&(r.addEventListener("click",this._hrefHandler),r.addEventListener("mouseover",this._tooltipHandler),r.addEventListener("mouseout",this._tooltipHandler)),a.a.prototype.initialize.call(this,t,e,n)},u.svg=function(){return this._svg},u.on=function(t,e){var n=this.eventName(t),r=this._handlers;if(this._handlerIndex(r[n],t,e)<0){var a={type:t,handler:e,listener:i(this,e)};(r[n]||(r[n]=[])).push(a),this._svg&&this._svg.addEventListener(n,a.listener)}return this},u.off=function(t,e){var n=this.eventName(t),r=this._handlers[n],i=this._handlerIndex(r,t,e);return i>=0&&(this._svg&&this._svg.removeEventListener(n,r[i].listener),r.splice(i,1)),this}},function(t,e,n){"use strict";function r(t){f.a.call(this,t),this._dirtyID=1,this._dirty=[],this._svg=null,this._root=null,this._defs=null}function i(t,e,n){var r,i,a;for(t=Object(d.b)(t,n,"linearGradient",O),t.setAttribute("id",e.id),t.setAttribute("x1",e.x1),t.setAttribute("x2",e.x2),t.setAttribute("y1",e.y1),t.setAttribute("y2",e.y2),r=0,i=e.stops.length;r<i;++r)a=Object(d.b)(t,r,"stop",O),a.setAttribute("offset",e.stops[r].offset),a.setAttribute("stop-color",e.stops[r].color);Object(d.c)(t,r)}function a(t,e,n){var r;t=Object(d.b)(t,n,"clipPath",O),t.setAttribute("id",e.id),e.path?(r=Object(d.b)(t,0,"path",O),r.setAttribute("d",e.path)):(r=Object(d.b)(t,0,"rect",O),r.setAttribute("x",0),r.setAttribute("y",0),r.setAttribute("width",e.width),r.setAttribute("height",e.height))}function o(t,e){for(;t&&t.dirty!==e;t=t.mark.group){if(t.dirty=e,!t.mark||t.mark.dirty===e)return;t.mark.dirty=e}}function s(t,e,n){e=e.lastChild;var r,i=0;Object(g.b)(n,function(n){r=t.draw(e,n,r),++i}),Object(d.c)(e,1+i)}function u(t,e,n,r){var i,a=t._svg;if(!a&&(i=e.ownerDocument,a=Object(d.d)(i,r,O),t._svg=a,t.mark&&(a.__data__=t,a.__values__={fill:"default"},"g"===r))){var o=Object(d.d)(i,"path",O);o.setAttribute("class","background"),a.appendChild(o),o.__data__=t;var s=Object(d.d)(i,"g",O);a.appendChild(s),s.__data__=t}return!i&&a.previousSibling===n&&n||e.insertBefore(a,n?n.nextSibling:e.firstChild),a}function c(t,e,n){e!==M[t]&&(null!=e?n?j.setAttributeNS(n,t,e):j.setAttribute(t,e):n?j.removeAttributeNS(n,t):j.removeAttribute(t),M[t]=e)}function l(){var t;return"undefined"==typeof window?"":(t=window.location).hash?t.href.slice(0,-t.hash.length):t.href}e.a=r;var f=n(124),h=n(49),d=n(54),p=n(197),v=n(123),g=n(38),b=n(122),m=n(341),y=n(342),_=n(0),O=m.a.xmlns,w=Object(_.inherits)(r,f.a),x=f.a.prototype;w.initialize=function(t,e,n,r){return t&&(this._svg=Object(d.b)(t,0,"svg",O),this._svg.setAttribute("class","marks"),Object(d.c)(t,1),this._root=Object(d.b)(this._svg,0,"g",O),Object(d.c)(this._svg,1)),this._defs={gradient:{},clipping:{}},this.background(this._bgcolor),x.initialize.call(this,t,e,n,r)},w.background=function(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),x.background.apply(this,arguments)},w.resize=function(t,e,n,r){return x.resize.call(this,t,e,n,r),this._svg&&(this._svg.setAttribute("width",this._width*this._scale),this._svg.setAttribute("height",this._height*this._scale),this._svg.setAttribute("viewBox","0 0 "+this._width+" "+this._height),this._root.setAttribute("transform","translate("+this._origin+")")),this._dirty=[],this},w.svg=function(){if(!this._svg)return null;var t={class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 "+this._width+" "+this._height};for(var e in m.a)t[e]=m.a[e];var n=this._bgcolor?Object(p.b)("rect",{width:this._width,height:this._height,style:"fill: "+this._bgcolor+";"})+Object(p.a)("rect"):"";return Object(p.b)("svg",t)+n+this._svg.innerHTML+Object(p.a)("svg")},w._render=function(t){return this._dirtyCheck()&&(this._dirtyAll&&this._resetDefs(),this.draw(this._root,t),Object(d.c)(this._root,1)),this.updateDefs(),this._dirty=[],++this._dirtyID,this},w.updateDefs=function(){var t,e=this._svg,n=this._defs,r=n.el,o=0;for(t in n.gradient)r||(n.el=r=Object(d.b)(e,0,"defs",O)),i(r,n.gradient[t],o++);for(t in n.clipping)r||(n.el=r=Object(d.b)(e,0,"defs",O)),a(r,n.clipping[t],o++);r&&(0===o?(e.removeChild(r),n.el=null):Object(d.c)(r,o))},w._resetDefs=function(){var t=this._defs;t.gradient={},t.clipping={}},w.dirty=function(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))},w.isDirty=function(t){return this._dirtyAll||!t._svg||t.dirty===this._dirtyID},w._dirtyCheck=function(){this._dirtyAll=!0;var t=this._dirty;if(!t.length)return!0;var e,n,r,i,a,s,u,c=++this._dirtyID;for(a=0,s=t.length;a<s;++a)e=t[a],n=e.mark,n.marktype!==r&&(r=n.marktype,i=h.a[r]),n.zdirty&&n.dirty!==c&&(this._dirtyAll=!1,n.dirty=c,o(n.group,c)),e.exit?(i.nested&&n.items.length?(u=n.items[0],u._svg&&this._update(i,u._svg,u)):e._svg&&(u=e._svg.parentNode)&&u.removeChild(e._svg),e._svg=null):(e=i.nested?n.items[0]:e,e._update!==c&&(e._svg&&e._svg.ownerSVGElement?this._update(i,e._svg,e):(this._dirtyAll=!1,o(e,c)),e._update=c));return!this._dirtyAll},w.draw=function(t,e,n){function r(t){var e=a.isDirty(t),n=u(t,i,f,o.tag);e&&(a._update(o,n,t),l&&s(a,n,t)),f=n,++p}if(!this.isDirty(e))return e._svg;var i,a=this,o=h.a[e.marktype],c=!1===e.interactive?"none":null,l="g"===o.tag,f=null,p=0;return i=u(e,t,n,"g"),i.setAttribute("class",Object(d.a)(e)),l||i.style.setProperty("pointer-events",c),e.clip?i.setAttribute("clip-path",Object(b.a)(a,e,e.group)):i.removeAttribute("clip-path"),o.nested?e.items.length&&r(e.items[0]):Object(g.b)(e,r),Object(d.c)(i,p),i};var j=null,M=null,k={group:function(t,e,n){M=e.__values__,j=e.childNodes[1],t.foreground(c,n,this),j=e.childNodes[0],t.background(c,n,this);var r=!1===n.mark.interactive?"none":null;r!==M.events&&(j.style.setProperty("pointer-events",r),M.events=r)},text:function(t,e,n){var r=Object(v.d)(n);r!==M.text&&(e.textContent=r,M.text=r),(r=Object(v.a)(n))!==M.font&&(e.style.setProperty("font",r),M.font=r)}};w._update=function(t,e,n){j=e,M=e.__values__,t.attr(c,n,this);var r=k[t.type];r&&r.call(this,t,e,n),this.style(j,n)},w.style=function(t,e){if(null!=e){var n,r,i,a,o;for(n=0,r=y.a.length;n<r;++n)i=y.a[n],(o=e[i])!==M[i]&&(a=y.b[i],null==o?"fill"===a?t.style.setProperty(a,"none"):t.style.removeProperty(a):(o.id&&(this._defs.gradient[o.id]=o,o="url("+l()+"#"+o.id+")"),t.style.setProperty(a,o+"")),M[i]=o)}}},function(t,e,n){"use strict";e.a={version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}},function(t,e,n){"use strict";n.d(e,"b",function(){return r}),n.d(e,"a",function(){return i});var r={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},i=Object.keys(r)},function(t,e,n){"use strict";function r(t){s.a.call(this,t),this._text={head:"",bg:"",root:"",foot:"",defs:"",body:""},this._defs={gradient:{},clipping:{}}}function i(t,e,n,r){y[r||t]=e}function a(t,e,n,r){if(null==t)return"";var i,a,o,s,u,c="";for("bgrect"===n&&!1===e.interactive&&(c+="pointer-events: none; "),"text"===n&&(c+="font: "+Object(f.a)(t)+"; "),i=0,a=v.a.length;i<a;++i)o=v.a[i],s=v.b[o],u=t[o],null==u?"fill"===s&&(c+="fill: none; "):"transparent"!==u||"fill"!==s&&"stroke"!==s?(u.id&&(r.gradient[u.id]=u,u="url(#"+u.id+")"),c+=s+": "+u+"; "):c+=s+": none; ";return c?'style="'+c.trim()+'"':null}function o(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}e.a=r;var s=n(124),u=n(49),c=n(54),l=n(197),f=n(123),h=n(38),d=n(122),p=n(341),v=n(342),g=n(0),b=Object(g.inherits)(r,s.a),m=s.a.prototype;b.resize=function(t,e,n,r){m.resize.call(this,t,e,n,r);var i=this._origin,a=this._text,o={class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 "+this._width+" "+this._height};for(var s in p.a)o[s]=p.a[s];a.head=Object(l.b)("svg",o);var u=this._bgcolor;return"transparent"!==u&&"none"!==u||(u=null),a.bg=u?Object(l.b)("rect",{width:this._width,height:this._height,style:"fill: "+u+";"})+Object(l.a)("rect"):"",a.root=Object(l.b)("g",{transform:"translate("+i+")"}),a.foot=Object(l.a)("g")+Object(l.a)("svg"),this},b.background=function(){var t=m.background.apply(this,arguments);return arguments.length&&this._text.head&&this.resize(this._width,this._height,this._origin,this._scale),t},b.svg=function(){var t=this._text;return t.head+t.bg+t.defs+t.root+t.body+t.foot},b._render=function(t){return this._text.body=this.mark(t),this._text.defs=this.buildDefs(),this},b.buildDefs=function(){var t,e,n,r,i=this._defs,a="";for(e in i.gradient){for(n=i.gradient[e],r=n.stops,a+=Object(l.b)("linearGradient",{id:e,x1:n.x1,x2:n.x2,y1:n.y1,y2:n.y2}),t=0;t<r.length;++t)a+=Object(l.b)("stop",{offset:r[t].offset,"stop-color":r[t].color})+Object(l.a)("stop");a+=Object(l.a)("linearGradient")}for(e in i.clipping)n=i.clipping[e],a+=Object(l.b)("clipPath",{id:e}),n.path?a+=Object(l.b)("path",{d:n.path})+Object(l.a)("path"):a+=Object(l.b)("rect",{x:0,y:0,width:n.width,height:n.height})+Object(l.a)("rect"),a+=Object(l.a)("clipPath");return a.length>0?Object(l.b)("defs")+a+Object(l.a)("defs"):""};var y;b.attributes=function(t,e){return y={},t(i,e,this),y},b.href=function(t){var e,n=this,r=t.href;if(r){if(e=n._hrefs&&n._hrefs[r])return e;n.sanitizeURL(r).then(function(t){t["xlink:href"]=t.href,t.href=null,(n._hrefs||(n._hrefs={}))[r]=t})}return null},b.mark=function(t){function e(e){var u=r.href(e);u&&(v+=Object(l.b)("a",u)),n="g"!==s?a(e,t,s,p):null,v+=Object(l.b)(s,r.attributes(i.attr,e),n),"text"===s?v+=o(Object(f.d)(e)):"g"===s&&(v+=Object(l.b)("path",r.attributes(i.background,e),a(e,t,"bgrect",p))+Object(l.a)("path"),v+=Object(l.b)("g",r.attributes(i.foreground,e))+r.markGroup(e)+Object(l.a)("g")),v+=Object(l.a)(s),u&&(v+=Object(l.a)("a"))}var n,r=this,i=u.a[t.marktype],s=i.tag,p=this._defs,v="";return"g"!==s&&!1===t.interactive&&(n='style="pointer-events: none;"'),v+=Object(l.b)("g",{class:Object(c.a)(t),"clip-path":t.clip?Object(d.a)(r,t,t.group):null},n),i.nested?t.items&&t.items.length&&e(t.items[0]):Object(h.b)(t,e),v+Object(l.a)("g")},b.markGroup=function(t){var e=this,n="";return Object(h.b)(t,function(t){n+=e.mark(t)}),n}},function(t,e,n){"use strict";n.d(e,"d",function(){return r}),n.d(e,"b",function(){return i}),n.d(e,"c",function(){return a}),n.d(e,"a",function(){return o});var r="top",i="left",a="right",o="bottom"},function(t,e,n){"use strict";e.a=function(t,e,n){var r=t-e+2*n;return t?r>0?r:1:0}},function(t,e,n){"use strict";function r(t){function e(e){var r=e+"",i=n.get(r);if(!i){if(u!==o)return u;n.set(r,i=s.push(e))}return t[(i-1)%t.length]}var n=Object(i.a)(),s=[],u=o;return t=null==t?[]:a.b.call(t),e.domain=function(t){if(!arguments.length)return s.slice();s=[],n=Object(i.a)();for(var r,a,o=-1,u=t.length;++o<u;)n.has(a=(r=t[o])+"")||n.set(a,s.push(r));return e},e.range=function(n){return arguments.length?(t=a.b.call(n),e):t.slice()},e.unknown=function(t){return arguments.length?(u=t,e):u},e.copy=function(){return r().domain(s).range(t).unknown(u)},e}n.d(e,"b",function(){return o}),e.a=r;var i=n(75),a=n(56),o={name:"implicit"}},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return i});var r=Math.PI/180,i=180/Math.PI},function(t,e,n){"use strict";function r(t){return function(e){var n,r,a=e.length,o=new Array(a),s=new Array(a),u=new Array(a);for(n=0;n<a;++n)r=Object(i.f)(e[n]),o[n]=r.r||0,s[n]=r.g||0,u[n]=r.b||0;return o=t(o),s=t(s),u=t(u),r.opacity=1,function(t){return r.r=o(t),r.g=s(t),r.b=u(t),r+""}}}n.d(e,"b",function(){return u}),n.d(e,"c",function(){return c});var i=n(40),a=n(202),o=n(349),s=n(85);e.a=function t(e){function n(t,e){var n=r((t=Object(i.f)(t)).r,(e=Object(i.f)(e)).r),a=r(t.g,e.g),o=r(t.b,e.b),u=Object(s.a)(t.opacity,e.opacity);return function(e){return t.r=n(e),t.g=a(e),t.b=o(e),t.opacity=u(e),t+""}}var r=Object(s.b)(e);return n.gamma=t,n}(1);var u=r(a.b),c=r(o.a)},function(t,e,n){"use strict";var r=n(202);e.a=function(t){var e=t.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*e),a=t[(i+e-1)%e],o=t[i%e],s=t[(i+1)%e],u=t[(i+2)%e];return Object(r.a)((n-i/e)*e,a,o,s,u)}}},function(t,e,n){"use strict";e.a=function(t){return function(){return t}}},function(t,e,n){"use strict";var r=n(199);e.a=function(t,e){var n,i=e?e.length:0,a=t?Math.min(i,t.length):0,o=new Array(a),s=new Array(i);for(n=0;n<a;++n)o[n]=Object(r.a)(t[n],e[n]);for(;n<i;++n)s[n]=e[n];return function(t){for(n=0;n<a;++n)s[n]=o[n](t);return s}}},function(t,e,n){"use strict";e.a=function(t,e){var n=new Date;return t=+t,e-=t,function(r){return n.setTime(t+e*r),n}}},function(t,e,n){"use strict";var r=n(199);e.a=function(t,e){var n,i={},a={};null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={});for(n in e)n in t?i[n]=Object(r.a)(t[n],e[n]):a[n]=e[n];return function(t){for(n in i)a[n]=i[n](t);return a}}},function(t,e,n){"use strict";function r(t){return function(){return t}}function i(t){return function(e){return t(e)+""}}var a=n(125),o=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,s=new RegExp(o.source,"g");e.a=function(t,e){var n,u,c,l=o.lastIndex=s.lastIndex=0,f=-1,h=[],d=[];for(t+="",e+="";(n=o.exec(t))&&(u=s.exec(e));)(c=u.index)>l&&(c=e.slice(l,c),h[f]?h[f]+=c:h[++f]=c),(n=n[0])===(u=u[0])?h[f]?h[f]+=u:h[++f]=u:(h[++f]=null,d.push({i:f,x:Object(a.a)(n,u)})),l=s.lastIndex;return l<e.length&&(c=e.slice(l),h[f]?h[f]+=c:h[++f]=c),h.length<2?d[0]?i(d[0].x):r(e):(e=d.length,function(t){for(var n,r=0;r<e;++r)h[(n=d[r]).i]=n.x(t);return h.join("")})}},function(t,e,n){"use strict";e.a=function(t){return+t}},function(t,e,n){"use strict";var r=n(127),i=n(736),a=n(737),o=n(357),s=n(358),u=n(359),c=n(740),l=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];e.a=function(t){function e(t){function e(t){var e,a,o,s=_,h=O;if("c"===y)h=w(t)+h,t="";else{t=+t;var v=t<0;if(t=w(Math.abs(t),m),v&&0==+t&&(v=!1),s=(v?"("===i?i:"-":"-"===i||"("===i?"":i)+s,h=("s"===y?l[8+u.b/3]:"")+h+(v&&"("===i?")":""),x)for(e=-1,a=t.length;++e<a;)if(48>(o=t.charCodeAt(e))||o>57){h=(46===o?d+t.slice(e+1):t.slice(e))+h,t=t.slice(0,e);break}}b&&!c&&(t=f(t,1/0));var j=s.length+t.length+h.length,M=j<g?new Array(g-j+1).join(n):"";switch(b&&c&&(t=f(M+t,M.length?g-h.length:1/0),M=""),r){case"<":t=s+t+h+M;break;case"=":t=s+M+t+h;break;case"^":t=M.slice(0,j=M.length>>1)+s+t+h+M.slice(j);break;default:t=M+s+t+h}return p(t)}t=Object(o.a)(t);var n=t.fill,r=t.align,i=t.sign,a=t.symbol,c=t.zero,g=t.width,b=t.comma,m=t.precision,y=t.type,_="$"===a?h[0]:"#"===a&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",O="$"===a?h[1]:/[%p]/.test(y)?v:"",w=s.a[y],x=!y||/[defgprs%]/.test(y);return m=null==m?y?6:12:/[gprs]/.test(y)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),e.toString=function(){return t+""},e}function n(t,n){var i=e((t=Object(o.a)(t),t.type="f",t)),a=3*Math.max(-8,Math.min(8,Math.floor(Object(r.a)(n)/3))),s=Math.pow(10,-a),u=l[8+a/3];return function(t){return i(s*t)+u}}var f=t.grouping&&t.thousands?Object(i.a)(t.grouping,t.thousands):c.a,h=t.currency,d=t.decimal,p=t.numerals?Object(a.a)(t.numerals):c.a,v=t.percent||"%";return{format:e,formatPrefix:n}}},function(t,e,n){"use strict";function r(t){return new i(t)}function i(t){if(!(e=o.exec(t)))throw new Error("invalid format: "+t);var e,n=e[1]||" ",r=e[2]||">",i=e[3]||"-",s=e[4]||"",u=!!e[5],c=e[6]&&+e[6],l=!!e[7],f=e[8]&&+e[8].slice(1),h=e[9]||"";"n"===h?(l=!0,h="g"):a.a[h]||(h=""),(u||"0"===n&&"="===r)&&(u=!0,n="0",r="="),this.fill=n,this.align=r,this.sign=i,this.symbol=s,this.zero=u,this.width=c,this.comma=l,this.precision=f,this.type=h}e.a=r;var a=n(358),o=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;r.prototype=i.prototype,i.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type}},function(t,e,n){"use strict";var r=n(738),i=n(359),a=n(739);e.a={"":r.a,"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return Object(a.a)(100*t,e)},r:a.a,s:i.a,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}}},function(t,e,n){"use strict";n.d(e,"b",function(){return r});var r,i=n(204);e.a=function(t,e){var n=Object(i.a)(t,e);if(!n)return t+"";var a=n[0],o=n[1],s=o-(r=3*Math.max(-8,Math.min(8,Math.floor(o/3))))+1,u=a.length;return s===u?a:s>u?a+new Array(s-u+1).join("0"):s>0?a.slice(0,s)+"."+a.slice(s):"0."+new Array(1-s).join("0")+Object(i.a)(t,Math.max(0,e+s-1))[0]}},function(t,e,n){"use strict";e.a=function(t,e){t=t.slice();var n,r=0,i=t.length-1,a=t[r],o=t[i];return o<a&&(n=r,r=i,i=n,n=a,a=o,o=n),t[r]=e.floor(a),t[i]=e.ceil(o),t}},function(t,e,n){"use strict";function r(t){return new Date(t)}function i(t){return t instanceof Date?+t:+new Date(+t)}function a(t,e,n,u,c,_,O,w,x){function j(r){return(O(r)<r?A:_(r)<r?P:c(r)<r?T:u(r)<r?N:e(r)<r?n(r)<r?C:R:t(r)<r?D:L)(r)}function M(e,n,r,i){if(null==e&&(e=10),"number"==typeof e){var a=Math.abs(r-n)/e,s=Object(o.bisector)(function(t){return t[2]}).right(I,a);s===I.length?(i=Object(o.tickStep)(n/y,r/y,e),e=t):s?(s=I[a/I[s-1][2]<I[s][2]/a?s-1:s],i=s[1],e=s[0]):(i=Math.max(Object(o.tickStep)(n,r,e),1),e=w)}return null==i?e:e.every(i)}var k=Object(f.b)(f.c,s.interpolateNumber),S=k.invert,E=k.domain,A=x(".%L"),P=x(":%S"),T=x("%I:%M"),N=x("%I %p"),C=x("%a %d"),R=x("%b %d"),D=x("%B"),L=x("%Y"),I=[[O,1,d],[O,5,5*d],[O,15,15*d],[O,30,30*d],[_,1,p],[_,5,5*p],[_,15,15*p],[_,30,30*p],[c,1,v],[c,3,3*v],[c,6,6*v],[c,12,12*v],[u,1,g],[u,2,2*g],[n,1,b],[e,1,m],[e,3,3*m],[t,1,y]];return k.invert=function(t){return new Date(S(t))},k.domain=function(t){return arguments.length?E(l.a.call(t,i)):E().map(r)},k.ticks=function(t,e){var n,r=E(),i=r[0],a=r[r.length-1],o=a<i;return o&&(n=i,i=a,a=n),n=M(t,i,a,e),n=n?n.range(i,a+1):[],o?n.reverse():n},k.tickFormat=function(t,e){return null==e?j:x(e)},k.nice=function(t,e){var n=E();return(t=M(t,n[0],n[n.length-1],e))?E(Object(h.a)(n,t)):k},k.copy=function(){return Object(f.a)(k,a(t,e,n,u,c,_,O,w,x))},k}e.a=a;var o=n(9),s=n(39),u=n(111),c=n(76),l=n(56),f=n(126),h=n(360),d=1e3,p=60*d,v=60*p,g=24*v,b=7*g,m=30*g,y=365*g;e.b=function(){return a(u.k,u.f,u.j,u.a,u.b,u.d,u.g,u.c,c.a).domain([new Date(2e3,0,1),new Date(2e3,0,2)])}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(363);n.d(e,"contours",function(){return r.a});var i=n(812);n.d(e,"contourDensity",function(){return i.a})},function(t,e,n){"use strict";var r=n(9),i=n(364),a=n(808),o=n(809),s=n(365),u=n(810),c=n(811),l=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];e.a=function(){function t(t){var n=v(t);if(Array.isArray(n))n=n.slice().sort(a.a);else{var i=Object(r.extent)(t),o=i[0],s=i[1];n=Object(r.tickStep)(o,s,n),n=Object(r.range)(Math.floor(o/n)*n,Math.floor(s/n)*n,n)}return n.map(function(n){return e(t,n)})}function e(t,e){var r=[],i=[];return n(t,e,function(n){g(n,t,e),Object(o.a)(n)>0?r.push([n]):i.push(n)}),i.forEach(function(t){for(var e,n=0,i=r.length;n<i;++n)if(-1!==Object(u.a)((e=r[n])[0],t))return void e.push(t)}),{type:"MultiPolygon",value:e,coordinates:r}}function n(t,e,n){function r(t){var e,r,o=[t[0][0]+i,t[0][1]+a],s=[t[1][0]+i,t[1][1]+a],u=f(o),c=f(s);(e=v[u])?(r=h[c])?(delete v[e.end],delete h[r.start],e===r?(e.ring.push(s),n(e.ring)):h[e.start]=v[r.end]={start:e.start,end:r.end,ring:e.ring.concat(r.ring)}):(delete v[e.end],e.ring.push(s),v[e.end=c]=e):(e=h[c])?(r=v[u])?(delete h[e.start],delete v[r.end],e===r?(e.ring.push(s),n(e.ring)):h[r.start]=v[e.end]={start:r.start,end:e.end,ring:r.ring.concat(e.ring)}):(delete h[e.start],e.ring.unshift(o),h[e.start=u]=e):h[u]=v[c]={start:u,end:c,ring:[o,s]}}var i,a,o,s,u,c,h=new Array,v=new Array;for(i=a=-1,s=t[0]>=e,l[s<<1].forEach(r);++i<d-1;)o=s,s=t[i+1]>=e,l[o|s<<1].forEach(r);for(l[s<<0].forEach(r);++a<p-1;){for(i=-1,s=t[a*d+d]>=e,u=t[a*d]>=e,l[s<<1|u<<2].forEach(r);++i<d-1;)o=s,s=t[a*d+d+i+1]>=e,c=u,u=t[a*d+i+1]>=e,l[o|s<<1|u<<2|c<<3].forEach(r);l[s|u<<3].forEach(r)}for(i=-1,u=t[a*d]>=e,l[u<<2].forEach(r);++i<d-1;)c=u,u=t[a*d+i+1]>=e,l[u<<2|c<<3].forEach(r);l[u<<3].forEach(r)}function f(t){return 2*t[0]+t[1]*(d+1)*4}function h(t,e,n){t.forEach(function(t){var r,i=t[0],a=t[1],o=0|i,s=0|a,u=e[s*d+o];i>0&&i<d&&o===i&&(r=e[s*d+o-1],t[0]=i+(n-r)/(u-r)-.5),a>0&&a<p&&s===a&&(r=e[(s-1)*d+o],t[1]=a+(n-r)/(u-r)-.5)})}var d=1,p=1,v=r.thresholdSturges,g=h;return t.contour=e,t.size=function(e){if(!arguments.length)return[d,p];var n=Math.ceil(e[0]),r=Math.ceil(e[1]);if(!(n>0&&r>0))throw new Error("invalid size");return d=n,p=r,t},t.thresholds=function(e){return arguments.length?(v="function"==typeof e?e:Array.isArray(e)?Object(s.a)(i.a.call(e)):Object(s.a)(e),t):v},t.smooth=function(e){return arguments.length?(g=e?h:c.a,t):g===h},t}},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=Array.prototype,i=r.slice},function(t,e,n){"use strict";e.a=function(t){return function(){return t}}},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return i}),n.d(e,"c",function(){return a});var r="Feature",i="FeatureCollection",a="MultiPoint"},function(t,e,n){"use strict";function r(){m.point=a}function i(){o(s,u)}function a(t,e){m.point=o,s=t,u=e,t*=d.r,e*=d.r,c=t,l=Object(d.g)(e=e/2+d.q),f=Object(d.t)(e)}function o(t,e){t*=d.r,e*=d.r,e=e/2+d.q;var n=t-c,r=n>=0?1:-1,i=r*n,a=Object(d.g)(e),o=Object(d.t)(e),s=f*o,u=l*a+s*Object(d.g)(i),h=s*r*Object(d.t)(i);g.add(Object(d.e)(h,u)),c=t,l=a,f=o}n.d(e,"a",function(){return g}),n.d(e,"b",function(){return m});var s,u,c,l,f,h=n(64),d=n(5),p=n(44),v=n(57),g=Object(h.a)(),b=Object(h.a)(),m={point:p.a,lineStart:p.a,lineEnd:p.a,polygonStart:function(){g.reset(),m.lineStart=r,m.lineEnd=i},polygonEnd:function(){var t=+g;b.add(t<0?d.w+t:t),this.lineStart=this.lineEnd=this.point=p.a},sphere:function(){b.add(d.w)}};e.c=function(t){return b.reset(),Object(v.a)(t,m),2*b}},function(t,e,n){"use strict";function r(t,e,n,r,o,u){if(n){var c=Object(s.g)(e),l=Object(s.t)(e),f=r*n;null==o?(o=e+r*s.w,u=e-f/2):(o=i(c,o),u=i(c,u),(r>0?o<u:o>u)&&(o+=r*s.w));for(var h,d=o;r>0?d>u:d<u;d-=f)h=Object(a.g)([c,-l*Object(s.g)(d),-l*Object(s.t)(d)]),t.point(h[0],h[1])}}function i(t,e){e=Object(a.a)(e),e[0]-=t,Object(a.e)(e);var n=Object(s.b)(-e[1]);return((-e[2]<0?-n:n)+s.w-s.i)%s.w}e.a=r;var a=n(87),o=n(819),s=n(5),u=n(129);e.b=function(){function t(t,e){n.push(t=i(t,e)),t[0]*=s.h,t[1]*=s.h}function e(){var t=a.apply(this,arguments),e=c.apply(this,arguments)*s.r,o=l.apply(this,arguments)*s.r;return n=[],i=Object(u.b)(-t[0]*s.r,-t[1]*s.r,0).invert,r(f,e,o,1),t={type:"Polygon",coordinates:[n]},n=i=null,t}var n,i,a=Object(o.a)([0,0]),c=Object(o.a)(90),l=Object(o.a)(6),f={point:t};return e.center=function(t){return arguments.length?(a="function"==typeof t?t:Object(o.a)([+t[0],+t[1]]),e):a},e.radius=function(t){return arguments.length?(c="function"==typeof t?t:Object(o.a)(+t),e):c},e.precision=function(t){return arguments.length?(l="function"==typeof t?t:Object(o.a)(+t),e):l},e}},function(t,e,n){"use strict";e.a=function(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n}},function(t,e,n){"use strict";function r(t){var e,n=NaN,r=NaN,a=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,u){var c=o>0?s.o:-s.o,l=Object(s.a)(o-n);Object(s.a)(l-s.o)<s.i?(t.point(n,r=(r+u)/2>0?s.l:-s.l),t.point(a,r),t.lineEnd(),t.lineStart(),t.point(c,r),t.point(o,r),e=0):a!==c&&l>=s.o&&(Object(s.a)(n-a)<s.i&&(n-=a*s.i),Object(s.a)(o-c)<s.i&&(o-=c*s.i),r=i(n,r,o,u),t.point(a,r),t.lineEnd(),t.lineStart(),t.point(c,r),e=0),t.point(n=o,r=u),a=c},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}function i(t,e,n,r){var i,a,o=Object(s.t)(t-n);return Object(s.a)(o)>s.i?Object(s.d)((Object(s.t)(e)*(a=Object(s.g)(r))*Object(s.t)(n)-Object(s.t)(r)*(i=Object(s.g)(e))*Object(s.t)(t))/(i*a*o)):(e+r)/2}function a(t,e,n,r){var i;if(null==t)i=n*s.l,r.point(-s.o,i),r.point(0,i),r.point(s.o,i),r.point(s.o,0),r.point(s.o,-i),r.point(0,-i),r.point(-s.o,-i),r.point(-s.o,0),r.point(-s.o,i);else if(Object(s.a)(t[0]-e[0])>s.i){var a=t[0]<e[0]?s.o:-s.o;i=n*a/2,r.point(-a,i),r.point(0,i),r.point(a,i)}else r.point(e[0],e[1])}var o=n(371),s=n(5);e.a=Object(o.a)(function(){return!0},r,a,[-s.o,-s.l])},function(t,e,n){"use strict";function r(t){return t.length>1}function i(t,e){return((t=t.x)[0]<0?t[1]-s.l-s.i:s.l-t[1])-((e=e.x)[0]<0?e[1]-s.l-s.i:s.l-e[1])}var a=n(372),o=n(373),s=n(5),u=n(375),c=n(9);e.a=function(t,e,n,s){return function(l){function f(e,n){t(e,n)&&l.point(e,n)}function h(t,e){O.point(t,e)}function d(){M.point=h,O.lineStart()}function p(){M.point=f,O.lineEnd()}function v(t,e){_.push([t,e]),x.point(t,e)}function g(){x.lineStart(),_=[]}function b(){v(_[0][0],_[0][1]),x.lineEnd();var t,e,n,i,a=x.clean(),o=w.result(),s=o.length;if(_.pop(),m.push(_),_=null,s)if(1&a){if(n=o[0],(e=n.length-1)>0){for(j||(l.polygonStart(),j=!0),l.lineStart(),t=0;t<e;++t)l.point((i=n[t])[0],i[1]);l.lineEnd()}}else s>1&&2&a&&o.push(o.pop().concat(o.shift())),y.push(o.filter(r))}var m,y,_,O=e(l),w=Object(a.a)(),x=e(w),j=!1,M={point:f,lineStart:d,lineEnd:p,polygonStart:function(){M.point=v,M.lineStart=g,M.lineEnd=b,y=[],m=[]},polygonEnd:function(){M.point=f,M.lineStart=d,M.lineEnd=p,y=Object(c.merge)(y);var t=Object(u.a)(m,s);y.length?(j||(l.polygonStart(),j=!0),Object(o.a)(y,i,t,n,l)):t&&(j||(l.polygonStart(),j=!0),l.lineStart(),n(null,null,1,l),l.lineEnd()),j&&(l.polygonEnd(),j=!1),y=m=null},sphere:function(){l.polygonStart(),l.lineStart(),n(null,null,1,l),l.lineEnd(),l.polygonEnd()}};return M}}},function(t,e,n){"use strict";var r=n(44);e.a=function(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:r.a,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}},function(t,e,n){"use strict";function r(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function i(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}var a=n(374);e.a=function(t,e,n,o,s){var u,c,l=[],f=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n,i=t[0],o=t[e];if(Object(a.a)(i,o)){for(s.lineStart(),u=0;u<e;++u)s.point((i=t[u])[0],i[1]);return void s.lineEnd()}l.push(n=new r(i,t,null,!0)),f.push(n.o=new r(i,null,n,!1)),l.push(n=new r(o,t,null,!1)),f.push(n.o=new r(o,null,n,!0))}}),l.length){for(f.sort(e),i(l),i(f),u=0,c=f.length;u<c;++u)f[u].e=n=!n;for(var h,d,p=l[0];;){for(var v=p,g=!0;v.v;)if((v=v.n)===p)return;h=v.z,s.lineStart();do{if(v.v=v.o.v=!0,v.e){if(g)for(u=0,c=h.length;u<c;++u)s.point((d=h[u])[0],d[1]);else o(v.x,v.n.x,1,s);v=v.n}else{if(g)for(h=v.p.z,u=h.length-1;u>=0;--u)s.point((d=h[u])[0],d[1]);else o(v.x,v.p.x,-1,s);v=v.p}v=v.o,h=v.z,g=!g}while(!v.v);s.lineEnd()}}}},function(t,e,n){"use strict";var r=n(5);e.a=function(t,e){return Object(r.a)(t[0]-e[0])<r.i&&Object(r.a)(t[1]-e[1])<r.i}},function(t,e,n){"use strict";var r=n(64),i=n(87),a=n(5),o=Object(r.a)();e.a=function(t,e){var n=e[0],r=e[1],s=Object(a.t)(r),u=[Object(a.t)(n),-Object(a.g)(n),0],c=0,l=0;o.reset(),1===s?r=a.l+a.i:-1===s&&(r=-a.l-a.i);for(var f=0,h=t.length;f<h;++f)if(p=(d=t[f]).length)for(var d,p,v=d[p-1],g=v[0],b=v[1]/2+a.q,m=Object(a.t)(b),y=Object(a.g)(b),_=0;_<p;++_,g=w,m=j,y=M,v=O){var O=d[_],w=O[0],x=O[1]/2+a.q,j=Object(a.t)(x),M=Object(a.g)(x),k=w-g,S=k>=0?1:-1,E=S*k,A=E>a.o,P=m*j;if(o.add(Object(a.e)(P*S*Object(a.t)(E),y*M+P*Object(a.g)(E))),c+=A?k+S*a.w:k,A^g>=n^w>=n){var T=Object(i.c)(Object(i.a)(v),Object(i.a)(O));Object(i.e)(T);var N=Object(i.c)(u,T);Object(i.e)(N);var C=(A^k>=0?-1:1)*Object(a.c)(N[2]);(r>C||r===C&&(T[0]||T[1]))&&(l+=A^k>=0?1:-1)}}return(c<-a.i||c<a.i&&o<-a.i)^1&l}},function(t,e,n){"use strict";var r=n(87),i=n(368),a=n(5),o=n(374),s=n(371);e.a=function(t){function e(e,n,r,a){Object(i.a)(a,t,h,r,e,n)}function n(t,e){return Object(a.g)(t)*Object(a.g)(e)>f}function u(t){var e,r,i,s,u;return{lineStart:function(){s=i=!1,u=1},point:function(f,h){var v,g=[f,h],b=n(f,h),m=d?b?0:l(f,h):b?l(f+(f<0?a.o:-a.o),h):0;if(!e&&(s=i=b)&&t.lineStart(),b!==i&&(!(v=c(e,g))||Object(o.a)(e,v)||Object(o.a)(g,v))&&(g[0]+=a.i,g[1]+=a.i,b=n(g[0],g[1])),b!==i)u=0,b?(t.lineStart(),v=c(g,e),t.point(v[0],v[1])):(v=c(e,g),t.point(v[0],v[1]),t.lineEnd()),e=v;else if(p&&e&&d^b){var y;m&r||!(y=c(g,e,!0))||(u=0,d?(t.lineStart(),t.point(y[0][0],y[0][1]),t.point(y[1][0],y[1][1]),t.lineEnd()):(t.point(y[1][0],y[1][1]),t.lineEnd(),t.lineStart(),t.point(y[0][0],y[0][1])))}!b||e&&Object(o.a)(e,g)||t.point(g[0],g[1]),e=g,i=b,r=m},lineEnd:function(){i&&t.lineEnd(),e=null},clean:function(){return u|(s&&i)<<1}}}function c(t,e,n){var i=Object(r.a)(t),o=Object(r.a)(e),s=[1,0,0],u=Object(r.c)(i,o),c=Object(r.d)(u,u),l=u[0],h=c-l*l;if(!h)return!n&&t;var d=f*c/h,p=-f*l/h,v=Object(r.c)(s,u),g=Object(r.f)(s,d),b=Object(r.f)(u,p);Object(r.b)(g,b);var m=v,y=Object(r.d)(g,m),_=Object(r.d)(m,m),O=y*y-_*(Object(r.d)(g,g)-1);if(!(O<0)){var w=Object(a.u)(O),x=Object(r.f)(m,(-y-w)/_);if(Object(r.b)(x,g),x=Object(r.g)(x),!n)return x;var j,M=t[0],k=e[0],S=t[1],E=e[1];k<M&&(j=M,M=k,k=j);var A=k-M,P=Object(a.a)(A-a.o)<a.i,T=P||A<a.i;if(!P&&E<S&&(j=S,S=E,E=j),T?P?S+E>0^x[1]<(Object(a.a)(x[0]-M)<a.i?S:E):S<=x[1]&&x[1]<=E:A>a.o^(M<=x[0]&&x[0]<=k)){var N=Object(r.f)(m,(-y+w)/_);return Object(r.b)(N,g),[x,Object(r.g)(N)]}}}function l(e,n){var r=d?t:a.o-t,i=0;return e<-r?i|=1:e>r&&(i|=2),n<-r?i|=4:n>r&&(i|=8),i}var f=Object(a.g)(t),h=6*a.r,d=f>0,p=Object(a.a)(f)>a.i;return Object(s.a)(n,u,e,d?[0,-t]:[-a.o,t-a.o])}},function(t,e,n){"use strict";var r=n(378),i=[null,null],a={type:"LineString",coordinates:i};e.a=function(t,e){return i[0]=t,i[1]=e,Object(r.a)(a)}},function(t,e,n){"use strict";function r(){v.point=a,v.lineEnd=i}function i(){v.point=v.lineEnd=h.a}function a(t,e){t*=f.r,e*=f.r,s=t,u=Object(f.t)(e),c=Object(f.g)(e),v.point=o}function o(t,e){t*=f.r,e*=f.r;var n=Object(f.t)(e),r=Object(f.g)(e),i=Object(f.a)(t-s),a=Object(f.g)(i),o=Object(f.t)(i),l=r*o,h=c*n-u*r*a,d=u*n+c*r*a;p.add(Object(f.e)(Object(f.u)(l*l+h*h),d)),s=t,u=n,c=r}var s,u,c,l=n(64),f=n(5),h=n(44),d=n(57),p=Object(l.a)(),v={sphere:h.a,point:h.a,lineStart:r,lineEnd:h.a,polygonStart:h.a,polygonEnd:h.a};e.a=function(t){return p.reset(),Object(d.a)(t,v),+p}},function(t,e,n){"use strict";function r(t,e){t<a&&(a=t),t>s&&(s=t),e<o&&(o=e),e>u&&(u=e)}var i=n(44),a=1/0,o=a,s=-a,u=s,c={point:r,lineStart:i.a,lineEnd:i.a,polygonStart:i.a,polygonEnd:i.a,result:function(){var t=[[a,o],[s,u]];return s=u=-(o=a=1/0),t}};e.a=c},function(t,e,n){"use strict";var r=n(206);e.a=function(){return Object(r.b)().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}},function(t,e,n){"use strict";function r(t,e){return[t,e]}e.b=r;var i=n(34);r.invert=r,e.a=function(){return Object(i.a)(r).scale(152.63)}},function(t,e,n){"use strict";var r=n(853);n.d(e,"a",function(){return r.a})},function(t,e,n){"use strict";function r(t){return t.x}function i(t){return t.y}e.b=r,e.c=i;var a=n(284),o=n(75),s=n(868),u=Math.PI*(3-Math.sqrt(5));e.a=function(t){function e(){n(),b.call("tick",c),l<f&&(g.stop(),b.call("end",c))}function n(){var e,n,r=t.length;for(l+=(d-l)*h,v.each(function(t){t(l)}),e=0;e<r;++e)n=t[e],null==n.fx?n.x+=n.vx*=p:(n.x=n.fx,n.vx=0),null==n.fy?n.y+=n.vy*=p:(n.y=n.fy,n.vy=0)}function r(){for(var e,n=0,r=t.length;n<r;++n){if(e=t[n],e.index=n,isNaN(e.x)||isNaN(e.y)){var i=10*Math.sqrt(n),a=n*u;e.x=i*Math.cos(a),e.y=i*Math.sin(a)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function i(e){return e.initialize&&e.initialize(t),e}var c,l=1,f=.001,h=1-Math.pow(f,1/300),d=0,p=.6,v=Object(o.a)(),g=Object(s.a)(e),b=Object(a.a)("tick","end");return null==t&&(t=[]),r(),c={tick:n,restart:function(){return g.restart(e),c},stop:function(){return g.stop(),c},nodes:function(e){return arguments.length?(t=e,r(),v.each(i),c):t},alpha:function(t){return arguments.length?(l=+t,c):l},alphaMin:function(t){return arguments.length?(f=+t,c):f},alphaDecay:function(t){return arguments.length?(h=+t,c):+h},alphaTarget:function(t){return arguments.length?(d=+t,c):d},velocityDecay:function(t){return arguments.length?(p=1-t,c):1-p},force:function(t,e){return arguments.length>1?(null==e?v.remove(t):v.set(t,i(e)),c):v.get(t)},find:function(e,n,r){var i,a,o,s,u,c=0,l=t.length;for(null==r?r=1/0:r*=r,c=0;c<l;++c)s=t[c],i=e-s.x,a=n-s.y,(o=i*i+a*a)<r&&(u=s,r=o);return u},on:function(t,e){return arguments.length>1?(b.on(t,e),c):b.on(t)}}}},function(t,e,n){"use strict";function r(t,e,n){var r=t.x,i=t.y,a=e.r+n.r,o=t.r+n.r,s=e.x-r,u=e.y-i,c=s*s+u*u;if(c){var l=.5+((o*=o)-(a*=a))/(2*c),f=Math.sqrt(Math.max(0,2*a*(o+c)-(o-=c)*o-a*a))/(2*c);n.x=r+l*s+f*u,n.y=i+l*u-f*s}else n.x=r+o,n.y=i}function i(t,e){var n=e.x-t.x,r=e.y-t.y,i=t.r+e.r;return i*i-1e-6>n*n+r*r}function a(t){var e=t._,n=t.next._,r=e.r+n.r,i=(e.x*n.r+n.x*e.r)/r,a=(e.y*n.r+n.y*e.r)/r;return i*i+a*a}function o(t){this._=t,this.next=null,this.previous=null}function s(t){if(!(c=t.length))return 0;var e,n,s,c,l,f,h,d,p,v,g;if(e=t[0],e.x=0,e.y=0,!(c>1))return e.r;if(n=t[1],e.x=-n.r,n.x=e.r,n.y=0,!(c>2))return e.r+n.r;r(n,e,s=t[2]),e=new o(e),n=new o(n),s=new o(s),e.next=s.previous=n,n.next=e.previous=s,s.next=n.previous=e;t:for(h=3;h<c;++h){r(e._,n._,s=t[h]),s=new o(s),d=n.next,p=e.previous,v=n._.r,g=e._.r;do{if(v<=g){if(i(d._,s._)){n=d,e.next=n,n.previous=e,--h;continue t}v+=d._.r,d=d.next}else{if(i(p._,s._)){e=p,e.next=n,n.previous=e,--h;continue t}g+=p._.r,p=p.previous}}while(d!==p.next);for(s.previous=e,s.next=n,e.next=n.previous=n=s,l=a(e);(s=s.next)!==n;)(f=a(s))<l&&(e=s,l=f);n=e.next}for(e=[n._],s=n;(s=s.next)!==n;)e.push(s._);for(s=Object(u.a)(e),h=0;h<c;++h)e=t[h],e.x-=s.x,e.y-=s.y;return s.r}e.a=s;var u=n(385)},function(t,e,n){"use strict";function r(t,e){var n,r;if(o(e,t))return[e];for(n=0;n<t.length;++n)if(i(e,t[n])&&o(c(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(r=n+1;r<t.length;++r)if(i(c(t[n],t[r]),e)&&i(c(t[n],e),t[r])&&i(c(t[r],e),t[n])&&o(l(t[n],t[r],e),t))return[t[n],t[r],e];throw new Error}function i(t,e){var n=t.r-e.r,r=e.x-t.x,i=e.y-t.y;return n<0||n*n<r*r+i*i}function a(t,e){var n=t.r-e.r+1e-6,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function o(t,e){for(var n=0;n<e.length;++n)if(!a(t,e[n]))return!1;return!0}function s(t){switch(t.length){case 1:return u(t[0]);case 2:return c(t[0],t[1]);case 3:return l(t[0],t[1],t[2])}}function u(t){return{x:t.x,y:t.y,r:t.r}}function c(t,e){var n=t.x,r=t.y,i=t.r,a=e.x,o=e.y,s=e.r,u=a-n,c=o-r,l=s-i,f=Math.sqrt(u*u+c*c);return{x:(n+a+u/f*l)/2,y:(r+o+c/f*l)/2,r:(f+i+s)/2}}function l(t,e,n){var r=t.x,i=t.y,a=t.r,o=e.x,s=e.y,u=e.r,c=n.x,l=n.y,f=n.r,h=r-o,d=r-c,p=i-s,v=i-l,g=u-a,b=f-a,m=r*r+i*i-a*a,y=m-o*o-s*s+u*u,_=m-c*c-l*l+f*f,O=d*p-h*v,w=(p*_-v*y)/(2*O)-r,x=(v*g-p*b)/O,j=(d*y-h*_)/(2*O)-i,M=(h*b-d*g)/O,k=x*x+M*M-1,S=2*(a+w*x+j*M),E=w*w+j*j-a*a,A=-(k?(S+Math.sqrt(S*S-4*k*E))/(2*k):E/S);return{x:r+w+x*A,y:i+j+M*A,r:A}}var f=n(889);e.a=function(t){for(var e,n,i=0,o=(t=Object(f.a)(f.b.call(t))).length,u=[];i<o;)e=t[i],n&&a(n,e)?++i:(n=s(u=r(u,e)),i=0);return n}},function(t,e,n){"use strict";function r(){return 0}e.a=r,e.b=function(t){return function(){return t}}},function(t,e,n){"use strict";e.a=function(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(905);n.d(e,"voronoi",function(){return r.a})},function(t,e,n){"use strict";function r(t){return l.b[t.index]={site:t,halfedges:[]}}function i(t,e){var n=t.site,r=e.left,i=e.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=e[1],i=e[0]):(r=e[0],i=e[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function a(t,e){return e[+(e.left!==t.site)]}function o(t,e){return e[+(e.left===t.site)]}function s(){for(var t,e,n,r,a=0,o=l.b.length;a<o;++a)if((t=l.b[a])&&(r=(e=t.halfedges).length)){var s=new Array(r),u=new Array(r);for(n=0;n<r;++n)s[n]=n,u[n]=i(t,l.e[e[n]]);for(s.sort(function(t,e){return u[e]-u[t]}),n=0;n<r;++n)u[n]=e[s[n]];for(n=0;n<r;++n)e[n]=u[n]}}function u(t,e,n,r){var i,s,u,f,h,d,p,v,g,b,m,y,_=l.b.length,O=!0;for(i=0;i<_;++i)if(s=l.b[i]){for(u=s.site,h=s.halfedges,f=h.length;f--;)l.e[h[f]]||h.splice(f,1);for(f=0,d=h.length;f<d;)b=o(s,l.e[h[f]]),m=b[0],y=b[1],p=a(s,l.e[h[++f%d]]),v=p[0],g=p[1],(Math.abs(m-v)>l.f||Math.abs(y-g)>l.f)&&(h.splice(f,0,l.e.push(Object(c.b)(u,b,Math.abs(m-t)<l.f&&r-y>l.f?[t,Math.abs(v-t)<l.f?g:r]:Math.abs(y-r)<l.f&&n-m>l.f?[Math.abs(g-r)<l.f?v:n,r]:Math.abs(m-n)<l.f&&y-e>l.f?[n